(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){e.exports={avatar:"avatar_avatar__3MBHJ","avatar-role--mentor":"avatar_avatar-role--mentor__xOOaU","avatar-role--staff":"avatar_avatar-role--staff__1PxkI","avatar-size--sm":"avatar_avatar-size--sm__2JEUd","avatar-size--md":"avatar_avatar-size--md__2Lary","avatar-size--lg":"avatar_avatar-size--lg__2fNrv","avatar-size--xl":"avatar_avatar-size--xl__1KbzF",onlineIndicator:"avatar_onlineIndicator__2fXg6",clickable:"avatar_clickable__3aYWp",previewError:"avatar_previewError__1Fa5Y"}},104:function(e,t,n){e.exports={badge:"badge_badge__3RgaW",mentor:"badge_mentor__1JU7D badge_badge__3RgaW",text:"badge_text__2j5se",staff:"badge_staff__2pcJ_ badge_badge__3RgaW",mentee:"badge_mentee__3cnh- badge_badge__3RgaW"}},105:function(e,t,n){e.exports={unstyledButton:"modal_unstyledButton__1jmw9",close:"modal_close__1tAYT",closeBottom:"modal_closeBottom__j2DPi",content:"modal_content__3pHCK",fullscreen:"modal_fullscreen__1t0Q2",overlay:"modal_overlay__1dVZ-"}},106:function(e,t,n){e.exports={link:"knowledge-link_link__3VpB0",title:"knowledge-link_title__2MXTi",body:"knowledge-link_body__3wyIo",answers:"knowledge-link_answers__3Sy1w",icon:"knowledge-link_icon__3TvJl",text:"knowledge-link_text__3YoOP"}},107:function(e,t,n){e.exports={hide:"markdown-key_hide__3rlqI",code:"markdown-key_code__3K2iJ",markdownKeyContainer:"markdown-key_markdownKeyContainer__3PzhB",markdownKey:"markdown-key_markdownKey__NUPY2",fadeIn:"markdown-key_fadeIn__HIIB3",fadeOut:"markdown-key_fadeOut__6f0iP"}},108:function(e,t,n){e.exports={progressWrapper:"file-progress_progressWrapper__1v877",progressBar:"file-progress_progressBar__2_pnq",progressBarProgress:"file-progress_progressBarProgress__YeuNs",Gradient:"file-progress_Gradient__EVErp",progressContentGrid:"file-progress_progressContentGrid__39M2T",cancelButtonWrapper:"file-progress_cancelButtonWrapper__3Wl7r",cancelButton:"file-progress_cancelButton__GjZyq"}},109:function(e,t,n){e.exports={lobby:"lobby-scene_lobby__1C1Vk",main:"lobby-scene_main__2ifEa",contextSidebarHidden:"lobby-scene_contextSidebarHidden__2J3eI",section:"lobby-scene_section__qUsn0",contextSidebar:"lobby-scene_contextSidebar__DgDqK",overlay:"lobby-scene_overlay__IoN5C"}},110:function(e,t,n){e.exports={rating:"mentor-rating-inputs_rating__3tHkg",questions:"mentor-rating-inputs_questions__2ye45",section:"mentor-rating-inputs_section__3IOIX"}},130:function(e,t,n){e.exports={transitionDuration:"400ms",alertWrapper:"toast-alert_alertWrapper__1n2eV",slideUp:"toast-alert_slideUp__2iRYv",slideOut:"toast-alert_slideOut__39CUe",slideDown:"toast-alert_slideDown__1whsL",dismissButton:"toast-alert_dismissButton__1QzP_"}},132:function(e,t,n){e.exports={sidebar:"participant-list_sidebar__1bmQ_",members:"participant-list_members__1E5gG",person:"participant-list_person__1L-0v",participants:"participant-list_participants__SlU8g",participantHeader:"participant-list_participantHeader__2xayz",more:"participant-list_more__20lb6",loading:"participant-list_loading__14XB4",note:"participant-list_note__qZBCD"}},133:function(e,t,n){e.exports={nanodegreeList:"nanodegree-list_nanodegreeList__ueqMb",subheading:"nanodegree-list_subheading__1XenN",borderTop:"nanodegree-list_borderTop__3jFK4",graduatedListItem:"nanodegree-list_graduatedListItem__vmusU",marginBottom:"nanodegree-list_marginBottom__2I1Gt"}},134:function(e,t,n){e.exports={editPhoto:"edit-avatar-button_editPhoto__224Mm",avatarMenu:"edit-avatar-button_avatarMenu__2MdLI",avatarList:"edit-avatar-button_avatarList__UEntW"}},135:function(e,t,n){e.exports={dropTargetWrapper:"file-drop-target_dropTargetWrapper__DKsq9",fileDropTrigger:"file-drop-target_fileDropTrigger__31H2m",dropTargetPlaceholder:"file-drop-target_dropTargetPlaceholder__248KB",dropTargetActive:"file-drop-target_dropTargetActive__2bT_y",iconWrapper:"file-drop-target_iconWrapper__3ENj1"}},136:function(e,t,n){e.exports={banner:"new-messages-banner_banner__1figw",container:"new-messages-banner_container__11aCS",buttons:"new-messages-banner_buttons__2TFPA",numMessages:"new-messages-banner_numMessages__1Ctqw",flexEnd:"new-messages-banner_flexEnd__1UlYq"}},137:function(e,t,n){e.exports={room:"room-container_room__Jt9DA",messageList:"room-container_messageList__3Hc-0",chatInputWrapper:"room-container_chatInputWrapper__32Yvw",banner:"room-container_banner__2oQyR",loading:"room-container_loading__NiGZf"}},151:function(e,t,n){e.exports={markdown:"markdown-renderer_markdown__3Lwfm",mention:"markdown-renderer_mention__3arsv"}},154:function(e,t,n){e.exports={participant:"participant-list-item_participant__3qUYo",active:"participant-list-item_active__1tkBn",inactive:"participant-list-item_inactive__1v-uV",link:"participant-list-item_link__3T93P",right:"participant-list-item_right__24IWg",avatar:"participant-list-item_avatar__2i3pU"}},155:function(e,t,n){e.exports={sidebar:"room-details_sidebar__2-1o6",channelMeta:"room-details_channelMeta__1ji-p",channelSummary:"room-details_channelSummary__3N01a",participants:"room-details_participants__4-2Jy"}},156:function(e,t,n){e.exports={threadLink:"thread-link_threadLink__2AdJS",link:"thread-link_link__1BlZH",badge:"thread-link_badge__1PaI5",timestamp:"thread-link_timestamp__3xxS-"}},157:function(e,t,n){e.exports={staticImage:"static-image_staticImage__2pz5p",loaded:"static-image_loaded__2NYHB",placeholder:"static-image_placeholder__2tjU4"}},158:function(e,t,n){e.exports={threadListContainer:"thread-list_threadListContainer__22uHG",header:"thread-list_header__2pYyx",threadList:"thread-list_threadList__3FxwR",threadListItem:"thread-list_threadListItem__34qDA"}},159:function(e,t,n){e.exports={newThread:"new-thread-container_newThread__wY6rC",subHeader:"new-thread-container_subHeader__2cywC",messageList:"new-thread-container_messageList__WxkQQ",chatInputWrapper:"new-thread-container_chatInputWrapper__1SzeY"}},160:function(e,t,n){e.exports={threadHeader:"thread-header_threadHeader__1Oedv",titleContainer:"thread-header_titleContainer__1d5Od",title:"thread-header_title__3LOqU",headerRight:"thread-header_headerRight__9ji95"}},161:function(e,t,n){e.exports={container:"bio-preview_container__1bTaP",bioContainer:"bio-preview_bioContainer__20TvN",bio:"bio-preview_bio__1xXlO",avatar:"bio-preview_avatar__3r_zR",name:"bio-preview_name__3puAx"}},162:function(e,t,n){e.exports={newConversation:"new-conversation-container_newConversation__18nnY",messageList:"new-conversation-container_messageList__29w5c",chatInputWrapper:"new-conversation-container_chatInputWrapper__2RRCd",empty:"new-conversation-container_empty__bf60j"}},163:function(e,t,n){e.exports={"pagination-wrapper":"pagination-footer_pagination-wrapper__N3Ura","pagination-text-wrapper":"pagination-footer_pagination-text-wrapper__jPWhm"}},164:function(e,t,n){e.exports={conversation:"conversation-container_conversation__WyfvT",messageList:"conversation-container_messageList__1zpZd",chatInputWrapper:"conversation-container_chatInputWrapper__39N-Y"}},200:function(e,t,n){e.exports=n.p+"static/media/illustration_error-message-ghost.bba6a358.svg"},202:function(e,t,n){e.exports={notificationOuter:"notification-badge_notificationOuter__3nPlx",notificationInner:"notification-badge_notificationInner__v70QS",count:"notification-badge_count__2jfa7"}},203:function(e,t,n){e.exports={leaders:"room-leaders_leaders__CwqMU",mentorParticipants:"room-leaders_mentorParticipants__12dq2",mentorHeading:"room-leaders_mentorHeading__5w1mW"}},204:function(e,t,n){e.exports={project:"project-list-item_project__1KUjc",check:"project-list-item_check__m859l",circle:"project-list-item_circle__1BURW"}},205:function(e,t,n){e.exports={nanodegreeList:"nanodegree-list-accordion_nanodegreeList__2z2nn",nanodegree:"nanodegree-list-accordion_nanodegree__1gG1H",marginBottom:"nanodegree-list-accordion_marginBottom__X9lTz"}},207:function(e,t,n){e.exports={warningHeader:"delete-message_warningHeader__3mmsJ",modalContent:"delete-message_modalContent__3bSev",actionButtons:"delete-message_actionButtons__Nk5wC"}},208:function(e,t,n){e.exports={mentionSuggestion:"mention-suggestion_mentionSuggestion__gv6TU",channel:"mention-suggestion_channel__1Uia_",avatar:"mention-suggestion_avatar__1yrvN"}},209:function(e,t,n){e.exports={header:"conversation-header_header__1YKz_",titleContent:"conversation-header_titleContent__1KFo2",headerLeft:"conversation-header_headerLeft__eC0n2"}},210:function(e,t,n){e.exports={room:"thread-container_room__1_LUb",messageList:"thread-container_messageList__23Yt5",chatInputWrapper:"thread-container_chatInputWrapper__2ZIIe"}},211:function(e,t,n){e.exports={header:"room-header_header__2FLDr",headerLeft:"room-header_headerLeft__1y8SD"}},212:function(e,t,n){e.exports={navGroup:"layout-sidebar_navGroup__3nKzl",highlightedLinkWrapper:"layout-sidebar_highlightedLinkWrapper__dAuHV",highlightedLink:"layout-sidebar_highlightedLink__2_i9F",knowledgeLink:"layout-sidebar_knowledgeLink__1N_OT layout-sidebar_highlightedLink__2_i9F",studentHubLink:"layout-sidebar_studentHubLink__2cam2 layout-sidebar_highlightedLink__2_i9F",tooltip:"layout-sidebar_tooltip__3wVvC"}},213:function(e,t,n){e.exports={ratings:"mentor-ratings-scene_ratings__1cVNU",ratingsWrapper:"mentor-ratings-scene_ratingsWrapper__2cJ0M",backLink:"mentor-ratings-scene_backLink__2GD3_"}},270:function(e,t,n){e.exports={circle:"online-indicator_circle__Nx6Is",offline:"online-indicator_offline__2mefu",online:"online-indicator_online__1ucDD"}},271:function(e,t,n){e.exports={nav:"lobby-list-conversation_nav__2ef_i",roomList:"lobby-list-conversation_roomList__1QbYc",navHeader:"lobby-list-conversation_navHeader__1yWtt",ndTitle:"lobby-list-conversation_ndTitle__3O2DT",programTitle:"lobby-list-conversation_programTitle__30Koz",rooms:"lobby-list-conversation_rooms__12pYQ",groupingHeader:"lobby-list-conversation_groupingHeader__363DZ",default:"lobby-list-conversation_default__2KbKu",conversationsList:"lobby-list-conversation_conversationsList__CZ-UJ",conversationsListInner:"lobby-list-conversation_conversationsListInner__2a14h",conversationsLink:"lobby-list-conversation_conversationsLink__24uZU",unreadsOverlayBottom:"lobby-list-conversation_unreadsOverlayBottom__3fzHF",unreadsOverlayTop:"lobby-list-conversation_unreadsOverlayTop__1fSKt",notificationContainer:"lobby-list-conversation_notificationContainer__XJy49",conversationWrapper:"lobby-list-conversation_conversationWrapper__2rRW1",conversation:"lobby-list-conversation_conversation__2spNL"}},272:function(e,t,n){e.exports={form:"participant-list-search_form__HSw1c",input:"participant-list-search_input__1cBFy"}},273:function(e,t,n){e.exports={links:"helpful-links_links__2VkgY",questions:"helpful-links_questions__3LcRq"}},275:function(e,t,n){e.exports={nanodegree:"nanodegree-title-info_nanodegree__-Ol6Y",info:"nanodegree-title-info_info__1vysb"}},277:function(e,t,n){e.exports={avatarGrouping:"avatar-group_avatarGrouping__2vCn9",avatarItem:"avatar-group_avatarItem__1c_pn"}},279:function(e,t,n){e.exports={editInput:"edit-user-message_editInput__3GR0j",actionButtons:"edit-user-message_actionButtons__1Ctg-"}},280:function(e,t,n){e.exports={wrapper:"empty-conversation_wrapper__38rUV",image:"empty-conversation_image__2lB6m"}},281:function(e,t,n){e.exports={emptyLobby:"empty-lobby-scene_emptyLobby__13ICT",image:"empty-lobby-scene_image__2kdB3"}},282:function(e,t,n){e.exports={errorNotFound:"page-notfound_errorNotFound__1WVqV",image:"page-notfound_image__EnSTZ"}},283:function(e,t,n){e.exports={conversations:"conversations-scene_conversations__3UBUd",innerContent:"conversations-scene_innerContent__37vPp"}},284:function(e,t,n){e.exports={error:"error-page_error__lVM1i",image:"error-page_image__3BHgJ"}},285:function(e,t,n){e.exports={app:"app-scene_app__2zgev",contextSidebarHidden:"app-scene_contextSidebarHidden__191YR"}},286:function(e,t,n){e.exports={form:"mentor-ratings-form_form__1Ijh_",mentorRatingInputs:"mentor-ratings-form_mentorRatingInputs__2K6TA"}},287:function(e,t,n){e.exports={loading:"mentor-ratings-form-container_loading__2SHtM",complete:"mentor-ratings-form-container_complete__1F1ut"}},377:function(e,t,n){e.exports={wrapper:"lobby-list-unreads-overlay_wrapper__1U9Pn",badge:"lobby-list-unreads-overlay_badge__1pXUG"}},388:function(e,t,n){e.exports={sidebar:"lobby-scene-sidebar_sidebar__GqS_m"}},389:function(e,t,n){e.exports={close:"close-context-sidebar-button_close__dSBbV"}},392:function(e,t,n){e.exports={expandBtn:"truncated-text_expandBtn__1kK9P"}},393:function(e,t,n){e.exports={project:"project-description_project__22a2o"}},394:function(e,t,n){e.exports={projectList:"project-list_projectList__3pbdG"}},40:function(e,t,n){e.exports={nav:"lobby-list_nav__37nGX",roomList:"lobby-list_roomList__1_cFe",navHeader:"lobby-list_navHeader__26HI7",ndTitle:"lobby-list_ndTitle__UU8jV",programTitle:"lobby-list_programTitle__37NS-",rooms:"lobby-list_rooms__3s2Oq",groupingHeader:"lobby-list_groupingHeader__1V8BN",default:"lobby-list_default__2aOLQ",conversationsList:"lobby-list_conversationsList__3DYx5",conversationsListInner:"lobby-list_conversationsListInner__1-5Jx",conversationsLink:"lobby-list_conversationsLink__4yhvs",unreadsOverlayBottom:"lobby-list_unreadsOverlayBottom__e77yr",unreadsOverlayTop:"lobby-list_unreadsOverlayTop__vSdPc",notificationContainer:"lobby-list_notificationContainer__1VLyI"}},400:function(e,t,n){e.exports={links:"links-list_links__1BDj3"}},408:function(e,t,n){e.exports={mentionSuggestion:"emoji-suggestion_mentionSuggestion__3AJHn"}},409:function(e,t,n){e.exports={mentions:"mentions_mentions__2c50H",mentions__suggestions__list:"mentions_mentions__suggestions__list__3IKbl",mentions__suggestions__item:"mentions_mentions__suggestions__item__yjEql","mentions__suggestions__item--focused":"mentions_mentions__suggestions__item--focused__Rzrwz",mentions__suggestions:"mentions_mentions__suggestions__288_r"}},41:function(e,t,n){e.exports={container:"project-status_container__2764z",projectStatus:"project-status_projectStatus__3RQn9",icon:"project-status_icon__Vt-Ra",greenStatus:"project-status_greenStatus__1n-9k",orangeStatus:"project-status_orangeStatus__3U7xT",blueStatus:"project-status_blueStatus__1G1yQ",redStatus:"project-status_redStatus__1maId",cta:"project-status_cta__1hXkK",ctaBtn:"project-status_ctaBtn__MHh5m"}},410:function(e,t,n){e.exports={wrapper:"thread-list-item_wrapper__2dgNu"}},411:function(e,t,n){e.exports={navToggle:"nav-sidebar-toggle_navToggle__PDloL"}},412:function(e,t,n){e.exports={emptyThreads:"empty-threads_emptyThreads__3KQiD"}},414:function(e,t,n){e.exports={button:"open-context-sidebar-button_button__1Bth7"}},415:function(e,t,n){e.exports={responsiveImage:"responsive-image_responsiveImage__222tv"}},416:function(e,t,n){e.exports={download:"download-attachment-button_download__170PS"}},417:function(e,t,n){e.exports={messageDivider:"message-divider_messageDivider__xVx81"}},420:function(e,t,n){e.exports=n.p+"static/media/illustration-dm-empty.5e95bd88.svg"},421:function(e,t,n){e.exports=n.p+"static/media/illustration_messages.e64891c0.png"},422:function(e,t,n){e.exports={inner:"conversations-list_inner__1IWhv"}},423:function(e,t,n){e.exports={loading:"message-list-container_loading__ot99B"}},424:function(e,t,n){e.exports={banner:"celebration-banner_banner__3su82"}},425:function(e,t,n){e.exports={banner:"environment-banner_banner__RABG3"}},429:function(e,t,n){e.exports={inverted:"tooltip_inverted__1bk_I",fadein:"tooltip_fadein__2Ay3l"}},430:function(e,t,n){e.exports={textInput:"checkbox-form-group_textInput__3buUG"}},432:function(e,t,n){e.exports={rating:"stars-form-group_rating__pLUJR"}},44:function(e,t,n){e.exports={container:"participant-details_container__1orAB",backLink:"participant-details_backLink__1brjB",hidden:"participant-details_hidden__32SNa",header:"participant-details_header__DNYR8",user:"participant-details_user__2vPCb",avatar:"participant-details_avatar__-RLDL",info:"participant-details_info__3J6yf",badge:"participant-details_badge__ZK1qs",location:"participant-details_location__S7a9x",body:"participant-details_body__1ZkDA",bioSegment:"participant-details_bioSegment__3Xq_b",bodySegment:"participant-details_bodySegment__v46XI",button:"participant-details_button__32p0t",editIcon:"participant-details_editIcon__2IFQ5"}},447:function(e,t,n){e.exports=n(739)},57:function(e,t,n){e.exports={chatInput:"chat-input_chatInput__3OWMg",mentionsInput:"chat-input_mentionsInput__3Nwdf",inputLabel:"chat-input_inputLabel__2kJo8",desktopFileButtonWrapper:"chat-input_desktopFileButtonWrapper__2OA1m",mobileFileButtonWrapper:"chat-input_mobileFileButtonWrapper__1Yltk",fileInput:"chat-input_fileInput__aXhvv",desktopFileButton:"chat-input_desktopFileButton__3plAH",chatInputWrapperGrid:"chat-input_chatInputWrapperGrid__Q2kQg",disconnected:"chat-input_disconnected__3eiom",mobileSendButton:"chat-input_mobileSendButton__KLQS4",avatarContainer:"chat-input_avatarContainer__1UCG5",controlsContainer:"chat-input_controlsContainer__3L1s6"}},65:function(e,t,n){e.exports={profileForm:"profile-editor_profileForm__2tWgA",label:"profile-editor_label__2JFSg",photoSection:"profile-editor_photoSection__3MLJT",profilePhoto:"profile-editor_profilePhoto__36KVA",profilePhotoLeft:"profile-editor_profilePhotoLeft__33XQe",profilePhotoRight:"profile-editor_profilePhotoRight__24geR",error:"profile-editor_error__2MLW3",locationSection:"profile-editor_locationSection__1BVfB",buttons:"profile-editor_buttons__2qrO9"}},71:function(e,t,n){e.exports={container:"user-message_container__iNMoH",avatar:"user-message_avatar__2bk48",selected:"user-message_selected__nc6Xp",fadeout:"user-message_fadeout__DnIl-",messageActions:"user-message_messageActions__36VfH",header:"user-message_header__3HG5Y",name:"user-message_name__WSQPs",messageWrapper:"user-message_messageWrapper__2Ck3e",failedPending:"user-message_failedPending__HpEih",hasOlderSibling:"user-message_hasOlderSibling__2r4xT"}},725:function(e,t,n){},73:function(e,t,n){e.exports={listContainer:"message-list_listContainer__3LmSk",list:"message-list_list__2nrda",dayDivider:"message-list_dayDivider__1Ho1C",unreadDivider:"message-list_unreadDivider__1_onY",dayBlock:"message-list_dayBlock__1Oh9d",authorBlock:"message-list_authorBlock__3rWsM"}},738:function(e,t,n){},739:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),s=n.n(o),i=n(6),c=n(7),u=n(10),l=n(8),d=n(9),m=n(17),p=n(28),f=n(32),h=n(45),_=n.n(h),v={isMobile:!1,isShortBrowser:!1,isContextSidebarOpen:!1,toggleContextSidebar:_.a},E=r.a.createContext(v),g=E.Provider,b=E.Consumer,O=n(66),I=n.n(O),S=n(148),y=n.n(S),T={isWindowShort:function(){return window.innerHeight<=600},isWindowMobileSize:function(){return window.innerWidth<=900},isWindowTabletSize:function(){return window.innerWidth<=1100}},j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).updateViewState=function(){n.setState(function(e){var t=T.isWindowTabletSize();return{isMobile:t,isShortBrowser:T.isWindowShort(),isContextSidebarOpen:e.isMobile===t?e.isContextSidebarOpen:!t}})},n.toggleContextSidebar=function(e){n.setState(function(t){return{isContextSidebarOpen:y()(e)?e:!t.isContextSidebarOpen}})},n.handleResize=I()(n.updateViewState,50),n.state={isMobile:!1,isShortBrowser:!1,isContextSidebarOpen:!T.isWindowTabletSize(),toggleContextSidebar:n.toggleContextSidebar},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateViewState(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return r.a.createElement(g,{value:this.state},this.props.children)}}]),t}(r.a.Component),A=n(25),R=n(124),C=n.n(R),N=n(12),k=Object(N.a)({},Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ENV:"production",REACT_APP_NAME:"HubWeb",REACT_APP_COMMUNITY_API_URL:"https://community-api.udacity.com/api/v1",REACT_APP_CLASSROOM_API_URL:"https://classroom-content.udacity.com/api/v1",REACT_APP_UCHAT_REAL_TIME_API_URL:"wss://uchat-realtime.udacity.com",REACT_APP_PROFILES_API_URL:"https://profiles-api.udacity.com",REACT_APP_NEW_RELIC_APP_ID:"198146361",REACT_APP_CLASSROOM_URL:"https://classroom.udacity.com",REACT_APP_SEGMENT_WRITE_KEY:"gV62XbeEY1FlWnGNY6QQpOhTfy6YjLGb",REACT_APP_BUGSNAG_KEY:"e06758fd99505d04f4436e365ac3fd5f",REACT_APP_KNOWLEDGE_HOME:"https://knowledge.udacity.com",REACT_APP_UPLOADER_API_URL:"https://uploader.udacity.com/api/v1",REACT_APP_STUDENT_HUB_HOME:"https://hub.udacity.com",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyDYMz1TBeOM_daW7uR9B4vfxQKT_NoQE5U",REACT_APP_HUB_BFF_API_URL:"https://hub-bff.udacity.com",REACT_APP_STATUSPAGE_STUDENTHUB_ID:"rd6mn8f3t5zw",REACT_APP_STATUSPAGE_API_URL:"https://6wfwt6j15d1z.statuspage.io/api/v2",REACT_APP_REVIEWS_HOME:"https://review.udacity.com",REACT_APP_EXPERIMENTS_API_URL:"https://experiments-api.udacity.com/api/v1",REACT_APP_SERVICES_OPTIMIZELY_PROJECT_ID:"14297780053"}));function P(e,t){return{payload:t,type:e}}var L=function(e,t){return["READY","START","PENDING","FULFILLED","REJECTED"].reduce(function(n,a){return n["".concat(e,"_").concat(a)]="".concat(t,"/").concat(e,"_").concat(a),n},{})},w=function(e,t){return{payload:{error:t,message:t.message,state:"rejected"},type:e}},x=Object(N.a)({},L("BOOTSTRAP","SESSION"),L("FETCH_ME","SESSION"),L("UPDATE_ME","SESSION"),L("FETCH_CLASSROOM_METADATA","SESSION"),{FETCH_STATUS_FULFILLED:"".concat("SESSION","/FETCH_STATUS_FULFILLED"),SHOW_WELCOME_FLOW:"".concat("SESSION","/SHOW_WELCOME_FLOW"),HIDE_WELCOME_FLOW:"".concat("SESSION","/HIDE_WELCOME_FLOW")}),M={bootstrap:function(){return P(x.BOOTSTRAP_PENDING)},fetchProfile:function(){return P(x.FETCH_ME_START)},updateProfile:function(e){return P(x.UPDATE_ME_START,{profile:e})},fetchClassroomUserMetadata:function(e){if(e)return P(x.FETCH_CLASSROOM_METADATA_START,{userId:e})},showWelcomeFlow:function(){return P(x.SHOW_WELCOME_FLOW)},hideWelcomeFlow:function(){return P(x.HIDE_WELCOME_FLOW)}},D=n(74),U=n.n(D),F=n(191),G=n.n(F),B=n(263),H=n.n(B),V="_jwt",z="_jwt_token";function W(){U.a.signOut()}function Y(){return U.a.isAuthenticated()?H()(G.a.get(V)||G.a.get(z)):{}}var K={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"2059d2614a",sa:1};k.REACT_APP_NEW_RELIC_APP_ID&&(K.applicationID=k.REACT_APP_NEW_RELIC_APP_ID);var q=K,J={fetchClassroomUserMetadata:M.fetchClassroomUserMetadata},X=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;C()(["development","test"],k.REACT_APP_ENV)<0&&new Promise(function(e,t){return U.a.isAuthenticated()?e():(U.a.authenticate({env:"production",returnUrl:window.location.href,authType:"/sign-in"}),t())}).then(function(){var t=function(){if(U.a.isAuthenticated()){var e=Y();return e.key||e.uid}}();t&&(!function(e){window.newrelic.setCustomAttribute("sid",e)}(t),e.props.fetchClassroomUserMetadata(t))}).catch(function(){return new Error("Auth Token is invalid or expired.")})}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement(r.a.Fragment,null,e)}}]),t}(r.a.PureComponent),$=Object(A.g)(Object(m.b)(null,J)(X)),Q=n(21),Z=n(43),ee=n.n(Z),te=n(4),ne=n.n(te),ae=n(82),re=n.n(ae),oe=n(5),se=n(68),ie=n.n(se),ce=n(19),ue=n.n(ce),le=n(23),de=n.n(le),me=n(192),pe=n.n(me),fe=function(e){return e},he={first:"channel",last:"",id:"@channel",type:void 0,is_active:!1,photo_url:""},_e=["11887758793","fake-blacklisted-uid-for-tests"],ve=(fe("My Classmates"),function(e){return!de()(e)&&pe()(e,"community:thread")}),Ee=function(e){return!de()(e)&&(e.includes("community:conversation")||e.includes("community:personal-mentor"))},ge=function(e){return"/rooms/".concat(e,"?contextType=room")},be=function(e){return"/conversations/".concat(e,"?contextType=room")},Oe=function(e){return e.includes("/conversations/")},Ie=function(e){return e.includes("/not-found")},Se=function(e,t){return e.split("?")[0]+"?contextType=profile&profileId=".concat(t)},ye=function(e,t){var n=e.join("-"),a="/conversations/new/".concat(n);return t&&(a+="?roomId=".concat(t)),a},Te=n(31),je=n.n(Te),Ae=n(18),Re=n.n(Ae),Ce=n(14),Ne=n(202),ke=n.n(Ne),Pe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.mentionsCount,t=e&&e>99?"99+":e;return r.a.createElement("div",{title:fe("Notification"),className:ke.a.notificationOuter},e?r.a.createElement("span",{title:fe("mentions"),className:ke.a.count},r.a.createElement(oe.l,{size:"xs",spacing:"none"},t)):r.a.createElement("span",{title:fe("Unread messages"),className:ke.a.notificationInner}))}}]),t}(r.a.PureComponent),Le=n(84),we=n.n(Le),xe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).isActive=function(e,t){return!!t&&t.pathname.split("/")[2]===n.props.path.split("?")[0].split("/")[2]},n.onArchiveClick=function(e){e.preventDefault();var t=n.props,a=t.onArchiveClick,r=t.roomId;je()(a)&&r&&a(r)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onArchiveClick,n=e.isLocked,a=e.path,o=e.hasUnreadMessages,s=e.mentionsCount,i=e.className,c=e.content,u=e.onNavLinkClick,l=je()(t),d=n?"locked":"unlocked",m=!n&&o;return r.a.createElement(p.c,{to:n?"#":a,className:Re()(we.a.roomListItem,we.a[d],i),activeClassName:we.a.selected,isActive:this.isActive,onClick:u,"data-has-unreads":!(!o&&!s)},r.a.createElement("div",{className:we.a.layout},r.a.createElement("div",{className:we.a.content},c,n&&r.a.createElement(oe.l,{color:"silver",size:"xs",spacing:"none","data-ref":"locked-text"},fe("This channel is locked."))),r.a.createElement("div",{className:we.a.roomStatus},n&&r.a.createElement("div",{className:we.a.icon},r.a.createElement(Ce.A,{"aria-describedby":"locked"})),m&&r.a.createElement(Pe,{mentionsCount:s}),l&&r.a.createElement(oe.n,{direction:"bottom",content:"Hide conversation",trigger:r.a.createElement("button",{className:we.a.archiveButton,onClick:this.onArchiveClick,"data-tst":"archive-btn"},r.a.createElement(Ce.r,{color:"white",size:"sm","aria-describedby":"archive"})),inverse:!0}))))}}]),t}(r.a.Component);xe.defaultProps={content:r.a.createElement("div",null),isLocked:!1,path:void 0,hasUnreadMessages:!1,hasVisited:!0};var Me=function(e){return r.a.createElement(f.LayoutConsumer,null,function(t){var n=t.isMobile,a=t.toggleSidebar;return r.a.createElement(xe,Object(N.a)({},e,{onNavLinkClick:function(){return n&&a()}}))})},De=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"set",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;if(a.hasOwnProperty("localStorage")){var r=this.makeNamespacedKey(e,n);a.localStorage.setItem(r,JSON.stringify(t))}}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(!n.hasOwnProperty("localStorage"))return{};var a=this.makeNamespacedKey(e,t),r=n.localStorage.getItem(a);return r?JSON.parse(r):void 0}},{key:"makeNamespacedKey",value:function(e,t){return t?"".concat(t,"/").concat(e):e}}]),e}()),Ue=n(92),Fe=n.n(Ue),Ge=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:n.props.defaultToOpen||!1},n.onClick=function(){n.setState(function(e){return{isOpen:!e.isOpen}},n.saveAccordionStateToLocalStorage)},n.saveAccordionStateToLocalStorage=function(){var e=n.props.accordionKey;e&&De.set("".concat(e,"IsOpen"),n.state.isOpen)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.accordionKey;if(e){var t=De.get("".concat(e,"IsOpen")),n=!!de()(t)||t;this.setState({isOpen:n})}}},{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.children,o=t.className,s=this.state.isOpen,i=s?Fe.a.open:Fe.a.closed;return r.a.createElement("div",{className:Re()(Fe.a.accordion,o,{open:s,closed:!s})},r.a.createElement("button",{onClick:this.onClick,className:Fe.a.link},r.a.createElement("span",null,n),r.a.createElement("div",{className:Re()(Fe.a.caret,(e={},Object(Q.a)(e,Fe.a.unrotated,!s),Object(Q.a)(e,Fe.a.rotated,s),e))},r.a.createElement(Ce.i,{size:"sm"}))),r.a.createElement("div",{className:i},a))}}]),t}(r.a.PureComponent);Ge.defaultProps={defaultToOpen:!1};var Be=Ge,He=n(377),Ve=n.n(He),ze=function(e){var t=e.position||"bottom";return r.a.createElement("div",{className:Ve.a.wrapper},"bottom"===t&&r.a.createElement(Ce.a,{color:"blue",size:"sm"}),"top"===t&&r.a.createElement(Ce.d,{color:"blue",size:"sm"}),r.a.createElement(oe.e,{size:"h6",color:"blue"},"Unread Messages"))},We=n(59),Ye=n.n(We),Ke=(n(378),n(379)),qe=n.n(Ke),Je=n(264),Xe=n.n(Je),$e=n(269),Qe=n.n($e),Ze=n(380),et={ENTER:13},tt=/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/,nt=36,at={UUID_FORMAT:tt,UID_FORMAT:/(user:\/\/(u?\d.*|@channel|[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}))/,UID_PREFIX:"user://",FORMAT:/(\[@.*\]\(user:\/\/(u?\d.*\)|@channel|[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}))/,PARSE_FORMAT:/\[@[^\]]*\]\(user:\/\/((u?\d+)|@channel|[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})\)/g},rt={IMPOSSIBLE_MATCH:/^(?=a)b/,"@":"@",":":":"},ot=25;function st(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Xe()(t))return e;var r=t.codePointAt(0);if(!r)return e;var o=String.fromCodePoint(r).toUpperCase();return"".concat(e).concat(a?"":" ").concat(o).concat(n?"":".")}var it=function(e,t,n){return 1===e?t:n||t+"s"};function ct(e){var t=Qe()(e,"id"),n=t.length||0,a=n-1,r=function(e){return e.map(function(e){return st(ne()(e,"first_name"),ne()(e,"last_name"),!0)})}(t);switch(n){case 0:return"";case 1:return r[0];case 2:case 3:case 4:return fe("".concat(r.slice(0,a).join(", ")," and ").concat(r[a]));default:return fe("".concat(r.slice(0,3).join(", ")," and others"))}}var ut=function(e){if(!e)return!1;return/(http(s)?:\/\/.)(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/.test(e)},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.endsWith("Nanodegree")?e.replace("Nanodegree","").trim():e.endsWith("Nanodegree Program")?e.replace("Nanodegree Program","").trim():e.includes("Nanodegree by")?e.replace("Nanodegree by","by"):e};function dt(e){return(e.match(at.PARSE_FORMAT)||[]).reduce(function(e,t){var n=t.split("[")[1].split("]")[0];return e.replace(t,n)},e)}function mt(e){for(var t=e,n=[];t.search(tt)>-1;){var a=t.search(tt);n.push(t.slice(a,a+nt)),t=t.slice(0,a)+t.slice(a+nt+1)}return qe()(n.concat(t.split("-")))}var pt=/\s+/,ft=n.n(Ze)()();var ht=["optimize your github profile","improve your linkedin profile"],_t=["nd050"],vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+40;return e.slice(0,t)},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(ue()(e))return"student";var n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;if("bot"===i.type)return i.type;var c=i.payload.rooms;if(c&&c.includes(t))return i.type}}catch(u){a=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return"student"},gt=function(e){return e.filter(function(e){var t=e.title;return!ht.includes(t.toLowerCase())})},bt=function(e){return e.filter(function(e){return!e.key.includes("beta")}).filter(function(e){var t=e.key;return!_t.includes(t)}).map(function(e){var t=ne()(e,"projects.projects",[]);return Object(N.a)({},e,{title:lt(e.title),projects:Object(N.a)({completed_count:0},e.projects,{projects:gt(t)})})})},Ot=function(e,t){return e.filter(function(e){return e.is_graduated===t})},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return ne()(e,"id","")!==t}):e},St=n(16),yt=n(15),Tt=n(51),jt=n.n(Tt),At={},Rt=Object(yt.a)(function(e){return ne()(e,"conversations.byId",At)},function(e){return e}),Ct=Object(yt.a)(function(e){return ne()(e,"messages.byId",At)},function(e){return e}),Nt=Object(yt.a)(function(e){return ne()(e,"participants.byId",At)},function(e){return e}),kt=Object(yt.a)(function(e){return ne()(e,"profiles.byId",At)},function(e){return e}),Pt=Object(yt.a)(function(e){return ne()(e,"rooms.byId",At)},function(e){return e}),Lt=Object(yt.a)(function(e){return ne()(e,"threads.byId",At)},function(e){return e}),wt=function(e){return"pending"===e.status},xt=function(e){return"fulfilled"===e.status},Mt=function(e){return!jt()(e.error)&&!de()(e.error)},Dt=function(e){return Object(yt.a)(function(t,n){if(n){var a=ne()(t,[e,n]);if(de()(a))throw Error('Key "'.concat(n,'" not found on ').concat(e,"."));return a}return ne()(t,e)},function(e){return e})},Ut=function(e){return e.session},Ft=Object(yt.a)(Ut,function(e){return ne()(e,"me")}),Gt=Object(yt.a)(Ut,function(e){return ne()(e,"status")}),Bt=Dt("sessionAsync"),Ht=Object(yt.a)(Ut,function(e){return ne()(e,"classroomMetadata")}),Vt=Object(yt.a)(Ht,function(e){return ne()(e,"can_see_career_portal",!1)}),zt=Object(yt.a)(Ut,function(e){return ne()(e,"showWelcomeFlow")}),Wt=Object(yt.a)(Ht,function(e){return ne()(e,"has_enterprise_enrollments",!1)}),Yt=Object(yt.a)(function(e){return ne()(e,"projects.pendingRating")},function(e){return e}),Kt=Object(yt.a)(function(e,t){return ne()(e,"projects.byRoomId[".concat(t,"]"))},function(e){return e}),qt=Dt("projectsAsync"),Jt=Object(yt.a)(function(e,t,n){var a=n||t;return ne()(e,"projects.passedByRoomId[".concat(a,"]"))},function(e){return new Set(e)}),Xt=n(24),$t=new Xt.c.Entity("profiles"),Qt=function(e){return Object(Xt.b)(e,[$t])},Zt=new Xt.c.Entity("participants",{profile:$t},{processStrategy:function(e){var t=ne()(e,"type","student");return Object(N.a)({},e,{type:t,profile:{id:e.id}})}}),en=new Xt.c.Object({active:[Zt],admins:[Zt],inactive:[Zt]}),tn=function(e){return Object(Xt.b)(e,en)},nn=(n(381),n(382)),an=n.n(nn),rn=function(e,t,n){var a,r=function(e){var t=e;e&&"first_name"in e&&(t=Object(N.a)({},e,{first:e.first_name,last:e.last_name}));return t}(e),o=ne()(r,"id",ne()(t,"id","")),s=ne()(r,"passedProject",!1),i=ne()(r,"first",ne()(t,"first_name","")),c=ne()(r,"last",ne()(t,"last_name","")),u=i?st(i,c,!1):"",l=r&&r.photo_url?r.photo_url:void 0,d=ne()(t,"show_location",!1),m=ne()(t,"location.description",""),p="student",f={firstName:i,lastName:c,userId:o,role:p,photoUrl:l};return t&&(n&&(p=Et(t.roles,n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!ue()(e)){var n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value,c=ne()(i,"payload.rooms")||[];if(c&&c.includes(t)&&i.payload.bio)return i.payload.bio}}catch(u){a=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}}}(t.roles,n)),f=Object(N.a)({},f,{photoUrl:t.photo_url,role:p})),{avatarProps:f,bio:a,id:o,locationDescription:m,name:u,profile:t,role:p,showLocation:d,passedProject:s}},on=function(e){return"bot"!==e.type},sn=function(e){return an()(e,[function(e){return"mentor"===e.type?1:-1},function(e){return e.is_online?1:-1},function(e){var t=e.first;return(void 0===t?"":t).toLowerCase()},function(e){var t=e.last;return(void 0===t?"":t).toLowerCase()}],["desc","desc","asc","asc"])};function cn(e){return e.map(function(e){return e.id})}var un=Object(yt.a)(function(e){return ne()(e,"participantsAsync")},function(e){return ne()(e,"searchParticipants")}),ln=function(e,t){return ne()(e,["participants","byId",t])},dn=Object(yt.a)(function(e,t){return ne()(e,["participants","searchByRoomId",t],{})},function(e){return ne()(e,["participants"],[])}),mn=function(e,t){return!!ne()(e,["participants","onlineById",t])},pn={},fn=Object(yt.a)(function(e){return ne()(e,["participants","onlineById"])},function(e){return e||pn}),hn=function(e,t){if(t)return ne()(e,["participants","byRoomId",t])},_n=Object(yt.a)(Nt,kt,function(e,t){return{participants:e,profiles:t}}),vn=function(){return Object(yt.a)(ln,_n,function(e,t){return function(e,t){return Object(Xt.a)(e,Zt,t)}(e,t)})},En=(vn(),Object(yt.a)(Ft,function(e,t){return t},function(e,t){return function(e,t){var n=Et(e.roles,t);return"bot"===n||"staff"===n||"mentor"===n}(e,t)})),gn=Object(yt.a)(Ft,function(e,t){return t},function(e,t){return function(e,t){return"staff"===Et(e.roles,t)}(e,t)}),bn=Object(yt.a)(Ft,function(e){return function(e){return _e.includes(e.id)}(e)});function On(e,t){return ne()(e,["participants","mentionableByRoomId",t],{})}Object(yt.a)(On,En,bn,function(e,t,n){var a=t&&!n?[he]:[];return ue()(e)||jt()(e)?a:[].concat(a,Object(St.a)(e.participants))});var In=Object(yt.a)(On,Ft,function(e,t){return ne()(e,"participants",[]).filter(function(e){var n=e.id;return!t||n!==t.id}).map(function(e){return{is_active:e.is_active||!1,photo_url:e.photo_url||"",type:e.type,display:e.first+e.last,id:e.id}})}),Sn=Object(yt.a)(On,gn,bn,Ft,function(e,t,n,a){return[].concat(t&&!n?[he]:[],Object(St.a)(ne()(e,"participants",[]))).filter(function(e){var t=e.id;return!a||t!==a.id}).map(function(e){return{is_active:e.is_active||!1,photo_url:e.photo_url||"",type:e.type,display:e.first+e.last,id:e.id}})}),yn=Object(yt.a)(hn,_n,function(e,t){if(e)return function(e){var t=e.active,n=void 0===t?[]:t,a=e.admins,r=void 0===a?[]:a,o=e.inactive,s=void 0===o?[]:o;return[].concat(Object(St.a)(r.filter(on)),Object(St.a)(n.map(function(e){return Object(N.a)({},e,{is_active:!0})})),Object(St.a)(s.map(function(e){return Object(N.a)({},e,{is_active:!1})})))}(function(e,t){return Object(Xt.a)(e,en,t)}(e,t)||{})}),Tn=Object(yt.a)(yn,Jt,fn,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=e;return a=function(e,t){return e.map(function(e){var n=!!t[e.id];return Object(N.a)({},e,{is_online:n})})}(a=function(e,t){return e.map(function(e){var n=t.has(e.id);return Object(N.a)({},e,{passedProject:n})})}(a,t),n),sn(a)}),jn=Object(yt.a)(function(e,t){return Tn(e,t)},function(e,t,n){return n},function(e,t){if(!e)return[];var n=t||["mentor"],a=e.filter(function(e){return e.type&&n.includes(e.type)});return sn(a)}),An=Object(yt.a)(function(e,t){return Tn(e,t)},function(e,t,n){return jn(e,t,n)},function(e,t){if(!e)return[];var n=new Set(t.map(function(e){return e.id})),a=e.filter(function(e){return e.id&&!n.has(e.id)});return sn(a)}),Rn=n(270),Cn=n.n(Rn),Nn=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.isOnline?"online":"offline";return r.a.createElement("span",{className:Re()(Cn.a.circle,Cn.a[e])},fe("User is ".concat(e)))}}]),t}(r.a.PureComponent);Nn.defaultProps={isOnline:!1};var kn=Nn,Pn=n(383),Ln=n.n(Pn),wn=n(149),xn=n.n(wn);var Mn=xn()(function(e,t){return e?"data:image/png;base64,".concat(new Ln.a("".concat(function(e){if(e.toString().length>=15)return e;for(var t=e.toString();t.length<15;)t+=e;return t.slice(0,16)}(e)),t).toString()):""},function(e,t){return"".concat(e," ").concat(t)}),Dn=n(103),Un=n.n(Dn),Fn=n(384),Gn=n.n(Fn),Bn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleProfileClick=function(e){var t=n.props,a=t.onProfileClick,r=t.userId;a&&(e.preventDefault(),a(r))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.firstName,a=t.lastName,o=t.onProfileClick,s=t.photoUrl,i=t.userId,c=t.role,u=t.size,l=t.sizeSelection,d=t.hasPreviewError,m=t.isOnline,p=t.isVisible,f=st(n,a,!1),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"avatar-size--".concat(e)}(l),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"student";return"avatar-role--".concat(e)}(c),v=Re()(Un.a.avatar,Un.a[h],Un.a[_],(e={},Object(Q.a)(e,Un.a.clickable,je()(o)),Object(Q.a)(e,Un.a.previewError,!!d),e)),E=f||"anonymous",g="url(".concat(Mn(i,u),")"),b=g;s&&(b="url(".concat(s,"), ").concat(g));var O={backgroundImage:p?b:g};return r.a.createElement("div",{className:v,style:O,onClick:this.handleProfileClick,role:"img","aria-label":"".concat(E," profile image")},y()(m)&&r.a.createElement("span",{className:Un.a.onlineIndicator},r.a.createElement(kn,{isOnline:m})))}}]),t}(r.a.PureComponent);function Hn(e){return r.a.createElement(Gn.a,null,function(t){var n=t.isVisible;return r.a.createElement(Bn,Object.assign({isVisible:n},e))})}Bn.defaultProps={size:32};var Vn=Hn,zn=n(56),Wn=n.n(zn),Yn=n(129),Kn=n.n(Yn),qn=function(e){return Wn()(e.profiles.byId)},Jn=function(e,t){return ne()(e,["profiles","byId",t])},Xn=function(e){return ne()(e,["profiles","byId"])},$n=[],Qn=function(){return Object(yt.a)(Jn,function(e){return e})},Zn=function(e,t){var n=ne()(e,["profiles","byId"]);return t.map(function(e){return n[e]}).filter(function(e){return!!e})},ea=Dt("profilesAsync"),ta=function(e,t){var n=na(e,t);return ne()(n,"knowledge.activity",{})},na=function(e,t){return ne()(e,["profiles","additionalInfoById",t],{})},aa=Object(yt.a)(na,function(e){var t=e.nanodegrees;if(!t)return 0;return Kn()(bt,function(e){return e.reduce(function(e,t){return e+(ne()(t,"projects.completed_count")||0)},0)})(t)}),ra=Object(yt.a)(na,function(e){var t=e.nanodegrees;if(t)return Kn()(bt,function(e){return Ot(e,!1)})(t)}),oa=Object(yt.a)(na,function(e){var t=e.nanodegrees;if(t)return Kn()(bt,function(e){return Ot(e,!0)})(t)}),sa=Object(m.b)(function(){var e=vn(),t=Qn(),n=Object(yt.a)(mn,function(e){return e});return function(a,r){return{participant:e(a,r.userId),profile:t(a,r.userId),isOnline:n(a,r.userId)}}})(function(e){var t=rn(e.participant,e.profile,e.roomId).avatarProps;return r.a.createElement(Vn,Object.assign({},t,{isOnline:e.isOnline||!1}))}),ia=n(104),ca=n.n(ia),ua=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){switch(this.props.type){case"mentor":return r.a.createElement("span",{className:ca.a.mentor},r.a.createElement(Ce.w,{size:"sm",color:"cerulean"}),r.a.createElement("span",{className:ca.a.text},r.a.createElement(oe.l,{size:"xs",spacing:"none"},fe("Mentor"))));case"staff":return r.a.createElement("span",{className:ca.a.staff},r.a.createElement(Ce.f,{size:"sm",color:"purple"}),r.a.createElement("span",{className:ca.a.text},r.a.createElement(oe.l,{size:"xs",spacing:"none"},fe("Staff"))));case"mentee":return r.a.createElement("span",{className:ca.a.mentee},r.a.createElement(Ce.C,{size:"sm",color:"green"}),r.a.createElement("span",{className:ca.a.text},r.a.createElement(oe.l,{size:"xs",spacing:"none"},fe("Mentee"))));default:return null}}}]),t}(r.a.PureComponent);ua.defaultProps={type:"student"};var la=ua,da=n(271),ma=n.n(da),pa=function(e){var t=e.conversation,n=t.id,a=t.profiles,o=t.meta,s=e.me,i=e.unreads,c=s.id,u=It(a,c),l=ct(u),d=ne()(i,"unread_count")||0,m=u.length>0,p=ne()(o,"scope_payload.mentor")===s.id,f=ne()(o,"scope_payload.student")===s.id?void 0:e.onArchiveConversation;return r.a.createElement("li",{key:n},r.a.createElement(Me,{content:r.a.createElement("span",{className:ma.a.conversation},m&&r.a.createElement(oe.k,{type:"inline",size:"1x"},r.a.createElement(sa,{userId:u[0].id,roomId:n})),r.a.createElement(oe.l,{size:"sm",spacing:"none"},l),p&&r.a.createElement(la,{type:"mentee"})),path:be(n),roomId:n,onArchiveClick:f,className:ma.a.conversationWrapper,hasUnreadMessages:!!d,mentionsCount:d}))},fa=function(e){var t=e.room,n=t.room_title,a=t.status,o=t.room_id,s=!!ne()(e,"unreads.unread_count"),i=ne()(e,"unreads.mentions_count")||0,c=lt(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return["Project: ","Project - "].reduce(function(e,t){return e.replace(t,"")},e)}(n));return r.a.createElement("li",{key:o},r.a.createElement(Me,{content:r.a.createElement(oe.l,{size:"sm",spacing:"none"},c),isLocked:"locked"===a,path:ge(o),hasUnreadMessages:s,mentionsCount:i}))},ha=n(101),_a=n.n(ha),va=n(40),Ea=n.n(va),ga=function(e){var t=e.group,n=e.groups,a=ne()(t,"meta.start_date"),o=ne()(t,"title",""),s=_a()(n,{title:o}).length>1;return r.a.createElement("div",{className:Ea.a.programTitle},r.a.createElement(oe.e,{size:"h6",as:"h4",spacing:"none"},lt(o)),s&&!!a&&r.a.createElement(oe.l,{size:"sm",color:"silver"},"\xa0(",Ye()(a,"MMM D, YYYY"),")"))},ba=n(22),Oa=n(54),Ia=n.n(Oa);function Sa(e,t){return function e(n,a){if(ue()(n)||!n.offsetParent)return a;var r=n.offsetTop||0,o=n.offsetParent;return o===t?a+r:e(o,a+r)}(e,0)}function ya(e){if("text"!==e.type&&"textarea"!==e.type)return[0,0];var t=jt()(e.selectionStart)?e.value.length:e.selectionStart;return[t,jt()(e.selectionEnd)?t:e.selectionEnd]}var Ta,ja=function(e){var t=Object(a.useState)(!1),n=Object(ba.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(!1),i=Object(ba.a)(s,2),c=i[0],u=i[1];return{hasTopUnreads:r,hasBottomUnreads:c,handleLobbyListScroll:I()(function(){var t=function(){var t=e.current?e.current.querySelectorAll('[data-has-unreads="true"]'):[];return{firstUnread:t[0],lastUnread:Ia()(t)}}(),n=t.firstUnread,a=t.lastUnread;jt()(e.current)||(o(function(e,t){if(!e||!t)return!1;var n=Sa(e,t),a=e.offsetHeight;return t.scrollTop>n+a}(n,e.current)),u(function(e,t){if(!e||!t)return!1;var n=Sa(e,t),a=t.scrollTop,r=t.offsetHeight;return n+e.offsetHeight>=a+r}(a,e.current)))},150)}},Aa=n(1),Ra=n.n(Aa),Ca=n(27),Na=n(385);!function(e){e.EnterLobby="Enter Workspace",e.LeaveLobby="Leave Workspace",e.EnterRoom="Enter Room",e.LeaveRoom="Leave Room",e.ViewProfile="View Profile",e.SendMessage="Send Message",e.CreateThread="Create Thread",e.DeleteMessage="Delete Message",e.DisplayCelebrationBanner="Display Celebration Banner",e.ViewMentorRatingsForm="View Mentor Ratings Form",e.SubmitMentorRatingsForm="Submit Mentor Ratings Form",e.EditMessage="Edit Message",e.ResendPendingMessage="Resend Pending Message",e.CancelPendingMessage="Cancel Pending Message",e.SendNotification="Send Notification",e.GrantNotificationPermission="Grant Notification Permission"}(Ta||(Ta={}));var ka=Object(Na.createAgent)(),Pa=k.REACT_APP_SEGMENT_WRITE_KEY;Pa&&ka.init(Pa,!0).catch(console.warn);var La=ka,wa=new(function(){function e(){var t=this;Object(i.a)(this,e),this.options={icon:"/udacity-logo.png"},this.audio=new Audio("/notification.wav"),this.push=function(e,n,a){t.create(e,Object(N.a)({},t.options,a||{},n?{body:n}:{}))},this.pushIfHidden=function(e,n,a){if(document.hidden)return t.push(e,n,a)},this.requestPermission=function(){var e=Object(Ca.a)(Ra.a.mark(function e(n){var a;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:return"granted"===(a=e.sent)&&(La.track(Ta.GrantNotificationPermission),t.notify(n)),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}return Object(c.a)(e,[{key:"notify",value:function(e,t){var n;try{n=new Notification(e,t)}catch(a){if("TypeError"===a.name)return console.warn("This browser requires a service worker to display notifications");throw a}return n.onclick=function(e){e.preventDefault();var t=window.open(k.REACT_APP_STUDENT_HUB_HOME||"","hub");t&&t.focus(),n.close()},this.audio.play(),La.track(Ta.SendNotification),n}},{key:"create",value:function(e,t){if(!("Notification"in window))return console.warn("This browser does not support desktop notification");var n=window.Notification;if("granted"===n.permission)return this.notify(e,t);"denied"!==n.permission&&this.requestPermission(e)}}]),e}()),xa=function(){return r.a.createElement(oe.f,{size:"md",title:"speaker-off"},r.a.createElement("svg",{width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"icon/speaker-off",stroke:"none",strokeWidth:"1",fill:"#B4B9BD",fillRule:"evenodd"},r.a.createElement("path",{d:"M14.86,10.617 L14.982307,10.624549 C15.305243,10.664541 15.597907,10.861269 15.751243,11.163021 L15.802,11.281 L15.8349523,11.3928943 C15.9394406,11.8425445 15.7196665,12.3093025 15.3047263,12.5135649 L15.197,12.559 L12,13.705 L12,17.246 L17.387,18.791 L17.4970864,18.8293557 C17.9231432,19.0061545 18.1735558,19.4560496 18.0978167,19.9120321 L18.072,20.026 L18.0334304,20.1364563 C17.8625316,20.5475254 17.4389523,20.7936698 17.0009562,20.7448256 L17,22.184 L16.9947205,22.3309232 C16.9177587,23.393674 16.0097622,24.1251454 14.954717,23.9846185 L14.81,23.96 L11.785,23.332 L11.6278414,23.2929545 C10.7520969,23.038864 10.0828493,22.2247423 10.0071446,21.3163205 L10,21.145 L9.99999995,19 L6.99999995,19 C6.48637864,19 6.06334975,18.6128207 6.00649477,18.1146431 L5.99999995,17.9978343 L6.01082867,12.9988343 C6.01193761,12.4867848 6.39775434,12.0653068 6.89437844,12.0077082 L7.01082632,12.001 L10.8239999,12.001 L14.524,10.676 C14.635,10.636 14.749,10.617 14.86,10.617 Z M17.002,7 L17.1213944,7.00745455 C17.4755725,7.05104132 17.7887333,7.28273554 17.9266882,7.62421488 L17.966,7.742 L21.966,22.742 L21.9894916,22.8566746 C22.0560645,23.3148918 21.7981651,23.7600419 21.3688196,23.9295244 L21.258,23.966 L21.1435102,23.9896764 C20.6859184,24.0568746 20.2400816,23.7982886 20.0704898,23.3688338 L20.034,23.258 L16.034,8.258 L16.0105084,8.14351057 C15.9383878,7.64779082 16.2470714,7.16592857 16.742,7.035 C16.829,7.012 16.916,7 17.002,7 Z M25.001,7 L25.1136738,7.0064621 C25.5964694,7.06201531 26,7.46985714 26,8.001 L26,8.001 L26,22 L25.9935166,22.115335 C25.9250484,22.719173 25.3253529,23.1341765 24.723,22.961 L24.723,22.961 L23.41,22.584 L23.2997289,22.5454308 C22.8374898,22.3529796 22.5829286,21.8401429 22.725,21.348 L22.725,21.348 L22.7635838,21.2375437 C22.9561582,20.7746224 23.4698571,20.5208571 23.962,20.662 L23.962,20.662 L24,20.673 L24,9.419 L20.863,10.541 L20.7509351,10.5739523 C20.2632551,10.687148 19.7577143,10.4197857 19.585,9.936 L19.585,9.936 L19.5518768,9.82373615 C19.4381173,9.3352602 19.7070714,8.82978571 20.189,8.658 L20.189,8.658 L24.663,7.059 C24.776,7.019 24.89,7 25.001,7 L25.001,7 Z M11.9999999,19.328 L12,21.145 L12.011984,21.19752 C12.0363808,21.257552 12.094201,21.325776 12.1495308,21.3576275 L12.19,21.374 L15,21.958 L14.9999999,20.187 L11.9999999,19.328 Z M9.99999995,14.001 L8.00866297,14.001 L8.00216804,17 L9.99999995,17 L9.99999995,14.001 Z",id:"Combined-Shape",fill:"#B4B9BD"}))))};var Ma=function(e){return r.a.createElement(oe.a,{label:"Enable browser notifications",variant:"minimal",onClick:e.requestNotificationPermission,icon:r.a.createElement(xa,null),iconOnly:!0})};var Da=function(e){var t=function(t){e.onSetNotificationsEnabled(t),"denied"===e.permission&&"denied"===t&&e.onDenied()},n=function(){var e=Object(Ca.a)(Ra.a.mark(function e(){var n;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa.requestPermission("Welcome to Student Hub notifications!");case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(oe.n,{content:"Enable browser notifications",trigger:r.a.createElement(Ma,{requestNotificationPermission:n}),direction:"bottom",inverse:!0})};var Ua=function(e){var t=e.onMute,n=e.onUnmute;return e.shouldNotify?r.a.createElement(oe.a,{label:"Mute",variant:"minimal",onClick:t,icon:r.a.createElement(Ce.L,null),iconOnly:!0}):r.a.createElement(oe.a,{lable:"Unmute",variant:"minimal",onClick:n,icon:r.a.createElement(xa,null),iconOnly:!0})};var Fa=function(e){var t=e.id,n=De.get("shouldNotify",t),o=!!de()(n)||n,s=Object(a.useState)(o),i=Object(ba.a)(s,2),c=i[0],u=i[1],l=c?"Mute browser notifications":"Unmute browser notifications";return r.a.createElement(oe.n,{content:l,trigger:r.a.createElement(Ua,{onMute:function(){u(!1),De.set("shouldNotify",!1,t)},onUnmute:function(){u(!0),De.set("shouldNotify",!0,t)},shouldNotify:c}),direction:"bottom",inverse:!0})},Ga={getNotificationPermission:function(){return Notification.permission}},Ba={CLEAR_FIRST_ALERT:"ALERT/CLEAR_FIRST_ALERT",ADD_ALERT:"ALERT/ADD_ALERT"},Ha={clearFirstAlert:function(){return P(Ba.CLEAR_FIRST_ALERT,{})},addAlert:function(e,t){return P(Ba.ADD_ALERT,{type:e,message:t})}},Va={addAlert:Ha.addAlert};var za=Object(m.b)(void 0,Va)(function(e){var t=Object(a.useState)(Ga.getNotificationPermission()),n=Object(ba.a)(t,2),o=n[0],s=n[1];switch(o){case"denied":case"default":return r.a.createElement(Da,{permission:o,onSetNotificationsEnabled:function(e){return s(e)},onDenied:function(){return e.addAlert("error","It looks like you\u2019ve blocked Hub browser notifications. Please re-enable them in your browser's preferences.")}});case"granted":return r.a.createElement(Fa,{id:e.me.id})}return null}),Wa=function(e){var t=e.lobby,n=e.hasEnterprise,o=Object(a.useRef)(null),s=ja(o),i=s.hasTopUnreads,c=s.hasBottomUnreads,u=s.handleLobbyListScroll;Object(a.useEffect)(function(){u()},[e.unreadsRooms,e.unreadsSummary,u]);var l=t.conversations.rooms||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:Ea.a.nav},r.a.createElement("div",{className:Ea.a.navHeader},r.a.createElement("span",null,r.a.createElement(oe.e,{color:"white",size:"h4",as:"h1",spacing:"half"},"Chat")),"Notification"in window&&r.a.createElement("span",{className:Ea.a.notificationContainer},r.a.createElement(za,{me:e.me}))),r.a.createElement("ul",{className:Ea.a.roomList,onScroll:u,ref:o},e.hasThreads&&r.a.createElement("li",{key:"threads","data-tst":"allThreads"},r.a.createElement(Me,{className:Ea.a.threads,content:r.a.createElement(oe.l,{size:"sm"},"All Threads"),path:"/threads",hasUnreadMessages:e.unreadsSummary.has_unread_threads})),!!t.personal_mentor_conversations.length&&r.a.createElement(Be,{className:Ea.a.groupingHeader,defaultToOpen:!0,accordionKey:"mentorDirectMessage","data-test":"communities",title:r.a.createElement(oe.e,{size:"h6",as:"h3",spacing:"none",color:"white"},"Mentor",t.personal_mentor_conversations.length>1?"s":"")},r.a.createElement("div",{className:Ea.a.rooms},t.personal_mentor_conversations.map(function(t){return r.a.createElement(pa,{key:t.id,conversation:t,me:e.me,unreads:e.unreadsRooms[t.id],onArchiveConversation:e.onArchiveConversation})}))),!!t.community_groups.length&&r.a.createElement(Be,{className:Ea.a.groupingHeader,defaultToOpen:!0,accordionKey:"communities","data-test":"communities",title:r.a.createElement(oe.e,{size:"h6",as:"h3",spacing:"none",color:"white"},"Communities")},r.a.createElement("div",{className:Ea.a.rooms},t.community_groups[0].rooms.map(function(t){return r.a.createElement(fa,{key:t.room_id,room:t,unreads:e.unreadsRooms[t.room_id]})}))),t.mentored_groups.length>0&&r.a.createElement(Be,{className:Ea.a.groupingHeader,defaultToOpen:!0,accordionKey:"projects","data-test":"guidedStudy",title:r.a.createElement(oe.e,{size:"h6",as:"h3",spacing:"none","data-ref":"guidedStudyHeading",color:"white"},n?"Projects":"Peer Project Help")},t.mentored_groups.map(function(n,a){var o=ne()(n,"title");return r.a.createElement(r.a.Fragment,{key:"".concat(o,"-").concat(a)},r.a.createElement("div",{className:Ea.a.rooms},r.a.createElement("div",{className:Ea.a.ndTitle},r.a.createElement(ga,{group:n,groups:t.mentored_groups})),n.rooms.map(function(t){return r.a.createElement(fa,{key:t.room_id,room:t,unreads:e.unreadsRooms[t.room_id]})})))})),e.totalConversations>0&&r.a.createElement(Be,{className:Ea.a.groupingHeader,defaultToOpen:!0,accordionKey:"directMessages",title:r.a.createElement(oe.e,{size:"h6",as:"h3",spacing:"none","data-ref":"directMessagesHeading",color:"white"},"Direct Messages")},r.a.createElement("div",{className:Ea.a.conversationsList},!!l.length&&r.a.createElement("div",{className:Ea.a.conversationsListInner},l.map(function(t){return r.a.createElement(pa,{key:t.id,conversation:t,me:e.me,unreads:e.unreadsRooms[t.id],onArchiveConversation:e.onArchiveConversation})})),r.a.createElement("div",{className:Ea.a.conversationsLink},r.a.createElement(p.b,{to:"/conversations"},r.a.createElement(oe.e,{size:"h6",spacing:"none"},"View ",e.totalConversations>1?"all ":"",e.totalConversations," conversation",1===e.totalConversations?"":"s"),e.hasArchivedConversationUnreads&&r.a.createElement(Pe,null))))))),i&&r.a.createElement("div",{className:Ea.a.unreadsOverlayTop,"data-tst":"unreads-top"},r.a.createElement(ze,{position:"top"})),c&&r.a.createElement("div",{className:Ea.a.unreadsOverlayBottom,"data-tst":"unreads-bottom"},r.a.createElement(ze,{position:"bottom"})))},Ya=new Xt.c.Entity("rooms",{},{idAttribute:"room_id"}),Ka=function(e){return Object(Xt.b)(e,Ya)},qa=n(386),Ja=n(387),Xa=n.n(Ja),$a=new Xt.c.Entity("messages",{_participant:Zt,_profile:$t},{idAttribute:"message_id",processStrategy:function(e){return Object(N.a)({},e,{_participant:{id:e.user_id},_profile:{id:e.user_id}})}}),Qa=new Xt.c.Entity("messages",{},{idAttribute:"message_id"}),Za=new Xt.c.Object({messages:[$a]}),er=new Xt.c.Object({_participant:Zt,_profile:$t}),tr=function(e){return Object(Xt.b)(e,Za)},nr=function(e){return Object(Xt.b)(e,$a)},ar=function(e,t){return Object(Xt.a)(e,$a,t)},rr=function(e,t){var n=t.has_next,a=t.next,r=t.total;return Object(N.a)({},e,{has_next:n,next:a,total:e.total+r})},or=function(e){if(e.length){if(1===e.length)return e[0];var t=Object(qa.a)(e),n=t[0];return t.slice(1).reduce(function(e,t){return Object(N.a)({},e,{entities:Object.keys(t.entities).reduce(function(e,n){return e[n]=Xa()(e[n],t.entities[n]),e},e.entities),result:{cursor:rr(ne()(n,"result.cursor",{}),ne()(t,"result.cursor",{})),messages:[].concat(Object(St.a)(e.result.messages),Object(St.a)(t.result.messages)),room_id:n.result.room_id}})},n)}},sr=new Xt.c.Entity("conversations",{profiles:[$t],summary:{last_message:Qa}}),ir=new Xt.c.Object({rooms:[sr]}),cr=function(e){return Object(Xt.b)(e,sr)},ur=function(e){return Object(Xt.b)(e,ir)},lr=new Xt.c.Object({rooms:[Ya]}),dr=new Xt.c.Object({rooms:[sr]}),mr=new Xt.c.Object({community_groups:[lr],mentored_groups:[lr],conversations:dr,personal_mentor_conversations:[sr]}),pr=function(e){return Object(Xt.b)(e,mr)},fr=function(e){return e.lobby.currentLobby},hr=function(e){return ne()(e,"lobby.currentLobby.total_conversations")||0},_r=function(e){return ne()(e,"lobby.currentLobby.total_threads")||0},vr=Object(yt.a)(fr,function(e){return ne()(e,"knowledge_profile.has_access",!1)}),Er=Object(yt.a)(Pt,Rt,kt,Ct,function(e,t,n,a){return{rooms:e,conversations:t,profiles:n,messages:a}}),gr=Object(yt.a)(fr,Er,function(e,t){if(e)return function(e,t){return Object(Xt.a)(e,mr,t)}(e,t)}),br=Object(yt.a)(gr,function(e,t){return t},function(e,t){if(de()(e))return[];var n=[];return t&&t.includeConversations&&(n=(e.conversations.rooms||[]).reduce(function(e,t){return[].concat(Object(St.a)(e),[t.id])},n)),n=(e.personal_mentor_conversations||[]).reduce(function(e,t){return[].concat(Object(St.a)(e),[t.id])},n),[].concat(Object(St.a)(e.community_groups),Object(St.a)(e.mentored_groups)).reduce(function(e,t){var n=(ne()(t,"rooms")||[]).filter(function(e){return"joined"===e.status}).map(function(e){return e.room_id});return[].concat(Object(St.a)(e),Object(St.a)(n))},n)}),Or=Object(yt.a)(fr,function(e,t){return t},function(e,t){if(!de()(e))return[].concat(Object(St.a)(e.community_groups),Object(St.a)(e.mentored_groups)).reduce(function(e,n){var a=n.rooms,r=n.title;return e||(a&&a.includes(t)&&r||void 0)},void 0)}),Ir=Object(yt.a)(fr,function(e,t){return t},function(e,t){return(ne()(e,"conversations.rooms")||[]).includes(t)}),Sr=(Object(yt.a)(fr,function(e,t){return t},function(e,t){return ne()(e,"conversations.rooms",[]).find(function(e){return e.id===t})||void 0}),Object(yt.a)(fr,function(e){return ne()(e,"conversations.rooms",[])})),yr=Object(yt.a)(fr,function(e){var t=[].concat(Object(St.a)(ne()(e,"community_groups",[])),Object(St.a)(ne()(e,"mentored_groups",[]))).reduce(function(e,t){return[].concat(Object(St.a)(e),Object(St.a)(t.rooms))},[]),n=[].concat(Object(St.a)(ne()(e,"personal_mentor_conversations",[])),Object(St.a)(t),Object(St.a)(ne()(e,"conversations.rooms",[])));return ne()(n,"[0]")}),Tr=(Dt("lobbyAsync"),function(e){return e.unreads}),jr=Object(yt.a)(Tr,function(e){return e.summary}),Ar=Object(yt.a)(Tr,function(e){return e.rooms}),Rr=Object(yt.a)(function(e,t){return ne()(e,"unreads.rooms[".concat(t,"]"))},function(e){return e}),Cr=Object(yt.a)(jr,function(e){return!ue()(e)&&!!(e.has_unread_threads||e.unread_mentions_count||e.unread_messages_count||e.unread_conversations_count)}),Nr=Object(yt.a)(jr,function(e){return ue()(e)?0:e.unread_conversations_count||0}),kr=Object(yt.a)(jr,Ar,Sr,function(e,t,n){return(e.unread_conversations_count||0)>n.reduce(function(e,n){var a=t[n];return a&&a.unread_count&&(e+=a.unread_count),e},0)}),Pr=Object(N.a)({},L("GET_CONVERSATION","CONVERSATIONS"),L("GET_CONVERSATIONS","CONVERSATIONS"),L("CREATE_STAGED_CONVERSATION","CONVERSATIONS"),L("CREATE_CONVERSATION_ROOM","CONVERSATIONS"),L("ARCHIVE_CONVERSATION","CONVERSATIONS"),L("UNARCHIVE_CONVERSATION","CONVERSATIONS"),L("CREATE_CONVERSATION_AND_SUBMIT","CONVERSATIONS"),{SET_CURRENT_CONVERSATION:"".concat("CONVERSATIONS","/SET_CURRENT_CONVERSATION"),SET_CONVERSATION_RECENCY:"".concat("CONVERSATIONS","/SET_CONVERSATION_RECENCY")}),Lr={fetchConversationRoom:function(e,t,n){return P(Pr.GET_CONVERSATION_START,{conversationId:e,userIds:t,messageId:n})},resetFetchConversationRoom:function(){return P(Pr.GET_CONVERSATION_READY,void 0)},fetchConversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return P(Pr.GET_CONVERSATIONS_START,{page:e,count:t})},createStagedConversation:function(e){return P(Pr.CREATE_STAGED_CONVERSATION_START,{userIds:e})},resetCreateStagedConversation:function(){return P(Pr.CREATE_STAGED_CONVERSATION_READY,void 0)},setConversationRecency:function(e){return P(Pr.SET_CONVERSATION_RECENCY,{conversationId:e})},createConversationRoom:function(e,t,n){return P(Pr.CREATE_CONVERSATION_ROOM_START,{conversationId:t,userIds:e,roomId:n})},archiveConversation:function(e){return P(Pr.ARCHIVE_CONVERSATION_START,{roomId:e})},unarchiveConversation:function(e){return P(Pr.UNARCHIVE_CONVERSATION_START,{roomId:e})},resetCreateConversationRoom:function(){return P(Pr.CREATE_CONVERSATION_ROOM_READY,void 0)},createConversationAndSubmit:function(e,t,n){return P(Pr.CREATE_CONVERSATION_AND_SUBMIT_START,{userIds:e,message:t,roomId:n})}},wr=n(388),xr=n.n(wr),Mr={archiveConversation:Lr.archiveConversation},Dr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).archiveConversation=function(e){n.props.archiveConversation(e)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lobby,n=e.me,a=e.unreadsRooms,o=e.unreadsSummary,s=e.totalConversations,i=e.totalThreads,c=e.hasArchivedConversationUnreads,u=e.hasEnterprise;return r.a.createElement("aside",{className:xr.a.sidebar},r.a.createElement(Wa,{lobby:t,hasThreads:i>0,totalConversations:s,me:n,unreadsRooms:a,unreadsSummary:o,onArchiveConversation:this.archiveConversation,hasArchivedConversationUnreads:c,hasEnterprise:u}))}}]),t}(r.a.PureComponent),Ur=Object(m.b)(function(e){return{lobby:gr(e),totalThreads:_r(e),totalConversations:hr(e),unreadsRooms:Ar(e),unreadsSummary:jr(e),hasArchivedConversationUnreads:kr(e),me:Ft(e),hasEnterprise:Wt(e)}},Mr)(Dr),Fr={INIT_SOCKET:"".concat("SOCKETS","/INIT_SOCKET"),CLOSE_SOCKET:"".concat("SOCKETS","/CLOSE_SOCKET"),UPDATE_CONNECTION_STATUS:"".concat("SOCKETS","/UPDATE_CONNECTION_STATUS")},Gr={initSocket:function(e){return P(Fr.INIT_SOCKET,{userId:e})},closeSocket:function(){return P(Fr.CLOSE_SOCKET,void 0)},connectionStatusChange:function(e){return P(Fr.UPDATE_CONNECTION_STATUS,{connected:e})}},Br=Object(N.a)({},L("GET_PENDING_RATINGS","PROJECTS"),L("GET_ROOM_RATINGS","PROJECTS"),L("MUTATE_MENTOR_RATING","PROJECTS"),L("GET_PASSED_USERS","PROJECTS")),Hr={fetchPendingRatings:function(){return P(Br.GET_PENDING_RATINGS_START,void 0)},fetchRoomRatings:function(e){return P(Br.GET_ROOM_RATINGS_START,{roomId:e})},mutateMentorRating:function(e,t,n,a){return P(Br.MUTATE_MENTOR_RATING_START,{mentorId:e,userId:t,roomId:n,rating:a})},resetMutateMentorRating:function(){return P(Br.MUTATE_MENTOR_RATING_READY,void 0)},fetchPassedUsers:function(e,t){return P(Br.GET_PASSED_USERS_START,{roomId:e,participantIds:t})}},Vr=function(e,t){return ne()(e,["rooms","byId",t])},zr=Object(yt.a)(Pt,function(e){return{rooms:e}}),Wr=Object(yt.a)(Vr,zr,function(e,t){if(e)return function(e,t){return Object(Xt.a)(e,Ya,t)}(e,t)}),Yr=Object(yt.a)(Vr,function(e){return ne()(e,"room_title")||""}),Kr=Object(yt.a)(function(e,t){return ne()(e,["rooms","metaByRoomId",t])},zr,function(e,t){if(e)return e.project}),qr=Dt("roomsAsync"),Jr=Object(N.a)({},L("GET_PROFILES","PROFILES"),L("GET_ROOMS_PROFILES","PROFILES"),L("GET_ADDITIONAL_INFO","PROFILES"),{RESOLVE_ADDITIONAL_PROFILES:"PROFILES/RESOLVE_ADDITIONAL_PROFILES"}),Xr={getProfiles:function(e,t){return P(Jr.GET_PROFILES_START,{roomId:e,userIds:t})},getRoomsProfiles:function(e){return P(Jr.GET_ROOMS_PROFILES_START,{threads:e})},resolveAdditionalProfiles:function(e,t){return P(Jr.RESOLVE_ADDITIONAL_PROFILES,{roomId:e,index:t})},getAdditionalProfileInfo:function(e){return P(Jr.GET_ADDITIONAL_INFO_START,{userId:e})}},$r=Object(N.a)({},L("GET_ROOM","ROOMS"),L("UPDATE_LAST_VISITED","ROOMS"),L("GET_ROOM_META","ROOMS"),{ENTER_ROOM:"".concat("ROOMS","/ENTER_ROOM"),LEAVE_ROOM:"".concat("ROOMS","/LEAVE_ROOM")}),Qr=function(e,t){return P($r.UPDATE_LAST_VISITED_START,{roomId:e,lastVisited:t})},Zr={getRoom:function(e,t){return P($r.GET_ROOM_START,{roomId:e,messageId:t})},resetGetRoom:function(){return P($r.GET_ROOM_READY,void 0)},updateLastVisited:Qr,updateLastVisitedNow:function(e){return Qr(e,(new Date).toISOString())},getRoomMeta:function(e){return P($r.GET_ROOM_META_START,{roomId:e})}},eo=n(154),to=n.n(eo),no=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.participant,n=e.homeUrl,a=e.roomId,o=e.isOnline,s=rn(t,t.profile,a),i=s.role,c=s.name,u=s.id,l=s.profile,d=s.passedProject,m=o?"active":"inactive",f=Re()(to.a.participant,to.a[m]);return r.a.createElement("li",{className:f,"data-has-profile":!!l},r.a.createElement(p.b,{to:"".concat(n,"?contextType=profile&profileId=").concat(u),className:to.a.link},r.a.createElement(oe.k,{type:"inline",size:"1x"},r.a.createElement(sa,{userId:u,roomId:a})),r.a.createElement(oe.l,{size:"sm",spacing:"none"},c),r.a.createElement(la,{type:i}),r.a.createElement("span",{className:to.a.right},d&&r.a.createElement(oe.n,{content:"Has passed this project",direction:"bottom",trigger:r.a.createElement("div",null,r.a.createElement(Ce.p,{size:"sm",color:"teal",title:"Passed project checkmark"}))}))))}}]),t}(r.a.PureComponent),ao=new Error("use-react-router may only be used with react-router@^5."),ro=new Error("useReactRouter may only be called within a <Router /> context.");var oo=function(){var e=Object(a.useContext)(E),t=e.isContextSidebarOpen,n=e.toggleContextSidebar,r=function(){if(!A.e)throw ao;var e=Object(a.useContext)(A.e);if(!e)throw ro;return e}(),o=r.history,s=r.location;return{openProfile:function(e){t||n(!0),o.push("".concat(s.pathname,"?contextType=profile&profileId=").concat(e))},isContextSidebarOpen:t,toggleContextSidebar:n}},so=n(389),io=n.n(so);var co=function(e){var t=e.color,n=oo().toggleContextSidebar;return r.a.createElement("div",{className:io.a.close},r.a.createElement(oe.n,{content:"Close sidebar",direction:"bottom",trigger:r.a.createElement(oe.a,{label:"Close",variant:"minimal",onClick:n,icon:r.a.createElement(Ce.r,{size:"sm",title:"close sidebar",color:t||"slate"}),iconOnly:!0})}))};var uo=n(272),lo=n.n(uo);var mo=function(e){var t=e.handleSearchClear,n=e.handleSearchInput,o=e.searchQuery;return Object(a.useEffect)(function(){return document.addEventListener("click",t,!1),function(){return document.removeEventListener("click",t,!1)}}),r.a.createElement("form",{className:lo.a.form,onSubmit:function(e){e.preventDefault()}},r.a.createElement("input",{className:lo.a.input,type:"text",value:o,onChange:n,placeholder:"Member name...",autoFocus:!0}),r.a.createElement("div",null,r.a.createElement(oe.a,{onClick:t,variant:"minimal",label:"Close search input",icon:r.a.createElement(Ce.r,null),iconOnly:!0})))},po=n(132),fo=n.n(po);var ho=function(e){var t=e.participants,n=void 0===t?[]:t,o=e.homeUrl,s=e.loading,i=e.roomId,c=e.handleParticipantSearch,u=e.searchQuery,l=e.showSidebarCloseOnParticipants,d=void 0!==l&&l,m=function(e){var t=Object(a.useState)(!1),n=Object(ba.a)(t,2),r=n[0],o=n[1];return{showSearchInput:r,handleSearchClose:function(){o(!1),e.handleClearSearch()},handleSearchOpen:function(){o(!0)}}}(e),p=m.showSearchInput,f=m.handleSearchClose,h=m.handleSearchOpen,_=d&&!p;return r.a.createElement("div",{className:fo.a.sidebar},r.a.createElement("div",{className:fo.a.members},p&&r.a.createElement(mo,{searchQuery:u,handleSearchClear:f,handleSearchInput:c})||!s&&r.a.createElement("div",{"data-testid":"participant-heading",className:fo.a.participantHeader},r.a.createElement(oe.a,{onClick:h,variant:"minimal",icon:r.a.createElement(Ce.J,null),label:"Channel Members"})),_&&r.a.createElement(co,null)),r.a.createElement("ul",{className:fo.a.participants},n&&n.map(function(e){var t=!!e.is_online;return r.a.createElement(no,{participant:e,key:e.id,homeUrl:o,roomId:i,isOnline:t})}),r.a.createElement("li",{className:fo.a.loading},s&&r.a.createElement(oe.h,null))))},_o=Object(N.a)({},L("GET_PARTICIPANTS","PARTICIPANTS"),L("SEARCH_PARTICIPANTS","PARTICIPANTS"),L("SEARCH_PARTICIPANTS_TO_MENTION","PARTICIPANTS"),L("SET_PARTICIPANT_STATUS","PARTICIPANTS")),vo={getParticipants:function(e,t){return P(_o.GET_PARTICIPANTS_START,{roomId:e,parentRoomId:t})},searchParticipants:function(e,t){return P(_o.SEARCH_PARTICIPANTS_START,{roomId:e,search:t})},searchParticipantsToMention:function(e,t){return P(_o.SEARCH_PARTICIPANTS_TO_MENTION_START,{roomId:e,search:t})},resetSearchParticipantsToMention:function(e){return P(_o.SEARCH_PARTICIPANTS_TO_MENTION_READY,{roomId:e})},resetSearchParticipants:function(e){return P(_o.SEARCH_PARTICIPANTS_READY,{roomId:e})},setParticipantStatus:function(e,t,n){return P(_o.SET_PARTICIPANT_STATUS_START,{userId:e,roomId:t,isActive:n})}};var Eo={searchParticipants:vo.searchParticipants};var go=Object(m.b)(function(e,t){return{participantSearchResults:dn(e,t.roomId),participantSearchAsyncStatus:un(e)}},Eo)(function(e){var t=e.roomId,n=e.participants,o=e.homeUrl,s=e.membersCounts,i=e.loading,c=e.participantSearchResults,u=e.participantSearchAsyncStatus,l=e.showSidebarCloseOnParticipants,d=function(e){var t=e.searchParticipants,n=e.roomId,r=Object(a.useState)(""),o=Object(ba.a)(r,2),s=o[0],i=o[1];return{searchQuery:s,handleParticipantSearch:function(e){var a=e.target.value;i(a);var r=a.replace("@","");t(n,r)},handleClearSearch:function(){i("")}}}(e),m=d.searchQuery,p=d.handleParticipantSearch,f=d.handleClearSearch,h=m?c:n;return r.a.createElement(ho,{roomId:t,handleParticipantSearch:p,handleClearSearch:f,participants:h,homeUrl:o,searchQuery:m,membersCounts:s,loading:i||wt(u),showSidebarCloseOnParticipants:l})}),bo=n(29),Oo=n.n(bo),Io=function(e){var t=Oo()(e,function(e){return"false"===e.dataset.hasProfile});return t||void 0},So=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.scrollTop+t.offsetHeight+n>=e.offsetTop},yo=n(155),To=n.n(yo),jo=n(196),Ao=n.n(jo),Ro=n(390),Co=n.n(Ro),No=n(41),ko=n.n(No),Po=function(e,t,n,a){var o,s,i,c,u="",l="",d="",m=new Date(Date.now()),p=Co()(new Date(t),m);switch(c=function(e,t,n){var a=Ao()(n,t);return"unsubmitted"===e&&a||"failed"===e}(e,t,m),e){case"unsubmitted":if(c)o=fe("Project overdue"),s=r.a.createElement(Ce.O,{size:"sm"}),u=fe("Submit Now"),l=fe("We know life happens, but you can still catch up!"),i=Re()(ko.a.projectStatus,ko.a.redStatus),d=n;else{var f=p<8;o=fe("Project due in ".concat(p," ").concat(it(p,"day"))),f?(s=r.a.createElement(Ce.O,null),i=Re()(ko.a.projectStatus,ko.a.orangeStatus)):(s=r.a.createElement(Ce.G,null),i=Re()(ko.a.projectStatus,ko.a.blueStatus))}break;case"submitted":o=fe("Project submitted"),s=r.a.createElement(Ce.G,null),i=Re()(ko.a.projectStatus,ko.a.blueStatus);break;case"failed":o=fe("Project requires changes"),s=r.a.createElement(Ce.I,null),u=fe("See Feedback"),l=fe("Here's another chance to try this. You've got this!"),i=Re()(ko.a.projectStatus,ko.a.redStatus),d=a;break;case"completed":o=fe("Project meets specifications"),s=r.a.createElement(Ce.p,null),i=Re()(ko.a.projectStatus,ko.a.greenStatus);break;default:o=fe("Project due in ".concat(p," ").concat(it(p,"day"))),s=r.a.createElement(Ce.G,null),i=Re()(ko.a.projectStatus,ko.a.blueStatus)}return{title:o,icon:s,statusStyles:i,showCallToActionButton:c,btnLabel:u,ctaSubHeading:l,href:d}},Lo=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.projectState,n=e.dueDate,a=e.submissionUrl,o=e.feedbackUrl,s=Po(t,n,a,o),i=s.title,c=s.icon,u=s.statusStyles,l=s.btnLabel,d=s.ctaSubHeading,m=s.href,p=s.showCallToActionButton;return r.a.createElement("div",{className:ko.a.container},r.a.createElement("div",{className:u},r.a.createElement("span",{className:ko.a.icon},c),r.a.createElement("span",{className:ko.a.message},r.a.createElement(oe.l,{spacing:"none",size:"sm"},i),p&&r.a.createElement("span",{className:ko.a.cta},r.a.createElement(oe.l,{size:"xs",spacing:"1x"},d),r.a.createElement("span",{className:ko.a.ctaBtn},r.a.createElement(oe.a,{href:m,label:l,variant:"default",small:!0,external:!0}))))))}}]),t}(r.a.PureComponent),wo=n(203),xo=n.n(wo),Mo=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mentorParticipants,n=e.homeUrl,a=e.roomId,o=e.loading;return r.a.createElement("div",{className:xo.a.leaders},r.a.createElement("span",{className:xo.a.mentorHeading},r.a.createElement(oe.e,{size:"h6",spacing:"2x"},"Your Mentors")),r.a.createElement(oe.h,{busy:o,size:"sm"},r.a.createElement("ul",{className:xo.a.mentorParticipants},t&&t.map(function(e){var t=!!e.is_online;return r.a.createElement(no,{participant:e,key:e.id,homeUrl:n,roomId:a,isOnline:t})}))))}}]),t}(r.a.PureComponent),Do=n(391),Uo=n.n(Do),Fo=n(392),Go=n.n(Fo),Bo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showEntireText:!1},n.handleEllipsisButtonClick=function(){n.setState(function(e){return{showEntireText:!e.showEntireText}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.maxCharacters,a=e.expandButtonLabel,o=e.collapseButtonLabel,s=this.state.showEntireText,i=n||100,c=t.length>i,u=s?t:Uo()(t,{length:n,separator:" "});return r.a.createElement(oe.l,{spacing:"none",size:"sm"},u,c&&r.a.createElement("button",{onClick:this.handleEllipsisButtonClick,className:Go.a.expandBtn},r.a.createElement(oe.l,{spacing:"none",size:"sm"},s?o:a)))}}]),t}(r.a.PureComponent);Bo.defaultProps={maxCharacters:100,expandButtonLabel:"Read More",collapseButtonLabel:"Read Less"};var Ho=Bo,Vo=n(393),zo=n.n(Vo),Wo=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.description;return e?r.a.createElement("div",{className:zo.a.project},r.a.createElement(oe.e,{size:"h6",spacing:"none"},"Project Description"),r.a.createElement(Ho,{text:e})):null}}]),t}(r.a.PureComponent),Yo=n(273),Ko=n.n(Yo),qo=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.submissionUrl,n=e.nanodegreeTagId,a=e.projectTagId,o=e.totalQuestions,s=e.rubricUrl,i=function(e,t){return ue()(e)||ue()(t)?"".concat(k.REACT_APP_KNOWLEDGE_HOME):"".concat(k.REACT_APP_KNOWLEDGE_HOME,"/?nanodegree=").concat(e,"&project=").concat(t,"&page=1&sort=SCORE")}(n,a),c="(".concat(o," ").concat(it(o,"related question"),")");return r.a.createElement("div",{className:Ko.a.links},r.a.createElement(oe.e,{size:"h6",spacing:"half"},"Helpful Links"),r.a.createElement(oe.k,{type:"stack",size:"half"},r.a.createElement(oe.k,{type:"inline",size:"half"},r.a.createElement(oe.g,{external:!0,href:i,testID:"knowledge"},"Knowledge")),!!o&&r.a.createElement("span",{className:Ko.a.questions},r.a.createElement(oe.l,{spacing:"none"},c))),t&&r.a.createElement(oe.k,{type:"stack",size:"half"},r.a.createElement(oe.g,{external:!0,href:t,testID:"submission"},"Project Submission")),s&&r.a.createElement(oe.k,{type:"stack",size:"half"},r.a.createElement(oe.g,{external:!0,href:s,testID:"rubric"},"Project Rubric")))}}]),t}(r.a.PureComponent),Jo=n(93),Xo=n.n(Jo),$o=n(151),Qo=n.n($o),Zo=n(274),es=n.n(Zo),ts=(n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),function(e,t){return function(e){return"@"===e.charAt(0)}(e)&&!!e.slice(1)&&function(e){return at.UID_FORMAT.test(e)}(t)}),ns=function(e,t){var n=new Xo.a.Renderer;n.link=function(e,n,a){if(ts(a,e)){var r=Xo.a.Renderer.prototype.link.call(this,"#",a,a);return function(e,t,n){var a=n.replace(at.UID_PREFIX,"").toString();return(e||[]).includes(a)?t.replace(/^<a /,"<a data-id=".concat(a," data-tst='mention' class=").concat(Qo.a.mention," ")):t}(t,r,e)}return Xo.a.Renderer.prototype.link.call(this,e,e,a).replace(/^<a /,'<a target="_blank" rel="noopener" ')},n.heading=function(e,t,n,a){return Xo.a.Renderer.prototype.heading.call(this,e,5,n,a)};var a=Object(N.a)({},Xo.a.defaults,{highlight:function(e,t){try{return es.a.highlight(e,es.a.languages[t||"markup"],t)}catch(n){return e}},renderer:n,sanitize:!0}),r=new Xo.a.Lexer(a),o=new Xo.a.Parser(a),s=r.lex(e);return o.parse(s)},as=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).nodeElementRef=void 0,n.getDOMAtMentions=function(){return n.nodeElementRef&&n.nodeElementRef.current?n.nodeElementRef.current.querySelectorAll("a[data-tst='mention']"):null},n.addProfileToDOMAtMentions=function(e){Array.from(e).forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),e&&e.dataset&&e.dataset.id&&e.dataset.id!==he.id&&n.props.onProfileClick(e.dataset.id)})})},n.nodeElementRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.getDOMAtMentions();e&&this.addProfileToDOMAtMentions(e)}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.mentions,a=e.isMe,o=ue()(t)||jt()(t)?"":t;if(!t)return null;var s=ns(o,n),i=Re()(Qo.a.markdown,Object(Q.a)({},Qo.a.me,a));return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:s},className:i,ref:this.nodeElementRef})}}]),t}(r.a.PureComponent);as.defaultProps={isMe:!1,onProfileClick:_.a};var rs=as,os=500,ss=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).participantListRef=void 0,n.throttledOnScroll=void 0,n.onScroll=function(){var e=n.participantListRef.current;if(e){var t=e.querySelectorAll("li"),a=Array.from(t)||[],r=Io(a);if(r&&So(r,e,os)){var o=C()(a,r);n.props.onFetchMoreProfiles(o)}}},n.participantListRef=r.a.createRef(),n.throttledOnScroll=I()(n.onScroll,1e3),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.participants,n=e.homeUrl,a=e.isParticipantsLoading,o=e.room,s=e.roomLeaderParticipants,i=e.isThreadRoom,c=e.project,u=e.isRoomLeaderParticipantsLoading,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=ne()(e,"members_count",{}),r=ue()(a)?void 0:ie()(a).reduce(function(e,t){return e+t},0),o=r>=500?500:r,s=r?r-t.length-n.length:0;return s<0&&(s=0),{truncated:o,nMore:s,total:r}}(o,t,s),d=ne()(o,"room_summary"),m=ne()(o,"room_type",""),p=ne()(o,"room_id"),f=ne()(o,"topic.room_id"),h=ne()(o,"id")||f||p,_=s&&s.length,v=(!!d||!!c||!!_)&&!i,E=!!d&&"project"!==m,g="project"===m&&!!c,b=ne()(c,"rubric_id"),O=ne()(c,"knowledge.nanodegree_tag_id"),I=ne()(c,"knowledge.nanodegree_tag_id"),S=ne()(c,"knowledge.total_questions"),y=ne()(c,"lesson_summary"),T=ne()(c,"due_at"),j=ne()(c,"project_state.state"),A=ne()(c,"project_state.submissions"),R=function(e){if(!ue()(e))return"".concat(k.REACT_APP_REVIEWS_HOME,"/#!/rubrics/").concat(e,"/start")}(b),C=function(e,t){if("failed"===e&&!ue()(t))return t[t.length-1].url}(j,A),N=function(e){if(!ue()(e))return"".concat(k.REACT_APP_REVIEWS_HOME,"/#!/rubrics/").concat(e,"/view")}(b);return r.a.createElement("div",{className:To.a.sidebar,onScroll:this.throttledOnScroll,ref:this.participantListRef},v&&r.a.createElement("div",{className:To.a.channelMeta},r.a.createElement(oe.e,{size:"h4",spacing:"2x"},"Channel Information"),r.a.createElement(co,null)),E&&r.a.createElement("div",{className:To.a.channelSummary},r.a.createElement(oe.e,{size:"h6",spacing:"1x"},"Purpose"),r.a.createElement(rs,{content:d})),g&&T&&r.a.createElement(Lo,{projectState:j,dueDate:T,submissionUrl:R,feedbackUrl:C}),g&&y&&r.a.createElement(Wo,{description:y}),!!_&&s&&!i&&r.a.createElement(Mo,{mentorParticipants:s,homeUrl:n,roomId:h,loading:u}),g&&r.a.createElement(qo,{submissionUrl:R,rubricUrl:N,nanodegreeTagId:O,projectTagId:I,totalQuestions:S}),r.a.createElement("div",{className:To.a.participants},r.a.createElement(go,{participants:t,homeUrl:n,membersCounts:l,loading:a,roomId:h,showSidebarCloseOnParticipants:!v})))}}]),t}(r.a.PureComponent),is=n(62),cs=n.n(is),us=new Xt.c.Entity("threads",{_threadAuthorParticipant:Zt,_threadAuthorProfile:$t,_threadParticipants:[Zt]},{idAttribute:"thread_id",processStrategy:function(e){var t=ne()(e,"topic.thread.participants",[]),n=ne()(e,"topic.user_id",void 0);return Object(N.a)({},e,{_threadAuthorParticipant:{id:n},_threadAuthorProfile:{id:n},_threadParticipants:t})}}),ls={threads:[us]},ds=function(e){return Object(Xt.b)(e,us)},ms=function(e){var t=e.notifications,n=void 0===t?{}:t,a=e.unread_mentions,r=void 0===a?{}:a,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.map(function(e){var a=t[e.thread_id]||{},r=n[e.thread_id]||[],o={unread_count:a.count||0,mentions_count:r.length,last_visited:a.last_visited,oldest_message_id:a.oldest||null,mentions:r.map(function(e){return e.message_id})};return Object(N.a)({},e,o.unread_count>0?{unreads:o}:{})})}(e.threads,n,r);return Object(Xt.b)(Object(N.a)({},cs()(Object(N.a)({},e),["notifications","unread_mentions"]),{threads:o}),ls)},ps=function(e,t){return ne()(e,["threads","byId",t],void 0)},fs=Object(yt.a)(Lt,Nt,kt,function(e,t,n){return{threads:e,participants:t,profiles:n}}),hs=Object(yt.a)(function(e){return ne()(e,["threads","currentThreads"])},fs,function(e,t){if(e)return function(e,t){return Object(Xt.a)(e,ls,t)}(e,t)}),_s=Object(yt.a)(function(e){return ne()(e,"threads.stagedThread",void 0)},function(e){return e}),vs=function(){return Object(yt.a)(ps,fs,function(e,t){if(e)return function(e,t){return Object(Xt.a)(e,us,t)}(e,t)})},Es=vs(),gs=Dt("threadsAsync"),bs=function(e){return ne()(e,"meta.scope_payload.nd_key","")},Os=Object(yt.a)(Rt,kt,Ct,function(e,t,n){return{conversations:e,profiles:t,messages:n}}),Is=Object(yt.a)(function(e,t){return ne()(e,["conversations","byId",t])},Os,function(e,t){if(!ue()(e))return function(e,t){return Object(Xt.a)(e,sr,t)}(e,t)}),Ss=Object(yt.a)(Is,function(e){return bs(e)}),ys=Object(yt.a)(function(e){return ne()(e,"conversations.stagedConversation",void 0)},function(e){return e}),Ts=Object(yt.a)(function(e){return ne()(e,["conversations","currentConversations"])},Os,function(e,t){return de()(e)?{rooms:[]}:function(e,t){return Object(Xt.a)(e,ir,t)}(e,t)}),js=Dt("conversationsAsync"),As={resolveAdditionalProfiles:Xr.resolveAdditionalProfiles,getPassedUsers:Hr.fetchPassedUsers,getRoomMeta:Zr.getRoomMeta},Rs=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).fetchMoreProfiles=function(e){var t=n.props,a=t.getProfilesStatus,r=t.resolveAdditionalProfiles,o=t.room,s=t.roomId,i=t.threadId,c=t.conversationId||i||s;!wt(a)&&o&&c&&r(c,e)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getRoomMeta,n=e.roomId;this.getPassedParticipants(),n&&t(n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.roomId,a=t.roomLeaderParticipants,r=t.otherParticipants,o=t.getRoomMeta,s=e.roomId,i=e.otherParticipants,c=e.roomLeaderParticipants,u=a.length+r.length,l=i.length+c.length;n===s&&u===l||this.getPassedParticipants(),n&&n!==s&&o(n)}},{key:"getPassedParticipants",value:function(){var e=this.props,t=e.roomId,n=e.roomLeaderParticipants,a=e.otherParticipants,r=e.getPassedUsers,o=[].concat(Object(St.a)(n),Object(St.a)(a));t&&o.length&&r(t,cn(o))}},{key:"render",value:function(){var e=this.props,t=e.otherParticipants,n=e.homeUrl,a=e.room,o=e.getProfilesStatus,s=e.project,i=e.roomLeaderParticipants,c=e.threadId;return a?r.a.createElement(ss,{participants:t,roomLeaderParticipants:i,homeUrl:n,isParticipantsLoading:wt(o)&&!t.length,isRoomLeaderParticipantsLoading:wt(o)&&!!i&&!i.length,onFetchMoreProfiles:this.fetchMoreProfiles,room:a,isThreadRoom:!!c,project:s}):null}}]),t}(r.a.Component),Cs=Object(m.b)(function(e,t){var n,a=t.roomId,r=t.threadId,o=t.conversationId,s=o||r||a;n=r?Es(e,r):o?Is(e,o):Wr(e,a);var i=[];return r||o||(i=jn(e,s)),{roomLeaderParticipants:i,otherParticipants:r||o?Tn(e,s):An(e,s),room:n,getProfilesStatus:ea(e,"getProfiles"),project:Kr(e,r||a)}},As)(Rs),Ns=n(275),ks=n.n(Ns),Ps=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.nanodegree,t=e.title,n=e.projects,a=n?n.projects.length:0,o=n?n.completed_count:0,s=fe("".concat(o,"/").concat(a," passed"));return r.a.createElement("span",{className:ks.a.nanodegree},r.a.createElement(Ce.F,{color:"cerulean",size:"sm"}),r.a.createElement("span",{className:ks.a.info},r.a.createElement(oe.l,{spacing:"none"},t),r.a.createElement(oe.l,{size:"xs",spacing:"none"},s)))}}]),t}(r.a.PureComponent),Ls=n(204),ws=n.n(Ls),xs=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.project,t=e.title,n="completed"===e.status;return r.a.createElement("li",{className:ws.a.project},n?r.a.createElement("span",{className:ws.a.check},r.a.createElement(Ce.p,{size:"sm",color:"teal"})):r.a.createElement("span",{className:ws.a.circle},r.a.createElement(Ce.q,{size:"sm"})),r.a.createElement(oe.l,{size:"sm",spacing:"half"},t))}}]),t}(r.a.PureComponent),Ms=n(394),Ds=n.n(Ms),Us=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.projects;return r.a.createElement("ul",{className:Ds.a.projectList},e&&e.map(function(e){return r.a.createElement(xs,{project:e,key:e.id})}))}}]),t}(r.a.PureComponent),Fs=n(205),Gs=n.n(Fs),Bs=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.nanodegrees;return r.a.createElement("ul",{className:Gs.a.nanodegreeList},e&&e.map(function(e){var t=e.projects,n=!de()(t)&&!ue()(t.projects);return r.a.createElement("li",{key:e.id,className:Gs.a.nanodegree},n&&r.a.createElement(Be,{title:r.a.createElement(Ps,{nanodegree:e})},r.a.createElement(Us,{projects:t.projects})),!n&&r.a.createElement("span",{className:Gs.a.marginBottom},r.a.createElement(Ps,{nanodegree:e})))}))}}]),t}(r.a.PureComponent),Hs=n(133),Vs=n.n(Hs),zs=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderGraduatedList",value:function(){var e=this.props.nanodegrees;return r.a.createElement("ul",{className:Vs.a.nanodegreeList},e.map(function(e){return r.a.createElement("li",{key:e.id,className:Vs.a.graduatedListItem},r.a.createElement(Ps,{nanodegree:e}))}))}},{key:"render",value:function(){var e,t=this.props,n=t.nanodegrees,a=t.isGraduatedNanodegreeList,o=t.hasEnrolledNanodegrees,s=t.hasGraduatedNanodegrees,i=fe(a?"Graduated":"Enrolled"),c=Re()("",(e={},Object(Q.a)(e,Vs.a.borderTop,a&&o),Object(Q.a)(e,Vs.a.marginBottom,!a&&s),e));return r.a.createElement("div",{className:c},r.a.createElement("div",{className:Vs.a.subheading},r.a.createElement(oe.l,{size:"sm",spacing:"1x"},i)),!a&&n?r.a.createElement(Bs,{nanodegrees:n}):this.renderGraduatedList())}}]),t}(r.a.PureComponent),Ws=n(75),Ys=n.n(Ws),Ks=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.answersCount,n=void 0===t?0:t,a=e.additionalProfileInfoPending,o=e.passedProjects,s=!a;return r.a.createElement("div",{className:Ys.a.highlights},!s&&r.a.createElement("div",{className:Ys.a.gridCenter},r.a.createElement(oe.h,{size:"sm"})),s&&r.a.createElement("div",{"data-testid":"content",className:Ys.a.statsWrapper},o>=0&&r.a.createElement("div",{"data-testid":"passed-projects",className:Ys.a.stat},r.a.createElement("div",{className:Ys.a.iconWrapper},r.a.createElement(Ce.H,{size:"sm",color:"white"})),r.a.createElement(oe.e,{size:"h4",spacing:"none"},o),r.a.createElement("div",{className:Ys.a.label},r.a.createElement(oe.e,{size:"h6",spacing:"none"},fe("Projects passed")))),n>=0&&r.a.createElement("div",{"data-testid":"knowledge-answers",className:Ys.a.stat},r.a.createElement("div",{className:Ys.a.iconWrapper},r.a.createElement(Ce.j,{size:"sm",color:"white"})),r.a.createElement(oe.e,{size:"h4",spacing:"none"},n),r.a.createElement("div",{className:Ys.a.label},r.a.createElement(oe.e,{size:"h6",spacing:"none"},fe("Knowledge answers"))))))}}]),t}(r.a.PureComponent),qs=n(44),Js=n.n(qs);var Xs=Object(A.g)(function(e){var t=e.myId,n=e.history,a=e.roomId,o=e.profile,s=e.conversationId;return r.a.createElement(oe.a,{onClick:function(){var e=o&&o.id,r=[t,e];n.push(ye(r,a||s))},label:fe("Send Direct Message"),variant:"secondary",small:!0,full:!0})}),$s=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.profile,o=n.homeUrl,s=n.roomId,i=n.me,c=n.myRoles,u=void 0===c?[]:c,l=n.knowledgeActivityStats.answers_count,d=void 0===l?0:l,m=n.graduatedNanodegrees,f=n.enrolledNanodegrees,h=n.totalPassedProjects,_=n.additionalProfileInfoPending,v=n.showBackArrow,E=void 0===v||v,g=i.id===(a?a.id:""),b=rn(void 0,a,s),O=b.role,I=b.bio,S=b.name,y=b.avatarProps,T=b.showLocation,j=b.locationDescription,A=(t=o)?t.split("?")[0]:"/",R=!(!m||!m.length),C=!(!f||!f.length),N=!R&&!C&&!_,k=u.length||"staff"!==O,P=!Oe(o)&&!g&&"bot"!==O&&k,L=Re()((e={},Object(Q.a)(e,Js.a.backLink,E),Object(Q.a)(e,Js.a.hidden,!E),e));return r.a.createElement(oe.h,{busy:de()(a)},r.a.createElement("div",{className:Js.a.container},r.a.createElement("section",{className:Js.a.header},r.a.createElement(p.b,{to:o,className:L,"data-tst":"back-link"},r.a.createElement(Ce.b,{size:"sm",color:"slate"})),r.a.createElement("div",{className:Js.a.user},r.a.createElement("div",{className:Js.a.avatar},r.a.createElement(Vn,Object.assign({},y,{sizeSelection:"xl",size:72}))),r.a.createElement("div",{className:Js.a.info},r.a.createElement(oe.e,{size:"h5",spacing:"none"},S),r.a.createElement("div",{className:Js.a.badge},r.a.createElement(la,{type:O})),T&&!!j&&r.a.createElement("div",{className:Js.a.location,"data-ref":"location"},r.a.createElement(Ce.N,{size:"sm",title:fe("Learning From")}),r.a.createElement(oe.l,{spacing:"none",size:"sm"},j||fe("No location listed"))))),r.a.createElement(co,{color:"slate"})),r.a.createElement("section",{className:Js.a.body},!!I&&r.a.createElement("div",{"data-ref":"bio",className:Js.a.bioSegment},r.a.createElement(oe.l,{size:"sm",spacing:"none"},I)),g&&r.a.createElement("div",{className:Js.a.bodySegment},r.a.createElement(p.b,{to:"".concat(A,"?contextType=editProfile"),className:Js.a.button,"data-testid":"edit-link"},r.a.createElement("span",{className:Js.a.editIcon},r.a.createElement(Ce.u,{size:"sm"})),"Edit Profile")),P&&r.a.createElement("div",{className:Js.a.bodySegment,"data-ref":"dm"},r.a.createElement(Xs,{myId:i.id,profile:a,roomId:s})),r.a.createElement("div",{className:Js.a.bodySegment},r.a.createElement("div",{className:Js.a.highlightWrapper},r.a.createElement(Ks,{answersCount:d,passedProjects:h,additionalProfileInfoPending:_}))),(C||R)&&r.a.createElement("div",{"data-ref":"nanodegrees",className:Js.a.bodySegment},r.a.createElement(oe.e,{size:"h6",spacing:"1x"},fe("Nanodegrees")),C&&f&&r.a.createElement(zs,{nanodegrees:f,isGraduatedNanodegreeList:!1,hasEnrolledNanodegrees:C,hasGraduatedNanodegrees:R}),R&&m&&r.a.createElement(zs,{nanodegrees:m,isGraduatedNanodegreeList:!0,hasEnrolledNanodegrees:C,hasGraduatedNanodegrees:R})),N&&r.a.createElement("div",{className:Js.a.bodySegment},r.a.createElement(oe.l,{color:"silver",size:"sm",align:"center"},"This user has no current enrollments")))))}}]),t}(r.a.Component);$s.defaultProps={showBackArrow:!0};var Qs=$s,Zs={getAdditionalProfileInfo:Xr.getAdditionalProfileInfo},ei=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.additionalProfileInfo;this.trackProfileView(),ue()(e)&&this.getAdditionalProfileInfo()}},{key:"componentDidUpdate",value:function(e){var t=this.props.additionalProfileInfo,n=ne()(e,"profile.id"),a=ne()(this.props,"profile.id");n!==a&&a&&(this.trackProfileView(),ue()(t)&&this.getAdditionalProfileInfo())}},{key:"trackProfileView",value:function(){var e=this.props.profile;e&&La.track(Ta.ViewProfile,{userId:e.id})}},{key:"getAdditionalProfileInfo",value:function(){var e=this.props,t=e.getAdditionalProfileInfo,n=e.participantId;n&&t(n)}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.homeUrl,a=e.roomId,o=e.conversationId,s=e.me,i=e.knowledgeActivityStats,c=e.totalPassedProjects,u=e.additionalProfileInfoAsyncStatus,l=e.graduatedNanodegrees,d=e.enrolledNanodegrees,m=e.location.pathname;return t?r.a.createElement(Qs,{knowledgeActivityStats:i,profile:t,homeUrl:n,roomId:a||o,me:s,myRoles:s.roles,totalPassedProjects:c,additionalProfileInfoPending:wt(u),graduatedNanodegrees:l,enrolledNanodegrees:d,showBackArrow:"/threads"!==m}):null}}]),t}(r.a.PureComponent),ti=Object(A.g)(Object(m.b)(function(){var e=Qn();return function(t,n){var a=n.participantId,r=void 0===a?"":a;return{knowledgeActivityStats:ta(t,r),profile:e(t,r),me:Ft(t),additionalProfileInfoAsyncStatus:ea(t,"getAdditionalProfileInfo"),totalPassedProjects:aa(t,r),additionalProfileInfo:na(t,r),graduatedNanodegrees:oa(t,r),enrolledNanodegrees:ra(t,r)}}},Zs)(ei)),ni=n(61),ai=n.n(ni),ri=n(446),oi=["image/jpeg","image/jpg","image/png"],si={fileTypeError:"Please upload a JPG or PNG.",fileSizeError:"Max file size is 1MB.",dimensionError:"Please upload a 120x120 image.",genericError:"Something went wrong. Try again."},ii=n(134),ci=n.n(ii),ui=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showAvatarMenu:!1},n.node=void 0,n.assignNode=function(e){n.node=e},n.hideAvatarMenu=function(){return n.setState({showAvatarMenu:!1})},n.handleClick=function(e){n.node&&n.node.contains(e.target)||n.hideAvatarMenu()},n.toggleShowAvatarMenu=function(){n.props.onClearPhotoError(),n.setState(function(e){return{showAvatarMenu:!e.showAvatarMenu}})},n.addFile=function(e){var t=e.target.files;n.props.onAddImage(t),e.target.value=null,n.hideAvatarMenu()},n.removeFile=function(){n.props.onRemoveImage(),n.hideAvatarMenu()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e=this.state.showAvatarMenu;return r.a.createElement("div",{ref:this.assignNode},r.a.createElement(oe.o,null,r.a.createElement("label",{htmlFor:"editPhoto"},"Profile Photo (Optional)")),r.a.createElement("button",{type:"button",id:"editPhoto",className:ci.a.editPhoto,onClick:this.toggleShowAvatarMenu},r.a.createElement(Ce.u,{size:"sm"})),e&&r.a.createElement("div",{className:ci.a.avatarMenu},r.a.createElement("ul",{className:ci.a.avatarList},r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"upload",className:ci.a.uploadImage},r.a.createElement(oe.e,{size:"h6",color:"slate"},"Upload New Image"))),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.removeFile,className:ci.a.removeImage},r.a.createElement(oe.e,{size:"h6",color:"slate"},"Remove Image"))))),r.a.createElement(oe.o,null,r.a.createElement("input",{id:"upload",type:"file",onChange:this.addFile,onBlur:this.hideAvatarMenu,name:"Upload New Image",accept:oi.join(", ")})))}}]),t}(r.a.Component),li={getBase64:function(e){return new Promise(function(t,n){var a=new FileReader;a.onloadend=function(){t(a.result)},a.onerror=function(e){n(e)},a.readAsDataURL(e)})},getImagePreview:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],e.prev=1,e.next=4,li.getBase64(n);case 4:return a=e.sent,(r=new Image).onload=function(){if(r.width<120||r.height<120)throw Error(si.dimensionError)},r.src=a,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(1),Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),verifyPhotoFile:function(e){var t=e[0];if(!oi.includes(t.type))throw new Error(si.fileTypeError);if(t.size>1048576)throw new Error(si.fileSizeError)}},di=li,mi={loadExternalScript:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(function(a,r){var o=function(){return a((t||_.a)())},s=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,i.onreadystatechange=o,i.onload=o,s.appendChild(i),setTimeout(function(){r(new Error("Timed out loading script: ".concat(e)))},n)})}},pi=n(445),fi=n(90),hi=function(e){var t=e.url,n=e.method,a=e.data,r=e.opts,o=r.params,s=r.headers,i=Object(fi.a)(r,["params","headers"]),c=Object(N.a)({method:n,timeout:1e4,headers:Object(N.a)({"Content-Type":"application/json",Accept:"application/json"},s)},i);if(o&&(-1===t.indexOf("?")&&(t+="?"),t+=ee.a.stringify(o)),t.includes("udacity.com")){var u=U.a.getJWT();u&&(c.headers.Authorization="Bearer ".concat(u))}if(a){var l="application/json"===c.headers["Content-Type"]?JSON.stringify(a):a;c.body=l}return fetch(t,c).then(function(e){if(e.ok)return e.json();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ne()(e,"status");if((401===t||419===t)&&!Ei())throw _i(),new vi({message:"Authentication Error"});if(de()(e)){var n=ne()(e,"type"),a=ne()(e,"url");throw new vi({message:"ApiError - undefined response at ".concat(n," ").concat(a),response:e})}var r=ne()(e,"data.message")||ne()(e,"data.error")||ne()(e,"statusText");throw new vi({message:r,status:t,response:e})}(e)}).then(function(e){var t=ne()(e,"errors",null);return t?new vi(t):e}).catch(function(e){throw new vi(e)})},_i=function(){"development"!==k.REACT_APP_ENV&&(U.a.signOut(),U.a.authenticate({env:k.REACT_APP_ENV,returnUrl:window.location.href}))},vi=function(e){function t(e){var n,a=e.message,r=e.status,o=e.response;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,a))).name=void 0,n.status=void 0,n.response=void 0,n.name="ApiError",n.status=r,n.response=o,n}return Object(d.a)(t,e),t}(Object(pi.a)(Error)),Ei=function(){return!("undefined"!==typeof window&&window.document)},gi=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n){var a,r=arguments;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:{},e.prev=1,e.next=4,hi({url:t+n,method:"get",opts:a});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new vi(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),bi=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n,a){var r,o=arguments;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=1,e.next=4,hi({url:t+n,method:"post",data:a,opts:r});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new vi(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,n,a){return e.apply(this,arguments)}}(),Oi=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n){var a,r=arguments;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:{},e.prev=1,e.next=4,hi({url:t+n,method:"delete",opts:a});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new vi(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),Ii=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n){var a,r,o,s=arguments;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=1,e.next=4,hi({url:"".concat(t,"/graphql"),method:"post",data:n,opts:a});case 4:if(r=e.sent,!((o=r.errors)&&o.length>0)){e.next=10;break}throw new vi({message:o[0].message,status:o[0].status});case 10:return e.abrupt("return",r);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),new vi(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t,n){return e.apply(this,arguments)}}(),Si=function(e){return Ii(k.REACT_APP_PROFILES_API_URL,e)},yi={fetchProfileLocations:function(e){var t=function(e){return'query LocationsQuery {\n    locations(search: "'.concat(e,'") {\n      description\n      location_id\n      }\n  }')}(e);return Si({query:t}).then(function(e){return ne()(e,"data.locations",[])})},fetchLocation:function(e){var t=function(e){return'query LocationQuery {\n    location(location_id: "'.concat(e,'") {\n      address_components {\n        long_name\n        short_name\n        type\n      }\n      location_id\n    }\n  }\n  ')}(e);return Si({query:t}).then(function(e){return ne()(e,"data.location",null)})}},Ti=n(395),ji=n.n(Ti),Ai={blacklist:["BY","CD","CI","CU","IR","IQ","KP","LR","MM","SD","SY","ZW","AL","BA","BG","HR","MK","ME","RO","RS","SI","XK"],whitelist:["AF","AX","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BE","BZ","BJ","BM","BT","BO","BQ","BW","BV","BR","IO","BN","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CG","CK","CR","CW","CY","CZ","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KR","KW","KG","LA","LV","LB","LS","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","MS","MA","MZ","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","RE","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","SC","SL","SG","SX","SK","SB","SO","ZA","GS","SS","ES","LK","SR","SJ","SZ","SE","CH","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UM","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM"]};var Ri=function(){var e={drivers:{google:{_loadService:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi,a=e.drivers.google._getApiKey(),r=function(){return ne()(t,"google.maps.places.AutocompleteService",null)},o=r();if(o)return Promise.resolve(o);if(ue()(a))return Promise.reject(new Error("Missing Google Places API key"));var s="https://maps.googleapis.com/maps/api/js?key=".concat(a,"&libraries=places");return n.loadExternalScript(s,r)},_getApiKey:function(){return k.REACT_APP_GOOGLE_MAPS_API_KEY},search:function(t,n){return n=Object(N.a)({},{types:["(cities)"]},{options:n}),e.drivers.google._loadService().then(function(e){if(e)return new e;throw new Error("Google Places API failed to load")}).then(function(e){return new Promise(function(a,r){e.getPlacePredictions(Object(N.a)({input:t},n),function(e,t){switch(t){case"OK":case"ZERO_RESULTS":a(e||[]);break;default:r(new Error("Google Places API failed with status code: ".concat(t)))}})})}).then(function(t){return Promise.all(t).then(function(t){var n=t.map(function(t){return e.drivers.profiles.decode(t.place_id).then(function(e){return{prediction:t,location:e}})});return Promise.all(n).then(function(e){return e.filter(function(e){var t=e.prediction,n=e.location,a=(n?n.address_components:[]).some(function(e){return"country"===e.type&&Ai.whitelist.includes(e.short_name)});return!a&&window.location.search.includes("debug")&&console.warn("Omitting;",t.description),a}).map(function(e){var t=e.prediction,n=void 0===t?{}:t;return Object(N.a)({},n,{location_id:n.place_id})})})})})}},profiles:{decode:function(e){return yi.fetchLocation(e)},search:function(e){return yi.fetchProfileLocations(e)}}},autocomplete:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.drivers;return a.google.search(t,n).catch(function(e){return a.profiles.search(t)}).catch(function(e){return[]})},decode:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.drivers.profiles).decode(t)},format:function(e,t){ji()(e)&&(e={});var n,a=e?e.address_components:[];return void 0===t&&e.description?e.description:ue()(a)?null:a.map(function(e){return"country"===e.type&&"US"===e.short_name&&(n=!0),e}).map(function(e){return n?a.length>2?"country"===e.type?null:t?e[t]:e.short_name||e.long_name:e.long_name:"administrative_area_level_1"===e.type?null:e.long_name}).filter(function(e){return!ue()(e)}).join(", ")}};return e}(),Ci=n(65),Ni=n.n(Ci),ki={location_id:null,description:""},Pi=function(){return fe("No options found.")},Li=function(e){return e.description},wi=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={userLocation:n.props.me.location||ki,photoUrl:n.props.me.photo_url||null,photoBase64:null,photoError:null,isLoadingLocations:!1,locationPredictions:[],locationError:null},n.locationSectionRef=void 0,n.profileFormRef=void 0,n.locationInputTimeout=void 0,n.debouncedFetchLocations=void 0,n.clearPhotoError=function(){n.state.photoError&&n.setState({photoError:null})},n.setPhotoError=function(e){n.setState({photoError:e})},n.previewPhotoFile=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var a;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.clearPhotoError(),e.prev=1,di.verifyPhotoFile(t),e.next=5,di.getImagePreview(t);case 5:a=e.sent,n.setState({photoBase64:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.setPhotoError(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),n.removeImage=function(){return n.setState({photoBase64:"",photoUrl:null})},n.fetchLocations=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var a;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],ue()(t)){e.next=11;break}return e.prev=2,e.next=5,Ri.autocomplete(t);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.setLocationError();case 11:n.setState({isLoadingLocations:!1,locationPredictions:a});case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),n.handleLocationInputChange=function(e){if(!e)return n.setState({isLoadingLocations:!1,locationPredictions:[]}),void n.debouncedFetchLocations.cancel();n.setState({isLoadingLocations:!0}),n.clearLocationError(),n.debouncedFetchLocations(e)},n.clearLocationError=function(){n.state.locationError&&n.setState({locationError:null})},n.setLocationError=function(){return n.setState({locationError:si.genericError})},n.setLocation=function(e){var t=e.location_id,a=e.description;return n.setState({userLocation:{location_id:t,description:a}})},n.onSubmit=function(){var e=n.state,t=e.userLocation,a=e.photoBase64;n.props.submit(t.location_id,a)},n.assignLocationSectionRef=function(e){n.locationSectionRef=e},n.assignProfileFormRef=function(e){n.profileFormRef=e},n.scrollToLocationSection=function(){n.locationSectionRef&&(n.locationInputTimeout=setTimeout(function(){return n.locationSectionRef.scrollIntoView(!0)},425))},n.scrollToTop=function(){clearTimeout(n.locationInputTimeout),n.profileFormRef&&n.profileFormRef.scrollIntoView()},n.debouncedFetchLocations=ai()(n.fetchLocations,150),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.locationInputTimeout)}},{key:"render",value:function(){var e=this.props,t=e.me,n=e.homeUrl,a=e.roomId,o=rn(t,void 0,a),s=o.avatarProps,i=o.name,c=this.state,u=c.userLocation,l=c.photoUrl,d=c.photoBase64,m=c.photoError,f=c.locationPredictions,h=c.isLoadingLocations,_=c.locationError,v=_?"reactSelectError":"reactSelect";return r.a.createElement("form",{className:Ni.a.profileForm,ref:this.assignProfileFormRef},r.a.createElement(oe.e,{size:"h3",spacing:"3x"},"Edit Profile"),r.a.createElement("section",{className:Ni.a.photoSection},r.a.createElement("div",{className:Ni.a.label},r.a.createElement(oe.e,{size:"h5",spacing:"none"},"Profile Photo"),r.a.createElement(oe.l,{size:"sm"},"\xa0(Optional)")),r.a.createElement("div",{className:Ni.a.profilePhoto},r.a.createElement("div",{className:Ni.a.profilePhotoLeft},r.a.createElement(Vn,Object.assign({},s,{hasPreviewError:!!m||void 0,photoUrl:d||l||void 0,size:72,sizeSelection:"lg"})),r.a.createElement(ui,{onAddImage:this.previewPhotoFile,onClearPhotoError:this.clearPhotoError,onRemoveImage:this.removeImage})),r.a.createElement("div",{className:Ni.a.profilePhotoRight},r.a.createElement(oe.e,{size:"h5",spacing:"half"},i),r.a.createElement(oe.l,{size:"sm"},"JPG or PNG, 120px by 120px, max size of 1MB"))),m&&r.a.createElement("div",{className:Ni.a.error},r.a.createElement(Ce.O,{color:"red",size:"sm"}),r.a.createElement(oe.l,{size:"xs"},m))),r.a.createElement("section",{className:Ni.a.locationSection,ref:this.assignLocationSectionRef},r.a.createElement("label",{htmlFor:"editLocation",className:Ni.a.label},r.a.createElement(oe.e,{size:"h5",spacing:"none"},"Studying From"),r.a.createElement(oe.l,{size:"sm"},"\xa0(Optional)")),r.a.createElement(ri.a,{autoBlur:!0,id:"userLocation",isLoading:h,labelKey:"description",name:"location",className:"reactSelectContainer",classNamePrefix:v,arrowRenderer:null,onChange:this.setLocation,onInputChange:this.handleLocationInputChange,options:f||[],getOptionLabel:Li,placeholder:fe("Enter your city"),noResultsText:fe("Type to search"),value:u,valueKey:"location_id",noOptionsMessage:Pi,onFocus:this.scrollToLocationSection,onBlur:this.scrollToTop}),_&&r.a.createElement("div",{className:Ni.a.error},r.a.createElement(Ce.O,{color:"red",size:"sm"}),r.a.createElement(oe.l,{size:"xs"},_))),r.a.createElement("section",{className:Ni.a.buttons},r.a.createElement(oe.a,{label:"Save Changes",variant:"primary",onClick:this.onSubmit,full:!0}),r.a.createElement(p.b,{to:"".concat(n,"?contextType=room")},"Cancel")))}}]),t}(r.a.Component),xi={fetchProfile:M.fetchProfile,updateProfile:M.updateProfile},Mi=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e,t){var a=n.props,r=a.history,o=a.homeUrl,s=a.me;try{n.props.updateProfile({location_id:e,photo_base64:t}),r.push(Se(o,s.id))}catch(i){console.error("Something went wrong! Please try again.")}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProfile()}},{key:"render",value:function(){var e=this.props,t=e.me,n=e.homeUrl,a=e.roomId;return r.a.createElement(wi,{me:t,submit:this.submit,homeUrl:n,roomId:a})}}]),t}(r.a.Component),Di=Object(A.g)(Object(m.b)(function(e){return{me:Ft(e)}},xi)(Mi)),Ui=["room","profile","editProfile"],Fi=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderContent",value:function(e){var t=this.props.location,n=t&&t.pathname||"",a=function(e){var t,n,a,r,o=Object(A.f)(e,{path:"/rooms/:roomId/new/:messageId",exact:!0});if(o){var s=o.params;t=s.roomId,a=s.messageId}var i=Object(A.f)(e,{path:"/:roomType(rooms|threads)/:roomId/:threadId?",exact:!0});if(i){var c=i.params;t=c.roomId,n=c.threadId}var u=Object(A.f)(e,{path:"/conversations/:conversationId",exact:!0});u&&(r=u.params.conversationId);return{conversationId:r,roomId:t,threadId:n,messageId:a}}(t.pathname),o=a.conversationId,s=a.roomId,i=a.threadId;switch(e.contextType){case"profile":var c=e.profileId;return c?(n+="?contextType=room",r.a.createElement(ti,{participantId:c,homeUrl:n,roomId:s,conversationId:o})):null;case"editProfile":return r.a.createElement(Di,{homeUrl:n,roomId:s});case"room":return r.a.createElement(Cs,{roomId:s,homeUrl:n,threadId:i,conversationId:o});default:return null}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.location,a=ee.a.parse(n.search),o=a.contextType;if(!(o&&Ui.includes(o)))return null;var s=this.renderContent(a);return s?r.a.createElement("aside",{className:t},s):null}}]),t}(r.a.PureComponent);Fi.defaultProps={className:""};var Gi=Object(A.g)(Fi),Bi=7340032,Hi=n(197);function Vi(e){if(e){var t=e.lastModified,n=e.name,a=e.size;return"pendingFile:".concat(Object(Hi.sha256)([n,t,a].join("")))}return"pendingFile:placeholder"}function zi(e){if(!e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(Number(e/Math.pow(1024,t)).toPrecision(2)," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}var Wi=n(135),Yi=n.n(Wi);var Ki=function(e){var t=e.isDraggingFile,n=function(e){var t=Object(a.useState)(!1),n=Object(ba.a)(t,2),r=n[0],o=n[1];return{isDraggingOver:r,handleDragEnter:function(e){e.preventDefault(),o(!0)},handleDragLeave:function(e){e.preventDefault(),o(!1)},handleDrop:function(t){if(t.preventDefault(),o(!1),re()(window,"File")&&re()(window,"FileReader")){var n=ne()(t,"dataTransfer.files.0",{type:"unsupported",size:0});e.handleDrop(n)}}}}(e),o=n.isDraggingOver,s=n.handleDragEnter,i=n.handleDragLeave,c=n.handleDrop,u=Re()(Yi.a.dropTargetPlaceholder,Object(Q.a)({},Yi.a.dropTargetActive,o));return t?r.a.createElement("div",{className:Yi.a.dropTargetWrapper},r.a.createElement("div",{className:Yi.a.fileDropTrigger,onDragEnter:s,onDragLeave:i,onDrop:c}),r.a.createElement("div",{className:u},r.a.createElement("div",null,r.a.createElement("div",{className:Yi.a.iconWrapper},r.a.createElement(Ce.t,{size:"lg",color:"cerulean"})),r.a.createElement(oe.e,{size:"h5",spacing:"1x"},"Drag and drop an image"),r.a.createElement(oe.l,{spacing:"none",size:"sm"},"JPG, PNG, or GIF"),r.a.createElement(oe.l,{size:"sm"},"Max file size: ",zi(Bi))))):null},qi=n(399),Ji=n.n(qi),Xi=function(e){return e.getIn(["files"])},$i=Object(yt.a)(Xi,function(e){return e.getIn(["pendingFiles"])||{}}),Qi=Object(yt.a)($i,function(e){return Ji()(e,function(e,t,n){var a=t.status,r=t.progress;return"pending"===a?[].concat(Object(St.a)(e),[{fileIdentifier:n,status:a,progress:r}]):e},[])}),Zi=Object(yt.a)(Xi,function(e){return ne()(e,["ui","isDraggingFile"],!1)}),ec=Object(N.a)({},L("GET_MESSAGES","MESSAGES"),L("RECEIVE_MESSAGE","MESSAGES"),L("POST_MESSAGE","MESSAGES"),L("POST_IMAGE_MESSAGE","MESSAGES"),L("REPLY_TO_MESSAGE","MESSAGES"),L("GET_PREV_MESSAGES","MESSAGES"),L("GET_NEXT_MESSAGES","MESSAGES"),L("GET_PIVOT_MESSAGES","MESSAGES"),L("GET_LINKS_INFO","MESSAGES"),L("DELETE_MESSAGE","MESSAGES"),L("EDIT_MESSAGE","MESSAGES"),L("RESEND_PENDING_MESSAGE","MESSAGES"),L("CANCEL_PENDING_MESSAGE","MESSAGES"),{REPLACE_PENDING_MESSAGE:"MESSAGES/REPLACE_PENDING_MESSAGE",MERGE_NEW_MESSAGE_BY_ID:"MESSAGES/MERGE_NEW_MESSAGE_BY_ID"}),tc={getMessages:function(e){return P(ec.GET_MESSAGES_START,{roomId:e})},resetGetMessages:function(e){return P(ec.GET_MESSAGES_READY,{roomId:e})},getPrevMessages:function(e,t){return P(ec.GET_PREV_MESSAGES_START,{roomId:e,prevMessageId:t})},getNextMessages:function(e,t){return P(ec.GET_NEXT_MESSAGES_START,{roomId:e,nextMessageId:t})},getPivotMessages:function(e,t){return P(ec.GET_PIVOT_MESSAGES_START,{roomId:e,nextMessageId:t})},receiveMessage:function(e,t,n){return P(ec.RECEIVE_MESSAGE_START,{roomId:e,message:t,parentRoomId:n})},receiveDeleteMessage:function(e,t){return P(ec.DELETE_MESSAGE_FULFILLED,{message:{room_id:e,message_id:t}})},postMessage:function(e,t,n){return P(ec.POST_MESSAGE_START,{roomId:t,message:e,messageId:n})},postImageMessage:function(e,t,n){return P(ec.POST_IMAGE_MESSAGE_START,{file:e,roomId:t,messageId:n})},replyToMessage:function(e,t,n){return P(ec.REPLY_TO_MESSAGE_START,{roomId:e,messageId:t,message:n})},getLinksInfo:function(e,t){return P(ec.GET_LINKS_INFO_START,{messageId:e,content:t})},deleteMessage:function(e,t){return P(ec.DELETE_MESSAGE_START,{messageId:e,roomId:t})},editMessage:function(e,t,n){return P(ec.EDIT_MESSAGE_START,{roomId:e,messageId:t,message:n})},resendPendingMessage:function(e){return P(ec.RESEND_PENDING_MESSAGE_START,{message:e})},cancelPendingMessage:function(e){return P(ec.CANCEL_PENDING_MESSAGE_START,{message:e})},replacePendingMessage:function(e,t,n){return P(ec.REPLACE_PENDING_MESSAGE,{roomId:e,pendingMessageId:t,messageId:n})},mergeNewMessageById:function(e){return P(ec.MERGE_NEW_MESSAGE_BY_ID,Object(N.a)({},e))}},nc={postImageMessage:tc.postImageMessage},ac=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleDrop=function(e){if(je()(n.props.handleDrop))return n.props.handleDrop({file:e});var t=n.props,a=t.roomId,r=void 0===a?"":a,o=t.messageId;(0,t.postImageMessage)(e,r,o)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.isDraggingFile;return r.a.createElement(Ki,{handleDrop:this.handleDrop,isDraggingFile:e})}}]),t}(r.a.Component),rc=Object(m.b)(function(e){return{isDraggingFile:Zi(e)}},nc)(ac),oc=Object(N.a)({},L("GET_THREAD","THREADS"),L("GET_NEW_THREAD","THREADS"),L("GET_THREADS","THREADS"),L("GET_NEXT_THREADS","THREADS"),{ADD_NEW_THREAD_ID:"".concat("THREADS","/ADD_NEW_THREAD_ID")}),sc={getThread:function(e,t){return P(oc.GET_THREAD_START,{roomId:e,messageId:t})},resetGetThread:function(){return P(oc.GET_THREAD_READY,void 0)},getNewThread:function(e,t){return P(oc.GET_NEW_THREAD_START,{roomId:e,messageId:t})},resetGetNewThread:function(){return P(oc.GET_NEW_THREAD_READY,void 0)},addNewThreadId:function(e){return P(oc.ADD_NEW_THREAD_ID,{threadId:e})},getThreads:function(){return P(oc.GET_THREADS_START,void 0)},getNextThreads:function(e){return P(oc.GET_NEXT_THREADS_START,{cursor:e})}};var ic=function(e){var t=e.children,n=e.userId,a=oo().openProfile;return r.a.createElement(oe.g,{href:"#",onClick:function(){a(n)}},t)},cc=n(276),uc=n.n(cc),lc=n(105),dc=n.n(lc);uc.a.setAppElement("body");var mc=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).refClose=Object(a.createRef)(),n.refCloseBottom=Object(a.createRef)(),n.handleClose=function(e){var t=n.props.onRequestClose;e.preventDefault(),t(e)},n.handleCloseBottom=function(e){e.preventDefault(),n.closeBottomFocus()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"closeFocus",value:function(){var e=this.refClose.current;e&&e.focus()}},{key:"closeBottomFocus",value:function(){var e=this.refCloseBottom.current;e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.fullScreen,a=e.overlayClassName,o=e.isCloseVisible,s=e.children,i=Object(fi.a)(e,["className","fullScreen","overlayClassName","isCloseVisible","children"]),c=Re()(dc.a.close,dc.a.unstyledButton),u="".concat(dc.a[n?"fullscreen":"content"]," ").concat(t);return r.a.createElement(uc.a,Object.assign({className:u,overlayClassName:"".concat(dc.a.overlay," ").concat(a)},i),o?r.a.createElement("button",{className:c,onClick:this.handleClose,title:fe("Close Modal"),ref:this.refClose},r.a.createElement(Ce.r,{size:"md",color:"white",title:fe("Close Modal")})):null,r.a.createElement("div",null,s),o?r.a.createElement("button",{className:Re()(dc.a.closeBottom,dc.a.unstyledButton),onFocus:this.handleCloseBottom,onClick:this.handleClose,ref:this.refCloseBottom},fe("Close Modal")):null)}}]),t}(r.a.Component);mc.displayName="ureact-modal",mc.defaultProps={isCloseVisible:!0,contentLabel:"Modal",fullScreen:!1};var pc=mc,fc=n(207),hc=n.n(fc),_c=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:hc.a.warningHeader},r.a.createElement(Ce.O,{size:"md",color:"red",title:fe("Delete Message")}),r.a.createElement(oe.e,{size:"h3"},fe("Delete Message"))),r.a.createElement("div",{className:hc.a.modalContent},r.a.createElement(oe.l,null,fe("This message will be permanently removed. Would you like to continue?")),r.a.createElement("div",{className:hc.a.actionButtons},r.a.createElement(oe.a,{label:fe("Yes, delete"),variant:"destructive",onClick:this.props.confirmDeleteMessage}),r.a.createElement(oe.a,{label:fe("Nevermind"),variant:"minimal",onClick:this.props.closeModal}))))}}]),t}(r.a.PureComponent),vc=n(106),Ec=n.n(vc),gc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.href,a=t.title,o=t.answers,s=function(e){var t=!!e&&e.length;return 1===t?"1 ".concat(fe("answer")):"".concat(t," ").concat(fe("answers"))}(o),i=function(e){var t=r.a.createElement(Ce.m,{size:"sm",title:"{__('knowledge answers')}",color:"slate"});if(!e)return t;var n=!!e&&e.some(function(e){return!!e.accepted});return e&&e.some(function(e){return!!e.verified})?t=r.a.createElement(Ce.g,{size:"sm",title:"{__('knowledge answers')}",color:"purple"}):n&&(t=r.a.createElement(Ce.o,{size:"sm",title:"{__('knowledge answers')}",color:"green"})),t}(o);return r.a.createElement("li",{className:Ec.a.link},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},r.a.createElement("div",{className:Ec.a.title},r.a.createElement(oe.l,{size:"xs",color:"white"},fe("Knowledge Post"))),r.a.createElement("div",{className:Ec.a.body},r.a.createElement(oe.e,{size:"h5",spacing:"none"},a),r.a.createElement("div",{className:Ec.a.answers},r.a.createElement("span",{className:Ec.a.icon},i),r.a.createElement("span",{className:Ec.a.text},r.a.createElement(oe.e,{size:"h6",spacing:"none"},s))))))}}]),t}(r.a.PureComponent),bc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.isMe,a=t.metadata;switch(t.type){case"knowledge":return!!a&&r.a.createElement(gc,{question:a,href:t.url,isMe:n});default:return null}}}]),t}(r.a.PureComponent),Oc=n(400),Ic=n.n(Oc),Sc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.links,n=e.isMe;return t&&t.length?r.a.createElement("ul",{className:Ic.a.links},t.map(function(e){var t=ne()(e,["metadata","id"]);return r.a.createElement(bc,{key:t,link:e,isMe:n})})):null}}]),t}(r.a.PureComponent),yc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.onCallback,a=e.icon;return r.a.createElement("li",null,r.a.createElement("button",{onMouseDown:n,title:fe(t)},a,r.a.createElement(oe.e,{size:"h6",spacing:"none",color:"slate"},fe(t))))}}]),t}(r.a.PureComponent),Tc=r.a.createContext({}),jc=n(401),Ac=n.n(jc),Rc=n(94),Cc=n.n(Rc),Nc=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={isExpanded:!1},n.node=void 0,n.assignNode=function(e){return n.node=e},n.handleClick=function(e){n.node&&n.node.contains(e.target)||n.setState({isExpanded:!1})},n.toggleExpanded=function(){n.setState(function(e){return{isExpanded:!e.isExpanded}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e=this.props,t=e.rootUrl,n=e.threadUrl,a=e.message,o=e.isThread,s=e.ownMessage,i=e.onDeleteMessageClick,c=e.onSetToEdit,u=e.enableThreads,l=e.attachments,d=e.role,m=this.state.isExpanded,f=o?"Reply to thread":"Start a thread",h=Oo()(l,{label:"original"}),_="staff"===d,v=this.context.shouldShowAbove&&this.context.shouldShowAbove(a.message_id),E=Re()(Cc.a.moreOptions,Object(Q.a)({},Cc.a.above,v));return r.a.createElement("div",{ref:this.assignNode},r.a.createElement("ul",{className:Cc.a.messageMenu},!!h&&r.a.createElement("li",{"data-ref":"expand-btn",className:Cc.a.menuItem},r.a.createElement(oe.n,{content:fe("Download or View Full Size"),direction:"top",trigger:r.a.createElement("a",{href:h.url,title:fe("Download or View Full Size"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Ce.v,{size:"sm",color:"silver",title:"Reply"}))})),u&&r.a.createElement("li",{"data-ref":"reply-btn",className:Cc.a.menuItem},r.a.createElement(oe.n,{content:f,direction:"top",trigger:r.a.createElement(p.b,{to:n,title:fe(f)},r.a.createElement(Ce.n,{size:"sm",color:"silver",title:"Reply"}))})),r.a.createElement("li",{className:Cc.a.menuItem},r.a.createElement(oe.n,{content:"More options",direction:"top",trigger:r.a.createElement("button",{onClick:this.toggleExpanded,title:fe("More Options")},r.a.createElement(Ce.E,{size:"sm",color:"silver",title:fe("More Options")}))}))),m&&r.a.createElement("div",{className:E},r.a.createElement("ul",{className:Cc.a.moreOptionsList},s&&r.a.createElement(yc,{title:"Edit",onCallback:c,icon:r.a.createElement(Ce.u,{size:"sm",color:"cerulean",title:fe("Edit Message")})}),(_||s)&&r.a.createElement(yc,{title:"Delete",onCallback:i,icon:r.a.createElement(Ce.M,{size:"sm",color:"red",title:fe("Delete Message")})}),r.a.createElement(Ac.a,{component:"a","data-clipboard-text":"".concat(k.REACT_APP_STUDENT_HUB_HOME).concat(t,"?messageId=").concat(a.message_id)},r.a.createElement(yc,{title:"Copy Link",onCallback:function(e){return e.preventDefault()},icon:r.a.createElement(Ce.z,{size:"sm",color:"cerulean",title:fe("Copy Link")})})))))}}]),t}(r.a.PureComponent);Nc.contextType=Tc,Nc.defaultProps={enableThreads:!0};var kc=Nc,Pc=n(402),Lc=n.n(Pc),wc=n(277),xc=n.n(wc);var Mc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.profileList,n=e.me,a=e.parentRoomId,o=e.sizeSelection,s=function(e,t){var n=e.find(function(e){return(e&&e.id)===t.id}),a=n?[n]:[];return Lc()(e,function(e,n){var a=n&&n.id;return e.length<4&&a!==t.id?[].concat(Object(St.a)(e),[n]):e},a)}(t,n);return r.a.createElement("ul",{className:xc.a.avatarGrouping},s.map(function(e){if(!e)return null;var t=rn(void 0,e,a),n=t.avatarProps,s=t.id;return r.a.createElement("li",{key:s,className:xc.a.avatarItem},r.a.createElement(Vn,Object.assign({},n,{size:24,sizeSelection:o})))}))}}]),t}(r.a.PureComponent);Mc.defaultProps={sizeSelection:"sm"};var Dc=Mc,Uc=n(403),Fc=n.n(Uc),Gc=n(156),Bc=n.n(Gc),Hc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.profileList,n=e.replyCount,a=e.mostRecentTimestamp,o=e.threadUrl,s=e.me,i=e.showNotificationsBadge,c=e.mentionsCount,u=e.parentRoomId;return r.a.createElement("div",{className:Bc.a.threadLink},r.a.createElement(p.b,{to:o},i&&r.a.createElement("span",{className:Bc.a.badge},r.a.createElement(Pe,{mentionsCount:c})),r.a.createElement(Dc,{profileList:t,me:s,parentRoomId:u}),r.a.createElement(oe.l,{size:"xs"},r.a.createElement("span",{className:Bc.a.link},"".concat(n," ").concat(n>1?"Replies":"Reply")),r.a.createElement("span",{className:Bc.a.timestamp},"  ","Latest reply"," ",r.a.createElement("time",null,Fc()(a,Date.now()))," ","ago"))))}}]),t}(r.a.PureComponent),Vc=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.thread,n=e.profileList,a=e.threadUrl,o=e.me,s=e.threadRoom,i=e.unreads,c=t.last_message_at,u=t.message_count,l=!!i&&!!i.unread_count,d=i?i.mentions_count:0,m=ne()(s,"topic.room_id","");return r.a.createElement(Hc,{replyCount:u,profileList:n,mostRecentTimestamp:c,threadUrl:a,me:o,showNotificationsBadge:l,mentionsCount:d,parentRoomId:m})}}]),t}(r.a.Component),zc=Object(m.b)(function(){var e=Object(yt.a)(function(e,t){return t||$n},Xn,function(e,t){return e.map(function(e){return t[e]})}),t=vs();return function(n,a){var r=a.thread,o=a.profiles;return{threadRoom:t(n,r.thread_id),profileList:e(n,o),me:Ft(n),unreads:Rr(n,r.thread_id)}}})(Vc),Wc={cancelPendingMessage:tc.cancelPendingMessage,resendPendingMessage:tc.resendPendingMessage},Yc=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).retryClick=function(e){var t=n.props,a=t.message,r=t.resendPendingMessage;e.preventDefault(),r(a)},n.cancelClick=function(e){var t=n.props,a=t.message,r=t.cancelPendingMessage;e.preventDefault(),r(a)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(oe.l,{size:"sm"},r.a.createElement(oe.k,{type:"inline",size:"half"},r.a.createElement(Ce.O,{size:"sm",color:"red"})),fe("Not delivered"),".\xa0",r.a.createElement(oe.g,{href:"#",onClick:this.retryClick,"data-ref":"retry"},fe("Try Again")),"\xa0or\xa0",r.a.createElement(oe.g,{href:"#",onClick:this.cancelClick,"data-ref":"cancel"},fe("Delete Message")))}}]),t}(r.a.Component),Kc=Object(m.b)(void 0,Wc)(Yc),qc=n(85),Jc=n.n(qc);var Xc=Kn()(function(e){var t=e.width,n=e.height,a=e.maxWidth,r=e.maxHeight,o=t/n,s=Math.min(n,r);return{width:Math.round(s*o),height:s,maxWidth:a,maxHeight:r}},function(e){var t=e.width,n=e.height,a=e.maxWidth,r=e.maxHeight,o=t/n,s=Math.min(a,t);return{width:s,height:Math.round(s/o),maxWidth:a,maxHeight:r}});var $c=n(157),Qc=n.n($c),Zc=function(e){var t=e.attachments,n=e.maxHeight,o=void 0===n?1/0:n,s=Oo()(t,{label:"mobile"})||Oo()(t,{label:"original"}),i=Object(a.useRef)(null),c=function(e,t,n){var r=Object(a.useState)(512),o=Object(ba.a)(r,2),s=o[0],i=o[1],c=ne()(t,"dimensions.width",512),u=ne()(t,"dimensions.height",384),l=I()(function(){if(e.current){var t=e.current.getBoundingClientRect();i(t.width)}},100),d=function(){window.removeEventListener("resize",l)};Object(a.useEffect)(function(){return l(),window.addEventListener("resize",l),function(){d()}});var m=Xc({width:c,height:u,maxWidth:s,maxHeight:n});return{width:m.width,height:m.height,clearResizeListener:d}}(i,s,o),u=c.width,l=c.height,d=function(e){var t=Object(a.useState)(!1),n=Object(ba.a)(t,2),r=n[0],o=n[1];return{isLoaded:r,handleLoad:function(){o(!0),je()(e)&&e()}}}(c.clearResizeListener),m=d.isLoaded,p=d.handleLoad,f=Re()(Qc.a.staticImage,Object(Q.a)({},Qc.a.loaded,m)),h=Re()(Qc.a.placeholder,Object(Q.a)({},Qc.a.loaded,m)),_=m?{}:{width:"".concat(u,"px"),height:"".concat(l,"px")};return r.a.createElement("div",{ref:i},r.a.createElement("div",{className:h,style:_},r.a.createElement(oe.h,{busy:!m},r.a.createElement("img",{"data-testid":"image",className:f,src:s.url,alt:"user generated content",onLoad:p}))))},eu=function(e){var t=e.attachments,n=e.maxImageHeight;return t&&t.length?r.a.createElement(Zc,{attachments:t,maxHeight:n}):null},tu=xn()(function(e){return""===e.replace(ft,"").replace(pt,"")}),nu=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).preventScrollProp=function(e){e.stopPropagation()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.onProfileClick,a=t.onSetToEdit,o=t.onAssignNode,s=t.onOpenModal,i=t.message,c=t.isMe,u=t.showMenu,l=t.threadUrl,d=t.rootUrl,m=t.role,p=i.links,f=i.content,h=i.mentions,_=i.attachments,v=ve(i.room_id),E=Ee(i.room_id),g=f&&tu(f),b=i.thread?i.thread.participants:[],O=ne()(i,"failed",!1),I=i.thread&&!!i.thread.message_count,S=!v&&!E,y=Re()(Jc.a.bottom,Object(Q.a)({},Jc.a.failedPendingActions,O)),T=Re()(Jc.a.wrapper,(e={},Object(Q.a)(e,Jc.a.failedPendingMessage,O),Object(Q.a)(e,Jc.a.emojiMessage,g),e));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:T,onScroll:this.preventScrollProp},r.a.createElement("div",{className:Jc.a.messageContent},r.a.createElement(rs,{content:f,mentions:h,isMe:c,onProfileClick:n}),!!p&&r.a.createElement(Sc,{links:p,isMe:c}),!!_&&r.a.createElement(eu,{attachments:_,maxImageHeight:parseInt(Jc.a.maxImageHeight,10)})),u&&!O&&r.a.createElement("div",{className:Jc.a.menuContainer,ref:o},r.a.createElement(kc,{isThread:v,message:i,onDeleteMessageClick:s,onSetToEdit:a,ownMessage:c,rootUrl:d,threadUrl:l,role:m,enableThreads:S,attachments:_}))),I&&!O&&r.a.createElement("div",{className:y},r.a.createElement(zc,{thread:i.thread,profiles:b,threadUrl:l})),O&&r.a.createElement("div",{className:y},r.a.createElement(Kc,{message:i})))}}]),t}(r.a.Component);nu.defaultProps={onRetryClick:_.a,onCancelClick:_.a};var au=nu,ru=n(404),ou=n.n(ru),su=n(214),iu=n(405),cu=n.n(iu),uu=n(153),lu=(n(676),n(208)),du=n.n(lu),mu=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.suggestion,t=e.id,n=e.display,a=e.photo_url,o=e.type,s={firstName:n,lastName:"",photoUrl:a,size:24,role:o,userId:t},i=e.id===he.id,c=i?"@"+n:n;return r.a.createElement("div",{className:du.a.mentionSuggestion},r.a.createElement("span",{className:du.a.avatar},i?r.a.createElement("span",{className:du.a.channel},r.a.createElement(Ce.L,{size:"sm"})):r.a.createElement(Hn,s)),r.a.createElement(oe.l,{size:"sm",spacing:"none"},c),r.a.createElement(la,{type:o}))}}]),t}(r.a.PureComponent),pu=n(215),fu=function(e){var t=Object(a.useState)(),n=Object(ba.a)(t,2),r=n[0],o=n[1],s="left",i="right",c="rtl"===getComputedStyle(document.body).direction;return Object(a.useEffect)(function(){o("start"===e?c?i:s:"end"===e?c?s:i:e)},[e,c,i,s]),r},hu=function(e){var t=e.children,n=e.onClose,s=e.direction,i=void 0===s?"bottom":s,c=e.open,u=void 0!==c&&c,l=e.trigger,d=e.referenceElement,m=Object(a.useRef)();!function(e,t){var n=["mousedown","touchstart"],r=Object(a.useRef)(t);Object(a.useEffect)(function(){r.current=t}),Object(a.useEffect)(function(){var t=function(t){e.current&&r.current&&!e.current.contains(t.target)&&r.current(t)};return n.map(function(e){return document.addEventListener(e,t)}),function(){n.map(function(e){return document.removeEventListener(e,t)})}},[n,e])}(m,n),function(e){var t=function(t){return 27===t.keyCode&&e()};Object(a.useEffect)(function(){return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}})}(n);var p=Re()("vds-popover"),f=Re()("vds-tail","vds-tail--inverse"),h=r.a.createElement(pu.c,null,function(e){var t=e.ref;return r.a.createElement("span",{"aria-describedby":"vds-popover","aria-expanded":u,"aria-haspopup":!0,ref:t},l)}),_=r.a.createElement(pu.b,{placement:fu(i),referenceElement:d},function(e){var n=e.ref,a=e.placement,o=e.style,s=e.arrowProps;return r.a.createElement("span",{ref:m},r.a.createElement("span",{className:p,"data-placement":a,id:"vds-popover",ref:n,role:"dialog",style:o},r.a.createElement("span",{className:f,ref:s.ref,style:s.style}),t))});return r.a.createElement(pu.a,null,h,u&&Object(o.createPortal)(_,document.body))},_u=n(107),vu=n.n(_u);var Eu,gu=function(e){var t,n=e.showKey,a=Re()(vu.a.markdownKey,(t={},Object(Q.a)(t,vu.a.fadeIn,n),Object(Q.a)(t,vu.a.fadeOut,!n),t));return r.a.createElement("div",{className:vu.a.markdownKeyContainer},r.a.createElement("ul",{className:a},r.a.createElement("li",null,"**",r.a.createElement("b",null,"bold"),"**"),r.a.createElement("li",null,"_",r.a.createElement("i",null,"italics"),"_"),r.a.createElement("li",null,"~strike~"),r.a.createElement("li",null,">quote"),r.a.createElement("li",null,r.a.createElement("span",{className:vu.a.code},"`code`")),r.a.createElement("li",null,r.a.createElement("span",{className:vu.a.code},"```code block```"))))},bu=function(){return r.a.createElement(oe.f,{size:"md",color:"white",title:"Send"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},r.a.createElement("path",{fill:"#FFFFFF",d:"M8,17 L8,23.4198002 L23.6640227,16 L8,8.58019979 L8,15 L17,15 C17.5522847,15 18,15.4477153 18,16 C18,16.5522847 17.5522847,17 17,17 L8,17 Z M6,7 C6,6.26588597 6.76463972,5.78199797 7.42808634,6.09626216 L26.4280863,15.0962622 C27.1906379,15.4574708 27.1906379,16.5425292 26.4280863,16.9037378 L7.42808634,25.9037378 C6.76463972,26.218002 6,25.734114 6,25 L6,7 Z"})))},Ou=function(){return r.a.createElement(oe.f,{size:"md",color:"white",title:"AddEmoji"},r.a.createElement("svg",{width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"icon/emoji-add",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.a.createElement("path",{d:"M16,6 C16.2962004,6 16.5909642,6.01290548 16.8837119,6.03857238 C17.4338861,6.08680937 17.8407866,6.57191748 17.7925496,7.12209167 C17.7443126,7.67226586 17.2592045,8.07916635 16.7090303,8.03092937 C16.4743517,8.01035371 16.2378706,8 16,8 C11.581722,8 8,11.581722 8,16 C8,20.418278 11.581722,24 16,24 C20.418278,24 24,20.418278 24,16 C24,14.8267496 23.7479099,13.6910876 23.2674884,12.6506178 C23.0359677,12.1492032 23.2547599,11.5550417 23.7561745,11.323521 C24.2575891,11.0920003 24.8517506,11.3107925 25.0832713,11.8122071 C25.6844478,13.1142014 26,14.5357591 26,16 C26,21.5228475 21.5228475,26 16,26 C10.4771525,26 6,21.5228475 6,16 C6,10.4771525 10.4771525,6 16,6 Z M19.2313724,17.3380041 C19.5846647,16.9398064 20.2151926,16.8856558 20.6396958,17.2170552 C21.0641991,17.5484547 21.121927,18.13991 20.7686347,18.5381077 C17.8622842,21.8138713 14.4921386,21.8138713 11.2693309,18.5784765 C10.8922707,18.1999437 10.9137363,17.606356 11.3172757,17.2526615 C11.7208151,16.8989669 12.3536161,16.9191024 12.7306763,17.2976352 C15.1495373,19.7259434 17.1127249,19.7259434 19.2313724,17.3380041 Z M13,13 C13.5522847,13 14,13.4477153 14,14 C14,14.5522847 13.5522847,15 13,15 C12.4477153,15 12,14.5522847 12,14 C12,13.4477153 12.4477153,13 13,13 Z M19,13 C19.5522847,13 20,13.4477153 20,14 C20,14.5522847 19.5522847,15 19,15 C18.4477153,15 18,14.5522847 18,14 C18,13.4477153 18.4477153,13 19,13 Z M21,6 C21.5128358,6 21.9355072,6.38604019 21.9932723,6.88337887 L22,7 L22,8 L23,8 C23.5128358,8 23.9355072,8.38604019 23.9932723,8.88337887 L24,9 C24,9.51283584 23.6139598,9.93550716 23.1166211,9.99327227 L23,10 L22,10 L22,11 C22,11.5128358 21.6139598,11.9355072 21.1166211,11.9932723 L21,12 C20.4871642,12 20.0644928,11.6139598 20.0067277,11.1166211 L20,11 L20,10 L19,10 C18.4871642,10 18.0644928,9.61395981 18.0067277,9.11662113 L18,9 C18,8.48716416 18.3860402,8.06449284 18.8833789,8.00672773 L19,8 L20,8 L20,7 C20,6.52661307 20.3289337,6.13005271 20.7707092,6.02641071 L20.8833789,6.00672773 L21,6 Z",id:"Combined-Shape"}))))};function Iu(e){var t=uu.b.emojis[e.toLowerCase()]||{};return t.hasOwnProperty(1)&&(t=t[1]),t.native}!function(e){e.gif="image/gif",e.jpeg="image/jpeg",e.png="image/png"}(Eu||(Eu={}));var Su=function(e){return e.stopPropagation()},yu=function(e){switch(!0){case e<350:return 2;case e<500:return 5;default:return 25}};var Tu="pendingMessage",ju="pendingMentions";function Au(e){return{message:De.get(Tu,e)||"",mentions:De.get(ju,e)||{}}}var Ru=ai()(function(e,t,n){De.set(Tu,e,n),De.set(ju,t,n)},250),Cu=n(408),Nu=n.n(Cu),ku=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.suggestion,t=e.native,n=e.colons;return r.a.createElement("div",{className:Nu.a.mentionSuggestion},r.a.createElement(oe.l,{size:"sm",spacing:"none"},"".concat(t," ").concat(n)))}}]),t}(r.a.PureComponent),Pu=n(57),Lu=n.n(Pu),wu=n(409),xu=n.n(wu),Mu={background:"#F5FCFE",borderRadius:4,padding:"4px 0px"},Du=/($a)/,Uu=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={userInput:n.props.initialUserInput||"",mentions:n.props.initialMentions||{},isSocketConnected:!0,attachments:n.props.initialAttachments||[],showEmojiPicker:!1},n.formRef=void 0,n.inputRef=void 0,n.fileRef=void 0,n.mentionsCallback=void 0,n.isSocketConnectedTimeout=void 0,n.confirmMentions=ai()(function(e){var t=n.state.mentions;Object.keys(t).forEach(function(a){!e.includes("[@".concat(t[a],"](").concat(at.UID_PREFIX).concat(a,")"))&&n.setState({mentions:cs()(t,[a])})})},250,{leading:!0,trailing:!0}),n.queryParticipants=ai()(function(e,t){var a=n.props,r=a.onSearch,o=a.participants;r&&r(e),n.mentionsCallback=t,n.updateMentionsSuggestions(o)},250,{leading:!0,trailing:!0}),n.updateMentionsSuggestions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.mentionsCallback){var t=yu(window.innerHeight),a=cu()(e,t)[0]||[];n.mentionsCallback(a)}},n.onReload=function(){return window.location.reload()},n.onChange=function(e){n.confirmMentions(e.target.value),n.setState({userInput:e.target.value},function(){var e=n.convertColonSyntaxEmoji();Ru(e,n.state.mentions,n.props.roomId)})},n.onKeyDown=function(e){e.shiftKey||e.keyCode!==et.ENTER||n.onSubmit(e)},n.onSubmit=function(e){var t=n.state,a=t.userInput,r=t.mentions,o=n.props,s=o.isSocketConnected,i=o.onSubmit;a&&(e.preventDefault(),s&&(i(a.trim(),Object.keys(r)),n.setState({userInput:"",mentions:{}}),Ru("",{},n.props.roomId)))},n.addMention=function(e,t){var a=n.props.onSelectMention;n.setState(function(n){return{mentions:Object(N.a)({},n.mentions,Object(Q.a)({},e,t))}}),n.mentionsCallback=void 0,a&&a()},n.displayTransform=function(e,t){return"@".concat(t)},n.renderMentionSuggestion=function(e){return r.a.createElement(mu,{suggestion:e})},n.renderEmojiSuggestion=function(e){return r.a.createElement(ku,{suggestion:e})},n.focusInput=function(){n.inputRef.current&&n.inputRef.current.focus()},n.clickFileAdd=function(e){e.preventDefault(),n.fileRef.current&&n.fileRef.current.click()},n.onAddFile=function(e){var t=n.props.onAddFile,a=e.target.files[0];je()(t)&&t(a),e.target.value=null},n.clickEmojiAdd=function(e){e.preventDefault(),n.setState({showEmojiPicker:!0})},n.handleSelectEmoji=function(e){for(var t=n.state,a=t.userInput,r=t.mentions,o=n.inputRef.current?n.inputRef.current.value:a,s=n.inputRef.current?ya(n.inputRef.current):[o.length,o.length],i=Object(ba.a)(s,2),c=i[0],u=i[1],l=Object.keys(r),d=c,m=u,p=function(){var e=h[f],t="@".concat(r[e]),n="[@".concat(r[e],"](").concat(at.UID_PREFIX).concat(e,")"),a=o.indexOf(t),s=[{cursor:c,insert:d},{cursor:u,insert:m}].map(function(e){if(e.cursor>a+t.length)return e.insert+(n.length-t.length);if(e.cursor>a){var r=e.cursor-a;return e.insert+(n.length-r)}return e.insert}),i=Object(ba.a)(s,2);d=i[0],m=i[1]},f=0,h=l;f<h.length;f++)p();var _=a.slice(0,d)+e.native+a.slice(m),v=c+e.native.length;n.setState({userInput:_},function(){n.inputRef.current&&n.inputRef.current.setSelectionRange(v,v)}),n.handleCloseEmojiPicker(),n.focusInput()},n.handleCloseEmojiPicker=function(){n.setState({showEmojiPicker:!1})},n.emojiMentionSearch=function(e,t){t((e.length>=2?uu.b.search(e):[]).filter(function(e){return!!e.native}).map(function(e){return{id:e.id,display:e.native,colons:e.colons,native:e.native}}).slice(0,yu(window.innerHeight)))},n.convertColonSyntaxEmoji=function(){var e=n.state.userInput,t=e.replace(/:([\w\-+]+):/g,function(e,t){return Iu(t)||e});if(e===t)return e;for(var a,r=n.inputRef.current?n.inputRef.current.value:e,o=n.inputRef.current?ya(n.inputRef.current):[r.length,r.length],s=Object(ba.a)(o,2),i=s[0],c=s[1],u=i,l=c,d=/:([\w\-+]+):/g,m=function(){var e=a[0],t=Iu(a[1]);if(!t)return"continue";var n=[{cursor:i,updated:u},{cursor:c,updated:l}].map(function(n){if(n.cursor>a.index+e.length)return n.updated-(e.length-t.length);if(n.cursor>a.index){var r=n.cursor-a.index;return n.updated-(r-t.length)}return n.updated}),r=Object(ba.a)(n,2);u=r[0],l=r[1]};a=d.exec(r);)m();return n.setState({userInput:t},function(){n.inputRef.current&&n.inputRef.current.setSelectionRange(u,l)}),t},n.formRef=Object(a.createRef)(),n.inputRef=Object(a.createRef)(),n.fileRef=Object(a.createRef)(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialUserInput,n=e.roomId;if(e.requireManualFocus||this.focusInput(),this.checkSocketConnection(),!t){var a=Au(n),r=a.message,o=a.mentions;this.setState({userInput:r,mentions:o})}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.participants,a=t.roomId,r=t.isSocketConnected,o=t.requireManualFocus;if(e.participants!==n&&this.updateMentionsSuggestions(n),e.roomId!==a){Ru.flush();var s=Au(this.props.roomId),i=s.message,c=s.mentions;this.setState({userInput:i,mentions:c}),o||this.focusInput()}e.isSocketConnected!==r&&this.checkSocketConnection()}},{key:"componentWillUnmount",value:function(){Ru.flush(),this.isSocketConnectedTimeout&&clearTimeout(this.isSocketConnectedTimeout)}},{key:"checkSocketConnection",value:function(){this.props.isSocketConnected?(this.isSocketConnectedTimeout&&clearTimeout(this.isSocketConnectedTimeout),this.setState({isSocketConnected:!0})):this.setSocketConnectionTimeout()}},{key:"setSocketConnectionTimeout",value:function(){var e=this;this.isSocketConnectedTimeout&&clearTimeout(this.isSocketConnectedTimeout),this.isSocketConnectedTimeout=setTimeout(function(){e.props.isSocketConnected||e.setState({isSocketConnected:!1})},3e3)}},{key:"render",value:function(){var e,t=this.props,n=t.me,a=t.roomId,o=t.actionButtons,s=t.allowMentions,i=t.displayMarkdownKey,c=this.state,u=c.userInput,l=c.isSocketConnected,d=Re()(Lu.a.chatInput,Object(Q.a)({},Lu.a.disconnected,!l)),m=this.formRef.current?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.getBoundingClientRect(),a={input:{overflow:"auto",maxHeight:150}},r={suggestions:{list:{bottom:"".concat(t.innerHeight-n.top-20,"px"),left:"".concat(n.x,"px"),width:"".concat(n.width,"px")}}};if(!e)return a;var o=n.top<t.innerHeight-n.bottom;return Object(N.a)({},a,!o&&r)}(this.formRef.current):{};return n&&(e={firstName:n.first_name,lastName:n.last_name,photoUrl:n.photo_url,userId:n.id,role:Et(n.roles,a)}),r.a.createElement("form",{onSubmit:this.onSubmit,ref:this.formRef},r.a.createElement("label",{htmlFor:"userInput",className:Lu.a.inputLabel},"Start chatting!"),!l&&r.a.createElement(oe.l,{size:"sm",spacing:"half",color:"silver"},"No internet connection, attempting to reconnect...","  ",r.a.createElement(oe.g,{href:"",onClick:this.onReload},"Reload")),r.a.createElement("div",{className:Lu.a.chatInputWrapperGrid},r.a.createElement("div",{className:Lu.a.mobileFileButtonWrapper},r.a.createElement(oe.a,{label:fe("Add file"),variant:"secondary",icon:r.a.createElement(Ce.e,null),onClick:this.clickFileAdd,iconOnly:!0})),r.a.createElement("div",{className:d,onScroll:Su},r.a.createElement("div",{className:Lu.a.avatarContainer},!!n&&r.a.createElement(oe.n,{direction:"top",content:"You",trigger:r.a.createElement(ic,{userId:n.id},r.a.createElement(Vn,e))})),r.a.createElement("div",null,r.a.createElement(su.b,{inputRef:this.inputRef,id:"userInput",value:u,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:fe("Start chatting!"),suggestionsPortalHost:document.body,classNames:xu.a,style:m},r.a.createElement(su.a,{trigger:s?rt["@"]:rt.IMPOSSIBLE_MATCH,data:this.queryParticipants,renderSuggestion:this.renderMentionSuggestion,appendSpaceOnAdd:!0,displayTransform:this.displayTransform,markup:"[@__display__](user://__id__)",onAdd:this.addMention,style:Mu}),r.a.createElement(su.a,{trigger:rt[":"],data:this.emojiMentionSearch,renderSuggestion:this.renderEmojiSuggestion,appendSpaceOnAdd:!0,regex:Du,markup:"__display__"}))),!o&&r.a.createElement("div",{className:Lu.a.controlsContainer},r.a.createElement("span",{className:Lu.a.mobileSendButton},r.a.createElement(oe.a,{label:"Send",variant:"primary",onClick:this.onSubmit,icon:r.a.createElement(bu,null),iconOnly:!0})),r.a.createElement("input",{type:"file",className:Lu.a.fileInput,ref:this.fileRef,"data-testid":"file-input",onChange:this.onAddFile,accept:ie()(Eu).join(", ")}),r.a.createElement("span",{className:Lu.a.desktopFileButtonWrapper},r.a.createElement(hu,{open:this.state.showEmojiPicker,onClose:this.handleCloseEmojiPicker,direction:"top",referenceElement:void 0,trigger:r.a.createElement(oe.n,{direction:"top",content:"Add emoji",trigger:r.a.createElement("button",{onClick:this.clickEmojiAdd,className:Lu.a.desktopFileButton,"data-testid":"emoji-add-button"},r.a.createElement(Ou,null))})},r.a.createElement(uu.a,{autoFocus:!0,native:!0,color:"#017A9B",onSelect:this.handleSelectEmoji,sheetSize:32,showPreview:!1,showSkinTones:!1}))),r.a.createElement("span",{className:Lu.a.desktopFileButtonWrapper},r.a.createElement(oe.n,{direction:"top",content:"Upload file",trigger:r.a.createElement("button",{onClick:this.clickFileAdd,className:Lu.a.desktopFileButton,"data-testid":"file-upload-button"},r.a.createElement(Ce.e,{size:"md"}))}))))),i&&r.a.createElement(gu,{showKey:u.length>2}),!!o&&o)}}]),t}(r.a.Component);Uu.defaultProps={participants:[],allowMentions:!0,displayMarkdownKey:!0};var Fu=Uu,Gu=n(279),Bu=n.n(Gu),Hu=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.onSearch,a=e.onSelectMention,o=e.onSetToReadOnly,s=e.participants,i=e.roomId,c=e.message,u=e.isSocketConnected,l=e.mentions;return r.a.createElement("div",{className:Bu.a.editInput},r.a.createElement(Fu,{onSubmit:t,onSearch:n,onSelectMention:a,participants:s,roomId:i,initialUserInput:c.content,initialMentions:l,isSocketConnected:u,displayMarkdownKey:!1,actionButtons:r.a.createElement("div",{className:Bu.a.actionButtons},r.a.createElement(oe.a,{label:fe("Save"),variant:"primary",type:"submit",small:!0}),r.a.createElement(oe.a,{label:fe("Cancel"),variant:"secondary",onClick:o,small:!0}))}))}}]),t}(r.a.Component),Vu=function(e){return ne()(e,"sockets.connected")||!1};var zu={editMessage:tc.editMessage,getParticipants:vo.getParticipants,searchParticipants:vo.searchParticipants,resetSearchParticipants:vo.resetSearchParticipants},Wu=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={mentions:{}},n.onSubmit=function(e,t){var a=n.props,r=a.editMessage,o=a.message,s=a.onSetToReadOnly,i=o.message_id_str;r(o.room_id,i,{content:e,mentions:t,version:o.version}),s()},n.searchParticipants=function(e){var t=n.props,a=t.parentRoomId,r=t.roomId;(0,t.searchParticipants)(a||r,e)},n.onSelectMention=function(){var e=n.props,t=e.parentRoomId,a=e.roomId;(0,e.resetSearchParticipants)(t||a)};var a=e.message,r=a.content,o=a.mentions,s=function(e){for(var t,n={},a=/\[@([^\]]+)\]\(user:\/\/([\w-]+)\)/g;t=a.exec(e);){var r=t,o=Object(ba.a)(r,3),s=o[1];n[o[2]]=s}return n}(r||"");return n.state={mentions:ou()(s,o)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.mentions,t=this.props,n=t.searchedParticipants,a=t.onSetToReadOnly,o=t.message,s=t.roomId,i=t.isSocketConnected;return r.a.createElement(Hu,{participants:n,message:o,onSubmit:this.onSubmit,onSearch:this.searchParticipants,onSelectMention:this.onSelectMention,onSetToReadOnly:a,roomId:s,isSocketConnected:i,mentions:e})}}]),t}(r.a.Component),Yu=Object(m.b)(function(e,t){var n=t.parentRoomId,a=t.roomId;return{searchedParticipants:In(e,n||a),isSocketConnected:Vu(e)}},zu)(Wu),Ku=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={editable:!1},n.setToEdit=function(){n.setState({editable:!0})},n.setToReadOnly=function(){return n.setState({editable:!1})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.isMe,a=e.role,o=e.onProfileClick,s=e.roomId,i=e.showMenu,c=e.onAssignNode,u=e.onOpenModal,l=e.parentRoomId,d=e.threadUrl,m=e.rootUrl;return this.state.editable?r.a.createElement(Yu,{message:t,onSetToReadOnly:this.setToReadOnly,parentRoomdId:l,roomId:s,messageId:t.message_id}):r.a.createElement(au,{message:t,showMenu:i,onSetToEdit:this.setToEdit,isMe:n,role:a,rootUrl:m,onProfileClick:o,onAssignNode:c,onOpenModal:u,threadUrl:d})}}]),t}(r.a.PureComponent),qu=n(71),Ju=n.n(qu),Xu=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showMenu:!1,isDeleteMessageModalOpen:!1},n.node=void 0,n.assignNode=function(e){return n.node=e},n.onHoverIn=function(){return n.setState({showMenu:!0})},n.onHoverOut=function(){return n.closeMenu()},n.closeMenu=function(){n.setState({showMenu:!1},function(){n.node=void 0})},n.onProfileClick=function(){var e=n.props;(0,e.onProfileClick)(e.message.user_id)},n.openModal=function(){n.setState({isDeleteMessageModalOpen:!0})},n.closeModal=function(){n.setState({isDeleteMessageModalOpen:!1}),n.closeMenu()},n.confirmDeleteMessage=function(){var e=n.props,t=e.message,a=t.message_id,r=t.room_id,o=e.onDeleteMessage;je()(o)&&o(a,r),n.closeModal()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.hasOlderSibling,o=n.message,s=n.me,i=n.rootUrl,c=n.onProfileClick,u=n.parentRoomId,l=n.roomId,d=n.selected,m=n.onSetRefEl,p=n.onPopupProfile,f=n.onOpen,h=n.onClose,_=this.state,v=_.showMenu,E=_.isDeleteMessageModalOpen,g=rn(o._participant,o._profile,l),b=g.role,O=g.name,I=g.avatarProps,S=function(e,t){var n=e.replace(/\/$/,""),a=e.includes("/threads"),r=t.thread?t.thread.thread_id:"";return ne()(t,"thread.message_count",0)?a?function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"?contextType=room")}(n,t.room_id,r):function(e,t){return"".concat(e,"/").concat(t,"?contextType=room")}(n,r):function(e,t){return"".concat(e,"/new/").concat(t,"?contextType=room")}(n,t.message_id)}(i,o),y=!Oe(i),T=!!s&&s.id===o.user_id,j=Re()(Ju.a.container,(e={},Object(Q.a)(e,Ju.a.me,T),Object(Q.a)(e,Ju.a.bot,"bot"===b),Object(Q.a)(e,Ju.a.failedPending,ne()(o,"failed",!1)),Object(Q.a)(e,Ju.a.selected,d),Object(Q.a)(e,Ju.a.hasOlderSibling,a),e)),A=function(e){f&&m&&p&&y&&!T&&(f(),m(e.target),p(o._profile))},R=function(){h&&h()};return r.a.createElement("div",{className:j,"data-user-message":"true","data-message-id":o.message_id,onMouseEnter:this.onHoverIn,onFocus:this.onHoverIn,onBlur:this.onHoverOut,onMouseLeave:this.onHoverOut},r.a.createElement("div",{className:Ju.a.header},r.a.createElement("div",{className:Ju.a.name},r.a.createElement(oe.l,{size:"sm",spacing:"none"},r.a.createElement(ic,{userId:I.userId},O))),r.a.createElement(la,{type:b}),r.a.createElement(oe.l,{size:"sm",spacing:"none",color:"silver"},r.a.createElement("time",{dateTime:o.created_at,title:String(new Date(o.created_at))},(t=o.created_at,Ye()(t,"h:mm A"))))),!ue()(I)&&r.a.createElement("div",{"data-tst":"trigger",className:Ju.a.avatar,onMouseOver:A,onFocus:A,onMouseLeave:R,onBlur:R},r.a.createElement(ic,{userId:I.userId},r.a.createElement(Vn,Object(N.a)({},I,{userId:o.user_id})))),r.a.createElement("div",{className:Ju.a.messageWrapper},r.a.createElement(Ku,{isMe:T,message:o,onAssignNode:this.assignNode,onOpenModal:this.openModal,onProfileClick:c,parentRoomId:u,role:b,roomId:l,rootUrl:i,showMenu:v,threadUrl:S})),E&&r.a.createElement(pc,{isOpen:!0,onRequestClose:this.closeModal},r.a.createElement(_c,{closeModal:this.closeModal,confirmDeleteMessage:this.confirmDeleteMessage})))}}]),t}(r.a.Component),$u=n(410),Qu=n.n($u),Zu=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.thread,n=e.rootUrl,a=e.roomTitle,o=e.onProfileClick,s=e.me,i=Object(N.a)({},t.topic,{_participant:t._threadAuthorParticipant,_profile:t._threadAuthorProfile});return r.a.createElement("div",{className:Qu.a.wrapper},r.a.createElement(oe.e,{size:"h6",as:"h3",spacing:"2x"},a),r.a.createElement(Xu,{rootUrl:n,message:i,me:s,onProfileClick:o,roomId:t.thread_id}))}}]),t}(r.a.PureComponent),el=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleProfileClick=function(e){var t=n.props,a=t.history,r=t.rootUrl;a.push(Se(r,e))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.thread,n=e.rootUrl,a=e.roomTitle,o=e.me;return r.a.createElement(Zu,{thread:t,rootUrl:n,roomTitle:a,onProfileClick:this.handleProfileClick,me:o})}}]),t}(r.a.Component),tl=Object(A.g)(Object(m.b)(function(e,t){var n=t.roomId;return{roomTitle:Yr(e,n),me:Ft(e)}})(el)),nl=n(411),al=n.n(nl);function rl(e){var t=e.toggleNavSidebar;return e.isMobile?r.a.createElement("button",{onClick:t,className:al.a.navToggle},r.a.createElement(Ce.D,{size:"md",color:"silver",title:"Nav Menu"})):null}var ol=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.LayoutConsumer,null,function(e){var t=e.toggleSidebar,n=e.isMobile;return r.a.createElement(rl,{toggleNavSidebar:t,isMobile:n})})}}]),t}(r.a.Component),sl=n(412),il=n.n(sl),cl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:il.a.emptyThreads},r.a.createElement(oe.e,{size:"h1",as:"h2"},"No threads"),r.a.createElement(oe.l,null,"You\u2019re not part of any threads yet! Reply to a message to create a new thread."))}}]),t}(r.a.PureComponent),ul=n(158),ll=n.n(ul),dl=250,ml=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).threadListRef=void 0,n.debouncedScroll=void 0,n.state={scrolledNearBottom:!1},n.handleScroll=function(e){var t=e.target,a=n.state.scrolledNearBottom,r=n.props.onNextPage,o=t.scrollHeight-t.offsetHeight-t.scrollTop<dl;o&&!a&&(n.setState({scrolledNearBottom:!0}),r()),!o&&a&&n.setState({scrolledNearBottom:!1})},n.threadListRef=r.a.createRef(),n.debouncedScroll=ai()(n.handleScroll,100),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.debouncedScroll.cancel()}},{key:"render",value:function(){var e=this.props,t=e.threads,n=e.rootUrl,a=e.loading,o=e.loadingNext,s=t&&t.length,i=!a&&!!s,c=!a&&!s;return r.a.createElement("div",{className:ll.a.threadListContainer},r.a.createElement("header",{className:ll.a.header},r.a.createElement(ol,null),r.a.createElement("span",null,r.a.createElement(oe.e,{size:"h5"},"All Threads"))),a&&r.a.createElement(oe.h,{busy:!0}),i&&r.a.createElement("ul",{className:ll.a.threadList,ref:this.threadListRef,onScroll:this.handleScroll},t.map(function(e){return e?r.a.createElement("li",{key:e.thread_id,className:ll.a.threadListItem},r.a.createElement(tl,{thread:e,rootUrl:n,roomId:e.topic.room_id})):null})),o&&r.a.createElement(oe.h,{busy:!0}),c&&r.a.createElement(cl,null))}}]),t}(r.a.PureComponent);ml.defaultProps={onNextPage:_.a};var pl=function(e){return r.a.createElement(f.LayoutConsumer,null,function(t){var n=t.isMobile;return r.a.createElement(ml,Object(N.a)({},e,{isMobile:n}))})},fl={getThreads:sc.getThreads,getNextThreads:sc.getNextThreads},hl=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleNextPage=function(){var e=n.props,t=e.getNextThreads,a=e.threads,r=ne()(a,"cursor")||void 0;r&&r.has_next&&r.next&&t(r.next)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getThreads)()}},{key:"render",value:function(){var e=this.props,t=e.threads,n=e.rootUrl,a=e.getThreadsStatus,o=e.getNextThreadsStatus,s=ne()(t,"threads")||[];return r.a.createElement(pl,{loading:wt(a),loadingNext:wt(o),rootUrl:n,threads:s,onNextPage:this.handleNextPage})}}]),t}(r.a.Component),_l=Object(m.b)(function(e){return{threads:hs(e),getThreadsStatus:gs(e,"getThreads"),getNextThreadsStatus:gs(e,"getNextThreads")}},fl)(hl),vl=n(265),El=n.n(vl),gl=n(413),bl=n.n(gl);function Ol(e,t){return"pending:".concat(Object(Hi.sha256)(e+t))}var Il=function(e,t){var n=e.content,a=void 0===n?"":n,r=t.content;return a===(void 0===r?"":r)},Sl=function(e){return e.reduce(function(e,t){if(de()(t))return e;if(!e.length)return[[[t]]];var n=Ia()(Ia()(Ia()(e)));if(!bl()(n.created_at,t.created_at))return function(e,t){return[].concat(Object(St.a)(e),[[[t]]])}(e,t);var a=n.user_id===t.user_id,r=El()(t.created_at,n.created_at);return a&&r<12e4?function(e,t){var n=Ia()(e),a=Ia()(Ia()(e));return[].concat(Object(St.a)(e.slice(0,e.length-1)),[[].concat(Object(St.a)(n.slice(0,n.length-1)),[[].concat(Object(St.a)(a),[t])])])}(e,t):function(e,t){var n=Ia()(e);return[].concat(Object(St.a)(e.slice(0,e.length-1)),[[].concat(Object(St.a)(n),[[t]])])}(e,t)},[])};function yl(e,t){var n=["@channel",t],a=e.mentions;return a&&a.reduce(function(e,t){return!(!e&&!n.includes(t))},!1)}var Tl=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=ne()(t,"thread.thread_id");return n&&e.push(n),e},[])},jl=function(e){return ne()(e,["messages","pendingById"])},Al=Object(yt.a)(Ct,Nt,kt,function(e,t,n){return{messages:e,participants:t,profiles:n}}),Rl=Object(yt.a)(function(e,t){return ne()(e,["messages","byRoomId",t])},jl,Al,function(e,t,n){if(e&&e.messages)return Object(N.a)({},e,{messages:e.messages.map(function(e){if(function(e){return pe()(String(e),"pending:")}(e))return function(e,t){return Object(Xt.a)(e,er,t)}(t[e],n);var a=ne()(n,["messages",e]);return ar(a,n)})})}),Cl=Object(yt.a)(Rl,function(e){if(e){var t=Sl(e.messages);return Object(N.a)({},e,{groupedMessages:t})}}),Nl=Object(yt.a)(function(e,t){return ne()(e,["messages","pendingById",t])||void 0},function(e){return e}),kl=Object(yt.a)(jl,function(e){return e||{}}),Pl=Object(yt.a)(function(e,t){return ne()(e,["messages","byId",t])},Al,function(e,t){if(e)return ar(e,t)}),Ll=Dt("messagesAsync"),wl={postMessage:tc.postMessage,getParticipants:vo.getParticipants,searchParticipantsToMention:vo.searchParticipantsToMention,resetSearchParticipantsToMention:vo.resetSearchParticipantsToMention,postImageMessage:tc.postImageMessage},xl=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e,t){var a=n.props,r=a.roomId,o=a.postMessage,s=a.messageId,i=a.onSubmit,c={content:e,mentions:t};return je()(i)?i(c):o(c,r,s)},n.searchParticipants=function(e){var t=n.props,a=t.parentRoomId,r=t.roomId;(0,t.searchParticipantsToMention)(a||r,e)},n.onSelectMention=function(){var e=n.props,t=e.parentRoomId,a=e.roomId;(0,e.resetSearchParticipantsToMention)(t||a)},n.uploadFile=function(e){var t=n.props,a=t.messageId,r=t.roomId,o=t.onSubmit;if(je()(o))return o({file:e});n.props.postImageMessage(e,r,a)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.roomId,n=e.me,a=e.searchedParticipants,o=e.isSocketConnected,s=e.allowMentions,i=e.requireManualFocus;return r.a.createElement(Fu,{onSubmit:this.onSubmit,onSearch:this.searchParticipants,onSelectMention:this.onSelectMention,me:n,roomId:t,participants:a,isSocketConnected:o,onAddFile:this.uploadFile,allowMentions:s,requireManualFocus:i},function(e){return r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{type:"button",onClick:e},"Cancel"))})}}]),t}(r.a.Component);xl.defaultProps={allowMentions:!0};var Ml=Object(m.b)(function(e,t){var n=t.parentRoomId,a=t.roomId;return{me:Ft(e),searchedParticipants:Sn(e,n||a),isSocketConnected:Vu(e)}},wl)(function(e){return r.a.createElement(f.LayoutConsumer,null,function(t){var n=t.isMobile;return r.a.createElement(xl,Object(N.a)({},e,{requireManualFocus:n}))})}),Dl=n(159),Ul=n.n(Dl),Fl=n(414),Gl=n.n(Fl);var Bl=function(){var e=oo(),t=e.isContextSidebarOpen,n=e.toggleContextSidebar;return t?null:r.a.createElement("div",{className:Gl.a.button},r.a.createElement(oe.n,{content:"Show channel details",direction:"bottom",trigger:r.a.createElement(oe.a,{label:"Show channel details",variant:"minimal",onClick:n,icon:r.a.createElement(Ce.y,{color:"silver"}),iconOnly:!0,small:!0})}))},Hl=n(160),Vl=n.n(Hl),zl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.backUrl,n=e.parentRoomTitle;return r.a.createElement("header",{className:Vl.a.threadHeader},r.a.createElement("div",{className:Vl.a.titleContainer},t&&r.a.createElement(p.b,{to:t},r.a.createElement(Ce.b,{size:"sm",spacing:"none"})),r.a.createElement("span",{className:Vl.a.title},r.a.createElement(oe.e,{size:"h5",spacing:"none"},fe("Thread"),"\xa0"),r.a.createElement(oe.l,{color:"silver"}," in ".concat(n)))),r.a.createElement("div",{className:Vl.a.headerRight},r.a.createElement(Bl,null)))}}]),t}(r.a.PureComponent),Wl=n(415),Yl=n.n(Wl),Kl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.attachments,t=Oo()(e,{label:"mobile"}),n=ne()(t,"dimensions.width",512),a=Oo()(e,{label:"desktop"}),o=ne()(a,"dimensions.width",1024),s=Oo()(e,{label:"original"}),i=ne()(s,"dimensions.width",1500);if(!t||!a||!s)return null;var c="calc(100vw - ".concat(440,"px)"),u="calc(100vw - ".concat(818,"px)");return r.a.createElement("img",{className:Yl.a.responsiveImage,"data-testid":"responsive-image",srcSet:"".concat(t.url," ").concat(n,"w,\n                 ").concat(a.url," ").concat(o,"w,\n                 ").concat(s.url," ").concat(i,"w"),src:t.url,alt:"user generated content",sizes:"(min-width: ".concat(900,"px) ").concat(c,",\n                (min-width: ").concat(1100,"px) ").concat(u,",\n                calc(100vw - 60px)")})}}]),t}(a.PureComponent),ql=n(95),Jl=n.n(ql),Xl=n(416),$l=n.n(Xl),Ql=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.attachments,t=Oo()(e,{label:"original"});return t?r.a.createElement("a",{className:$l.a.download,href:t.url,title:fe("Download or View Full Size"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Ce.v,{size:"sm"})):null}}]),t}(a.PureComponent),Zl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.author,a=e.authorProfile,o=e.timestamp,s=e.onProfileClick,i=e.mentions,c=e.roomId,u=e.attachments,l=rn(n,a,c),d=l.role,m=l.name,p=l.avatarProps,f=u&&u.length>0;return r.a.createElement("div",{className:Jl.a.message},r.a.createElement("div",{className:Jl.a.messageInner},r.a.createElement("div",{className:Jl.a.avatar},r.a.createElement(Vn,Object(N.a)({},p,{onProfileClick:s}))),r.a.createElement("div",{className:Jl.a.name},r.a.createElement(oe.l,{size:"xs",spacing:"none"},m),r.a.createElement(la,{type:d}),r.a.createElement(oe.l,{size:"xs",spacing:"none"},!!o&&r.a.createElement("time",{dateTime:o,title:String(new Date(o))},Ye()(o,"h:mm A")))),r.a.createElement("div",{className:Jl.a.content},f&&r.a.createElement("div",{className:Jl.a.imageWrapper},r.a.createElement("div",{className:Jl.a.downloadButtonWrapper},r.a.createElement(Ql,{attachments:u})),r.a.createElement(Kl,{attachments:u})),r.a.createElement(rs,{content:t||"",mentions:i,isMe:!1,onProfileClick:s}))))}}]),t}(r.a.PureComponent),ed=n(152),td=n.n(ed),nd=function(e){var t=Object(a.useRef)(void 0);return Object(a.useEffect)(function(){t.current=e}),t.current},ad=n(136),rd=n.n(ad),od=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!0},n.closeBanner=function(){return n.setState({isOpen:!1})},n.jumpToRecent=function(){(0,n.props.onJumpToRecent)(),n.closeBanner()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.unreads,a=t.onJumpToRecent,o=ne()(n,"unread_count",0)||ne()(n,"count",0),s=Re()(rd.a.banner,Object(Q.a)({},rd.a.flexEnd,0===o)),i=fe("".concat(o," new ").concat(it(o,"message")));return e?r.a.createElement("div",{className:rd.a.container},r.a.createElement("div",{className:s},!!o&&r.a.createElement("span",{className:rd.a.numMessages},r.a.createElement(oe.l,{size:"sm",spacing:"none"},i)),r.a.createElement("span",{className:rd.a.buttons},r.a.createElement(oe.a,{label:fe("JUMP TO RECENT"),variant:"minimal",onClick:a,testID:"jumpToRecent",small:!0}),r.a.createElement(oe.a,{label:fe("close"),variant:"minimal",onClick:this.closeBanner,icon:r.a.createElement(Ce.r,{size:"sm",color:"blue"}),iconOnly:!0,testID:"newMessagesBannerClose"})))):null}}]),t}(r.a.PureComponent),sd=n(417),id=n.n(sd);var cd=function(e){var t=e.text,n=e.className,a=Re()(id.a.messageDivider,n);return r.a.createElement("div",{className:a},r.a.createElement(oe.e,{size:"h6"},t))},ud=n(199),ld=n.n(ud),dd=n(418),md=n.n(dd),pd=function(e){if(!e)return[];var t=e.querySelectorAll("div[data-user-message]");return Array.from(t)},fd=function(e,t){if(t&&!jt()(e))return e.querySelector('div[data-user-message][data-message-id="'.concat(t,'"]'))||void 0},hd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"".concat(e," ").concat(fe(1===e?"New Message":"New Messages"))},_d=function(e){var t,n=pd(e).reverse(),a=e.scrollTop+e.offsetHeight,r=!0,o=!1,s=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,l=Sa(u,e);if(l<a&&t)return t;if(l<a)return;t=u}}catch(d){o=!0,s=d}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}},vd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t)return Oo()(e,{message_id:parseInt(String(t),10)})},Ed=function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value,c=!0,u=!1,l=void 0;try{for(var d,m=i[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var p=d.value,f=!0,h=!1,_=void 0;try{for(var v,E=p[Symbol.iterator]();!(f=(v=E.next()).done);f=!0){if(v.value.message_id===parseInt(e,10))return p[0]}}catch(g){h=!0,_=g}finally{try{f||null==E.return||E.return()}finally{if(h)throw _}}}}catch(g){u=!0,l=g}finally{try{c||null==m.return||m.return()}finally{if(u)throw l}}}}catch(g){a=!0,r=g}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}},gd=function(e){return e.scrollHeight-e.offsetHeight-e.scrollTop},bd=n(73),Od=n.n(bd),Id=function(e){var t=e.messages,n=e.unreads,a=e.children,o=ne()(n,"oldest_message_id")||ne()(n,"oldest"),s=ne()(n,"unread_count")||ne()(n,"count"),i=Oo()(t,function(e){var t=e.message_id;return String(t)===String(o)}),c=s&&o&&!!i;return r.a.createElement("li",{className:Od.a.authorBlock},!!c&&r.a.createElement(cd,{text:hd(s),className:Od.a.unreadDivider}),r.a.createElement("ul",null,a))},Sd=function(e){var t,n=e.messages,a=e.className,o=e.children,s=ne()(td()(td()(n)),"created_at","");return r.a.createElement("li",{className:a,"data-day-block":s},r.a.createElement(cd,{text:(t=s,ld()(t)?"Today":md()(t)?"Yesterday":Ye()(t,"MMMM D, YYYY")),className:Od.a.dayDivider}),r.a.createElement("ul",null,o))},yd=n(161),Td=n.n(yd);var jd=function(e){var t=e.me,n=e.profile,a=e.roomId,o=rn(void 0,n,a),s=o.role,i=o.name,c=o.avatarProps;return r.a.createElement("div",{className:Td.a.container},r.a.createElement("div",{className:Td.a.bioContainer},r.a.createElement("div",{className:Td.a.avatar},r.a.createElement(Vn,Object.assign({},c,{sizeSelection:"md",size:60}))),r.a.createElement("div",{className:Td.a.bio},r.a.createElement(oe.e,{size:"h5",spacing:"none"},i),r.a.createElement(la,{type:s}))),r.a.createElement(Xs,{myId:t.id,profile:n,roomId:a}))};var Ad=function(e){var t=e.me,n=e.profile,a=e.roomId,o=e.referenceElement,s=e.onClose,i=e.onOpen,c=e.isOpen;return r.a.createElement(hu,{open:c,onClose:s,direction:"top",referenceElement:o,trigger:!1},r.a.createElement("div",{"data-tst":"bio-container",onMouseOver:i,onFocus:i,onMouseLeave:s,onBlur:s},r.a.createElement(jd,{me:t,profile:n,roomId:a})))},Rd=function(){var e,t=Object(a.useState)(!1),n=Object(ba.a)(t,2),r=n[0],o=n[1],s=function(){return o(!1)};Object(a.useEffect)(function(){return r&&window.addEventListener("scroll",s,!0),function(){clearTimeout(e),window.removeEventListener("scroll",s,!0)}});return{isOpen:r,handleOpen:function(){clearTimeout(e),o(!0)},handleClose:function(){e=setTimeout(function(){return o(!1)},250)}}},Cd=function(e){var t=e.messages.groupedMessages,n=void 0===t?[]:t,o=Rd(),s=o.isOpen,i=o.handleOpen,c=o.handleClose,u=Object(a.useState)(),l=Object(ba.a)(u,2),d=l[0],m=l[1],p=Object(a.useState)(),f=Object(ba.a)(p,2),h=f[0],_=f[1],v=function(e){return _(e)},E=function(e){return m(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ad,{me:e.me,roomId:e.roomId,profile:d,referenceElement:h,isOpen:s,onOpen:i,onClose:c}),n.map(function(t,n){return r.a.createElement(Sd,{key:n,messages:t,className:Od.a.dayBlock},t.map(function(t,n){return r.a.createElement(Id,{key:n,messages:t,unreads:e.unreads},t.map(function(t,n){var a=t.message_id;return r.a.createElement("li",{key:"".concat(a,"-").concat(n),className:Od.a.message},r.a.createElement(Xu,{key:a,me:e.me,message:t,onDeleteMessage:e.onDeleteMessage,onProfileClick:e.onProfileClick,parentRoomId:e.parentRoomId,roomId:e.roomId,rootUrl:e.rootUrl||"/",hasOlderSibling:n>0,selected:String(t.message_id)===e.selectedMessageId,onSetRefEl:v,onPopupProfile:E,onOpen:i,onClose:c}))}))}))}))},Nd=400,kd=1e3,Pd=150,Ld=function(e,t){var n=Object(a.useState)({scrolledNearTop:!0,scrolledNearBottom:!0,scrolledFarUp:!1}),r=Object(ba.a)(n,2),o=r[0],s=r[1];return{scrollToElement:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e&&e.current;if(ue()(a)||ue()(t))return;var r=Sa(t,a),o=t.offsetHeight,s=a.offsetHeight,i=r+o+s+Pd;n&&(i=r-o-Pd);return a.scrollTop=i,i},scrollState:o,onScroll:function(e){var n=e.target,a=o.scrolledNearBottom,r=o.scrolledNearTop,i=o.scrolledFarUp,c=n.scrollTop,u=gd(n),l=c<Nd,d=u<Nd,m=u>kd,p={};l&&!r?(p.scrolledNearTop=!0,t&&je()(t.onPrevPage)&&t.onPrevPage()):d&&!a&&(p.scrolledNearBottom=!0,t&&je()(t.onNextPage)&&t.onNextPage());!l&&r&&(p.scrolledNearTop=!1);!d&&a&&(p.scrolledNearBottom=!1);m&&!i&&(p.scrolledFarUp=!0);!m&&i&&(p.scrolledFarUp=!1);s(function(e){return Object(N.a)({},e,p)}),t&&je()(t.onScroll)&&t.onScroll()}}},wd=function(e){var t=ai()(function(){var t=s.current;if(!t||!e.unreads)return;if(c.scrolledNearBottom)e.onUpdateLastVisited();else{var n=_d(t);if(n){var a=n.dataset.messageId,r=vd(e.messages.messages,a);r&&e.onUpdateLastVisited(r.created_at)}}},1500);Object(a.useEffect)(function(){return m(),setTimeout(function(){m()}),function(){t.cancel()}},[e.roomId,e.messageId]);var n=nd(e),o=ne()(e,"messages.messages.length")||0;Object(a.useEffect)(function(){!function(){var t=c.scrolledNearBottom;if(ue()(n))return;var a=ne()(n,"messages.messages.length")||0,r=ne()(e,"messages.messages.length")||0,o=r&&a!==r,s=r-a===1,i=n.loadingPivot&&!e.loadingPivot,u=n.loadingPrev&&!e.loadingPrev,l=n.loadingNext&&!e.loadingNext,d=ne()(e,"messages.cursor.has_next")||!1,f=td()(n.messages.messages),h=Ia()(n.messages.messages),_=Ia()(e.messages.messages),v=e.me&&e.me.id,E=!!_&&_.user_id===v;if(i)return p(e.pivotMessageId,!0);if(o){if(u&&f)return p(f.message_id,!0);if(l&&h)return p(h.message_id);if(s&&(!u&&!l&&t||E)&&!d)return p();if(!a)m()}}()},[o]);var s=Object(a.useRef)(null),i=Ld(s,{onScroll:function(){t()},onNextPage:e.onNextPage,onPrevPage:e.onPrevPage}),c=i.scrollState,u=i.onScroll,l=i.scrollToElement,d=I()(u,500);function m(){if(e.messageId)return p(parseInt(e.messageId,10),!0);if(!ue()(e.unreads)){var n=ne()(e,"unreads.oldest_message_id")||ne()(e,"unreads.oldest"),a=s.current;return!!a&&a.scrollHeight===a.clientHeight?t():p(n,!0,!0)}return p()}function p(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(s.current){var r=t;if(a&&t){var o=Ed(t,e.messages.groupedMessages);o&&(r=o.message_id)}var i=fd(s.current,r);if(r&&i)l(i,n);else{var c=pd(s.current),u=Ia()(c);l(u,n)}}}var f,h={shouldShowAbove:function(e){var t=s.current,n=fd(t,e);return!(!t||!n)&&Sa(n,t)>t.scrollTop+t.offsetHeight-120}};e.thread&&(f={attachments:e.thread.topic.attachments,title:e.thread.topic.content,timestamp:e.thread.topic.created_at,author:e.thread._threadAuthorParticipant,authorProfile:e.thread._threadAuthorProfile,mentions:e.thread.topic.mentions});var _=c.scrolledFarUp||ne()(e,"messages.cursor.has_next");return r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(od,{onJumpToRecent:function(){return je()(e.onJumpToRecent)&&e.onJumpToRecent(),p()},unreads:e.unreads}),r.a.createElement("ul",{className:Od.a.list,ref:s,role:"log","aria-live":"polite",onScroll:d},e.loadingPrev&&r.a.createElement("li",null,r.a.createElement(oe.h,{busy:!0})),!!e.thread&&r.a.createElement(Zl,Object.assign({},f,{roomId:e.roomId,onProfileClick:e.onProfileClick})),r.a.createElement(Tc.Provider,{value:h},r.a.createElement(Cd,{messages:e.messages,onDeleteMessage:e.onDeleteMessage,onProfileClick:e.onProfileClick,parentRoomId:e.parentRoomId,roomId:e.roomId,rootUrl:e.rootUrl,unreads:e.unreads,selectedMessageId:e.messageId,me:e.me})),e.loadingNext&&r.a.createElement("li",null,r.a.createElement(oe.h,{busy:!0}))))};wd.defaultProps={messages:{messages:[],groupedMessages:[]},hasNextPage:!1,loadingPivot:!1,loadingPrev:!1,loadingNext:!1,onDeleteMessage:_.a,onNextPage:_.a,onPrevPage:_.a,onJumpToRecent:_.a,onUpdateLastVisited:_.a,rootUrl:"/"};var xd=wd,Md=n(419),Dd=n.n(Md),Ud=Object(N.a)({},L("UPLOAD_IMAGE","FILES"),{UPLOAD_IMAGE_PROGRESS:"".concat("FILES","/UPLOAD_IMAGE_PROGRESS"),UPLOAD_IMAGE_CANCELLED:"".concat("FILES","/UPLOAD_IMAGE_CANCELLED"),CANCEL_UPLOAD_SAGA:"".concat("FILES","/CANCEL_UPLOAD_SAGA"),FILE_DRAG_START:"".concat("FILES","/DRAG_START"),FILE_DRAG_END:"".concat("FILES","/DRAG_END")}),Fd={cancelFileUpload:function(e){return P(Ud.CANCEL_UPLOAD_SAGA,{fileIdentifierString:e})},imageUploadStart:function(e,t,n){var a=Vi(e);return P(Ud.UPLOAD_IMAGE_START,{file:e,fileIdentifierString:a,roomId:t,messageId:n})},imageUploadPending:function(e){return P(Ud.UPLOAD_IMAGE_PENDING,{fileIdentifierString:e})},imageUploadProgress:function(e,t){return P(Ud.UPLOAD_IMAGE_PROGRESS,{progress:t,fileIdentifierString:e})},imageUploadSuccess:function(e,t){return P(Ud.UPLOAD_IMAGE_FULFILLED,{fileIdentifierString:e,attachments:t})},imageUploadCancelled:function(e){return P(Ud.UPLOAD_IMAGE_CANCELLED,{fileIdentifierString:e})},imageUploadRejected:function(e,t){return P(Ud.UPLOAD_IMAGE_REJECTED,{fileIdentifierString:e,error:t})},fileDragStart:function(){return P(Ud.FILE_DRAG_START)},fileDragEnd:function(){return P(Ud.FILE_DRAG_END)}},Gd=n(108),Bd=n.n(Gd);var Hd=function(e){var t=e.progress,n=void 0===t?0:t,a=e.handleUploadCancel;return r.a.createElement("div",{className:Bd.a.progressWrapper},r.a.createElement("div",{className:Bd.a.progressBar},r.a.createElement("div",{className:Bd.a.progressBarProgress,style:{width:"".concat(n,"%")}}),r.a.createElement("div",{className:Bd.a.progressContentGrid},r.a.createElement("div",null,fe(n<100?"Uploading file":"Processing file"),"\u2026"))),r.a.createElement("div",{className:Bd.a.cancelButtonWrapper},r.a.createElement("button",{"data-testid":"cancel-button",className:Bd.a.cancelButton,onClick:a},fe("Cancel"))))},Vd={cancelFileUpload:Fd.cancelFileUpload};var zd=Object(m.b)(function(e){return{pendingFiles:Qi(e)}},Vd)(function(e){var t=e.pendingFiles,n=e.cancelFileUpload;function a(e,t){t.preventDefault(),n(e)}return t.length?r.a.createElement(r.a.Fragment,null,t.map(function(e){return r.a.createElement(Hd,{key:e.fileIdentifier,progress:e.progress,handleUploadCancel:Dd()(a,e.fileIdentifier)})})):null}),Wd={getNewThread:sc.getNewThread,resetGetNewThread:sc.resetGetNewThread},Yd=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},n.handleProfileClick=function(e){var t=n.props,a=t.history,r=t.rootUrl;a.push("".concat(r,"?contextType=profile&profileId=").concat(e))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getNewThread,n=e.match.params;t(n.roomId,n.messageId)}},{key:"componentDidUpdate",value:function(e){this.checkForRepliedAndRedirect(e)}},{key:"componentWillUnmount",value:function(){this.props.resetGetNewThread()}},{key:"checkForRepliedAndRedirect",value:function(e){var t=this.props,n=t.replyStatus,a=t.messageId;xt(n)&&ne()(n,"meta.messageId")===a&&this.replacePathWithNewThread()}},{key:"replacePathWithNewThread",value:function(){var e=this.props,t=e.replyStatus,n=e.messageId,a=e.history,r=e.location,o=ne()(t,"meta.response.room_id"),s="".concat(r.pathname).concat(r.search).replace("/new/".concat(n),"/".concat(o));a.replace(s)}},{key:"render",value:function(){var e=this.props,t=e.roomId,n=e.rootUrl,a=e.me,o=e.messageId,s=e.message,i=e.messages,c=e.thread,u=e.roomTitle;if(!s)return null;if(!c||!c.topic)return null;var l=function(e,t,n){var a=e.replace("/".concat(t,"/new/").concat(n),"/".concat(t)).split("?")[0]+"?contextType=room";return a=a.concat("&messageId=".concat(n))}(n,t,o),d=c&&c.topic.room_id;return r.a.createElement("div",{className:Ul.a.newThread},r.a.createElement(zl,{backUrl:l,parentRoomTitle:u}),r.a.createElement(zd,null),r.a.createElement("div",{className:Ul.a.subHeader},r.a.createElement(Zl,{attachments:s.attachments,title:s.content||"",timestamp:s.created_at,author:s._participant,mentions:s.mentions,roomId:t,onProfileClick:this.handleProfileClick})),r.a.createElement("div",{className:Ul.a.messageList},r.a.createElement(xd,{onProfileClick:this.handleProfileClick,messages:i||{},messageId:String(o),roomId:String(o),me:a})),r.a.createElement("div",{className:Ul.a.chatInputWrapper},r.a.createElement(Ml,{roomId:t,messageId:o,parentRoomId:d})))}}]),t}(r.a.PureComponent),Kd=Object(A.g)(Object(m.b)(function(e,t){var n=t.messageId,a=t.roomId;return{me:Ft(e),message:Pl(e,n),messages:Cl(e,n),replyStatus:Ll(e,"replyToMessage"),thread:_s(e),roomTitle:Yr(e,a)}},Wd)(Yd)),qd=n(209),Jd=n.n(qd),Xd=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.participantProfiles,n=e.me,a=e.conversation,o=e.parentRoomId,s=e.title,i=n&&n.id,c=It(t,i),u=c.length>0,l=a?a.id:void 0,d=ne()(a,"meta.scope_payload.mentor"),m=d&&n&&d===n.id,p=ne()(c,"[0].id","");return r.a.createElement("header",{className:Jd.a.header},r.a.createElement("div",{className:Jd.a.headerLeft},r.a.createElement(ol,null),r.a.createElement("span",{className:Jd.a.titleContent},u&&r.a.createElement(oe.k,{type:"inline",size:"1x"},r.a.createElement(ic,{userId:p},r.a.createElement(sa,{userId:p,roomId:o||l||""}))),r.a.createElement(oe.e,{size:"h5",as:"h2",align:"left",spacing:"none"},ct(c)),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(la,{type:"mentee"}),"\xa0",r.a.createElement(oe.l,{color:"silver"},"in ",s)))),!!l&&r.a.createElement(Bl,null))}}]),t}(r.a.PureComponent),$d=n(420),Qd=n.n($d),Zd=n(280),em=n.n(Zd),tm=function(e){return r.a.createElement("div",{className:em.a.wrapper},r.a.createElement("img",{className:em.a.image,src:Qd.a,alt:"direct message illustration"}),r.a.createElement(oe.l,{size:"sm",color:"silver"},"This is the beginning of your chat",e.isMentee?" with your mentee":"",e.isMentor?" with your mentor":"","."," ",r.a.createElement("span",{role:"img","aria-label":"wave emoji"},"\ud83d\udc4b")," ","Say hello!"))},nm=n(162),am=n.n(nm),rm={getConversation:Lr.fetchConversationRoom,createConversationAndSubmit:Lr.createConversationAndSubmit,createStagedConversation:Lr.createStagedConversation,resetCreateStagedConversation:Lr.resetCreateStagedConversation,resetCreateConversation:Lr.resetCreateConversationRoom},om=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={roomId:void 0},n.checkFetchConversationStatus=function(e){var t=n.props,a=t.createStagedConversation,r=t.fetchConversationStatus,o=t.stagedConversation,s=n.props.match.params.userIds,i=ne()(r,"payload.result"),c=i!==ne()(e.fetchConversationStatus,"payload.result");if(i&&xt(r)&&c)return n.redirectToExistingConversation(i);!o&&xt(r)&&a(mt(s))},n.checkCreateConversationStatus=function(e){var t=n.props.createConversationStatus;if(!xt(e.createConversationStatus)&&xt(t)){var a=ne()(t,"payload.result");return n.redirectToExistingConversation(a)}},n.handleProfileClick=function(e){var t=n.props,a=t.history,r=t.rootUrl;a.push("".concat(r,"?contextType=profile&profileId=").concat(e))},n.submit=function(e){var t=n.props,a=t.match.params.userIds,r=t.createConversationAndSubmit,o=n.state.roomId;r(mt(a),e,o)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.userIds,n=e.history;this.props.getConversation(void 0,mt(t));var a=ee.a.parse(n.location.search);a.roomId&&this.setState({roomId:a.roomId})}},{key:"componentDidUpdate",value:function(e){this.checkFetchConversationStatus(e),this.checkCreateConversationStatus(e)}},{key:"componentWillUnmount",value:function(){this.props.resetCreateStagedConversation(),this.props.resetCreateConversation()}},{key:"redirectToExistingConversation",value:function(e){this.props.history.replace(be(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.userIds,n=e.me,a=e.stagedConversation,o=e.messages,s=void 0===o?{}:o,i=e.renderFileDropOverlay,c=this.state.roomId;return r.a.createElement(r.a.Fragment,null,!!i&&i(this.submit),r.a.createElement("div",{className:am.a.newConversation},r.a.createElement(Xd,{participantProfiles:a?a.profiles:[],parentRoomId:c||"",me:n}),r.a.createElement(zd,null),ue()(s)?r.a.createElement("div",{className:am.a.empty},r.a.createElement(tm,null)):r.a.createElement("div",{className:am.a.messageList},r.a.createElement(xd,{onProfileClick:this.handleProfileClick,messages:s,roomId:t,me:n})),r.a.createElement("div",{className:am.a.chatInputWrapper},r.a.createElement(Ml,{roomId:t,parentRoomId:a&&a.id,onSubmit:this.submit,allowMentions:!1}))))}}]),t}(r.a.PureComponent),sm=Object(A.g)(Object(m.b)(function(e){return{me:Ft(e),fetchConversationStatus:js(e,"fetchConversationRoom"),createConversationStatus:js(e,"createConversationRoom"),stagedConversation:ys(e)}},rm)(om)),im=n(421),cm=n.n(im),um=n(281),lm=n.n(um),dm=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkForRoomsAndRedirect()}},{key:"componentDidUpdate",value:function(){this.checkForRoomsAndRedirect()}},{key:"checkForRoomsAndRedirect",value:function(){var e=this.props,t=e.lobby,n=e.history,a=e.me,r=De.get("last-visited",a.id);if(r)n.push(r);else{var o=function(e){var t=[].concat(Object(St.a)(e.community_groups),Object(St.a)(e.mentored_groups));return ne()(t,[0,"rooms",0,"room_id"],void 0)}(t);o&&n.push(ge(o))}}},{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.toggleSidebar;return r.a.createElement("div",{className:lm.a.emptyLobby},r.a.createElement("img",{className:lm.a.image,src:cm.a,alt:"missing content ghost illustration"}),r.a.createElement(oe.e,{size:"h1",as:"h2"},"Welcome to Student Hub!"),r.a.createElement(oe.l,null,"Select a room to get started."),t&&r.a.createElement(oe.a,{label:"Check out rooms",variant:"primary",onClick:n}))}}]),t}(r.a.PureComponent);var mm=Object(A.g)(Object(m.b)(function(e){return{lobby:gr(e),me:Ft(e)}})(function(e){return r.a.createElement(f.LayoutConsumer,null,function(t){var n=t.toggleSidebar,a=t.isMobile;return r.a.createElement(dm,Object(N.a)({},e,{toggleSidebar:n,isMobile:a}))})})),pm=n(200),fm=n.n(pm),hm=n(282),_m=n.n(hm),vm=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:_m.a.errorNotFound},r.a.createElement("img",{className:_m.a.image,src:fm.a,alt:fe("Page not found ghost")}),r.a.createElement(oe.e,{size:"h1",as:"h2"},"404 Error"),r.a.createElement(oe.l,null,fe("Sorry, we can't seem to find the page you are looking for.")),r.a.createElement(p.b,{to:"/"},r.a.createElement(oe.a,{label:fe("Return To Student Hub"),variant:"primary"})))}}]),t}(r.a.PureComponent),Em=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(i.a)(this,e),this.faviconElement=void 0,this.defaultTitle=void 0,this.timer=void 0,this.faviconElement=t.getElementById("favicon")||null,this.defaultTitle="Chat - Udacity",this.timer=null}return Object(c.a)(e,[{key:"updateFavicon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(this.faviconElement)switch(e){case"notification":this.faviconElement.href="/favicon-notification.ico";break;default:this.faviconElement.href="/favicon.ico"}}},{key:"blinkTitle",value:function(e){var t=this;this._clearTimer();this.timer=window.setInterval(function(){document.title=document.title===e?t.defaultTitle:e},2e3)}},{key:"_clearTimer",value:function(){null!=this.timer&&(window.clearInterval(this.timer),this.timer=null)}},{key:"clearBlink",value:function(){this._clearTimer(),document.title=this.defaultTitle}}]),e}()),gm=n(109),bm=n.n(gm),Om=n(76),Im=n.n(Om),Sm=function(e){var t,n=e.conversation.profiles,a=e.me&&e.me.id,o=It(n,a),s=o.length>0,i=rn(void 0,o[0],e.conversation.id).name,c=ne()(e,"conversation.summary.last_message",{updated_at:null,last_message:"",user_id:"",content_preview:"No messages have been sent yet",attachments:null}),u=ne()(c,"updated_at"),l=u?Ye()(u,"ddd MMM D, YYYY"):"";if(ld()(u)&&(l=Ye()(u,"h:mma")),!c.content_preview&&c.attachments){var d=c.user_id===a?"You":i;t="".concat(d," shared an image")}var m=ne()(e,"conversation.meta.scope_payload.mentor"),f=m&&m===e.me.id;return r.a.createElement("div",{className:Im.a.conversation},r.a.createElement(p.b,{to:be(e.conversation.id)},r.a.createElement("div",{className:Im.a.inner},s&&r.a.createElement("div",{className:Im.a.avatar},r.a.createElement(sa,{userId:o[0].id,roomId:e.conversation.id})),r.a.createElement("div",{className:Im.a.content},r.a.createElement("div",{className:Im.a.messageTop},r.a.createElement(oe.l,{spacing:"none"},r.a.createElement("strong",null,i)),f&&r.a.createElement(la,{type:"mentee"}),"\xa0",r.a.createElement(oe.l,{spacing:"none",size:"sm",color:"silver"},l)),r.a.createElement("div",{className:Im.a.preview},!t&&r.a.createElement(oe.l,{spacing:"none",size:"sm"},c.content_preview),!!t&&r.a.createElement("span",{className:Im.a.imageContentPreview},r.a.createElement(oe.l,{spacing:"none",size:"xs"},t)))),r.a.createElement("div",null,"archived"===e.conversation.status&&e.onUnarchive&&r.a.createElement(oe.n,{"data-tst":"unarchive",content:"Add to sidebar",direction:"top",trigger:r.a.createElement("span",{className:Im.a.unarchive},r.a.createElement(oe.a,{label:"Add to sidebar",variant:"minimal",onClick:function(t){t.preventDefault(),je()(e.onUnarchive)&&e.onUnarchive(e.conversation.id)},icon:r.a.createElement(Ce.h,{color:"silver"}),iconOnly:!0}))}),r.a.createElement("div",{className:Im.a.notification},!!e.unreadsCount&&r.a.createElement(Pe,{mentionsCount:e.unreadsCount}))))))},ym=n(422),Tm=n.n(ym),jm=function(e){var t=e.conversations.rooms;return r.a.createElement("div",null,!e.isLoading&&!t.length&&r.a.createElement(oe.l,{"data-tst":"empty"},"You have no direct messages. You can start one now by going to a classmate's profile."),r.a.createElement("div",{className:Tm.a.inner},r.a.createElement(oe.h,{busy:e.isLoading,size:"lg"},t.map(function(t){var n=ne()(e.unreadsRooms,[t.id,"unread_count"])||0;return r.a.createElement(Sm,{key:t.id,conversation:t,me:e.me,unreadsCount:n,onUnarchive:e.onUnarchive})}))))},Am=n(163),Rm=n.n(Am),Cm=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).nextPage=function(){n.props.nextPage()},n.previousPage=function(){n.props.previousPage()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shouldShowNext,n=e.shouldShowPrevious,a=e.page,o=e.totalPages,s=e.isLoading;return r.a.createElement("footer",{className:Rm.a["pagination-wrapper"]},r.a.createElement("div",{className:Rm.a["previous-page-button"]},r.a.createElement(oe.a,{variant:"minimal",label:fe("Back"),onClick:this.previousPage,"data-ref":"back-button",disabled:!n||s,icon:r.a.createElement(Ce.b,null),small:!0})),r.a.createElement("div",{className:Rm.a["pagination-text-wrapper"]},r.a.createElement(oe.l,null,a," of ",o)),r.a.createElement("div",{className:Rm.a["next-page-button"]},r.a.createElement(oe.a,{variant:"minimal",label:fe("Next"),onClick:this.nextPage,"data-ref":"next-button",disabled:!t||s,icon:r.a.createElement(Ce.c,null),iconAlign:"right",small:!0})))}}]),t}(r.a.PureComponent),Nm={fetchConversations:Lr.fetchConversations,unarchiveConversation:Lr.unarchiveConversation},km=Object(A.g)(Object(m.b)(function(e){return{conversations:Ts(e),me:Ft(e),unreadsRooms:Ar(e),fetchConversationsStatus:js(e,"fetchConversations")}},Nm)(function(e){var t=ee.a.parse(e.location.search).page,n=Object(a.useState)(t?Number(t):1),o=Object(ba.a)(n,2),s=o[0],i=o[1];Object(a.useEffect)(function(){e.fetchConversations(s),m(s)},[s]);var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=Object(a.useMemo)(function(){var a=Math.ceil(ne()(e,"total",0)/n);return{totalPages:a,shouldShowNext:t<a,shouldShowPrevious:t>1}},[t,e,n]);return{totalPages:r.totalPages,shouldShowNext:r.shouldShowNext,shouldShowPrevious:r.shouldShowPrevious}}(e.conversations.cursor,s),u=c.totalPages,l=c.shouldShowNext,d=c.shouldShowPrevious,m=function(t){var n=e.location.pathname;e.history.replace("".concat(n,"?page=").concat(t))},p=wt(e.fetchConversationsStatus)||!xt(e.fetchConversationsStatus);return r.a.createElement(r.a.Fragment,null,r.a.createElement(jm,{conversations:e.conversations,me:e.me,unreadsRooms:e.unreadsRooms,isLoading:p,onUnarchive:function(t){e.unarchiveConversation(t)}}),u>1&&r.a.createElement(Cm,{previousPage:function(){i(s<=1?1:s-1)},nextPage:function(){i(s+1)},shouldShowNext:l,shouldShowPrevious:d,page:s,totalPages:u,isLoading:!1}))})),Pm=n(283),Lm=n.n(Pm),wm=function(e){return r.a.createElement("div",{className:Lm.a.conversations},r.a.createElement("div",{className:Lm.a.innerContent},r.a.createElement(oe.e,{size:"h3",as:"h2",spacing:"2x"},"Your Messages"),r.a.createElement(km,null)))},xm=n(423),Mm=n.n(xm),Dm={deleteMessage:tc.deleteMessage,getPrevMessages:tc.getPrevMessages,getNextMessages:tc.getNextMessages,updateLastVisited:Zr.updateLastVisited,updateLastVisitedNow:Zr.updateLastVisitedNow,getMessages:tc.getMessages,resetGetMessages:tc.resetGetMessages},Um=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={selectedMessageId:void 0},n.handleDeleteMessage=function(e,t){n.props.deleteMessage(String(e),t)},n.handleProfileClick=function(e){var t=n.props,a=t.history,r=t.rootUrl;a.push("".concat(r,"?contextType=profile&profileId=").concat(e))},n.handleNextPage=function(){var e=n.props,t=e.messages,a=e.getNextMessages;if(ne()(t,"cursor.has_next")){var r=Number(ne()(t,"cursor.next"));if(!r||n.isFetchingMessages())return;n.clearSelectedMessage(),a(n.getRoomId(),r)}},n.handlePrevPage=function(){var e=n.props,t=e.messages,a=e.getPrevMessages;if(ne()(t,"cursor.has_prev")){var r=Number(ne()(t,"cursor.prev"));if(!r||n.isFetchingMessages())return;n.clearSelectedMessage(),a(n.getRoomId(),r)}},n.isFetchingMessages=function(){return wt(n.props.getNextMessagesStatus)||wt(n.props.getPivotMessagesStatus)||wt(n.props.getPrevMessagesStatus)||wt(n.props.getMessagesStatus)},n.handleUpdateLastVisited=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.props,a=t.updateLastVisited,r=t.updateLastVisitedNow,o=t.unreads,s=n.getRoomId();if(s)return e?o&&o.last_visited&&Ao()(e,o.last_visited)?a(s,e):void 0:r(s)},n.handleJumpToRecent=function(){var e=n.getRoomId();e&&(n.resetGetMessages(),n.props.getMessages(e),n.clearSelectedMessage())},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkAndSetSelectedMessage()}},{key:"componentDidUpdate",value:function(e){this.getRoomId()!==this.getRoomId(e)&&(this.checkAndSetSelectedMessage(),this.resetGetMessages())}},{key:"componentWillUnmount",value:function(){this.resetGetMessages()}},{key:"getRoomId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return ne()(e.thread,"thread_id")||ne()(e.room,"room_id")||ne()(e.conversation,"id")||""}},{key:"resetGetMessages",value:function(){var e=this.getRoomId();e&&this.props.resetGetMessages(e)}},{key:"checkAndSetSelectedMessage",value:function(){var e=this.props.location,t=ee.a.parse(e.search);t.selectedMessageId?this.setState({selectedMessageId:t.selectedMessageId}):t.messageId&&this.setState({selectedMessageId:t.messageId})}},{key:"clearSelectedMessage",value:function(){var e=this.props.history,t=ee.a.parse(e.location.search),n=ee.a.stringify(cs()(t,"selectedMessageId"));e.replace({pathname:e.location.pathname,search:n?"?".concat(n):void 0}),this.setState({selectedMessageId:void 0})}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.me,a=e.rootUrl,o=e.getPrevMessagesStatus,s=e.getNextMessagesStatus,i=e.getPivotMessagesStatus,c=e.parentRoomId,u=e.thread,l=e.unreads,d=this.state.selectedMessageId,m=ne()(this.props,"match.params.roomId")||ne()(this.props,"match.params.conversationId")||"";if((!t||!t.messages.length)&&this.isFetchingMessages())return r.a.createElement("div",{className:Mm.a.loading},r.a.createElement(oe.h,null));var p=ne()(t,"cursor.has_next",!1),f=ne()(i,"meta.nextMessageId",void 0);return r.a.createElement(xd,{hasNextPage:p,loadingNext:wt(s),loadingPrev:wt(o),loadingPivot:wt(i),pivotMessageId:f,me:n,messages:t,unreads:l,onDeleteMessage:this.handleDeleteMessage,onProfileClick:this.handleProfileClick,onPrevPage:this.handlePrevPage,onNextPage:this.handleNextPage,onUpdateLastVisited:this.handleUpdateLastVisited,parentRoomId:c,roomId:m,rootUrl:a,messageId:d,thread:u,onJumpToRecent:this.handleJumpToRecent})}}]),t}(r.a.PureComponent),Fm=Object(A.g)(Object(m.b)(function(e,t){var n=ne()(t.thread,"thread_id")||ne()(t.room,"room_id")||ne()(t.conversation,"id")||"";return{getMessagesStatus:Ll(e,"getMessages"),getPrevMessagesStatus:Ll(e,"getPrevMessages"),getNextMessagesStatus:Ll(e,"getNextMessages"),getPivotMessagesStatus:Ll(e,"getPivotMessages"),me:Ft(e),messages:Cl(e,n)}},Dm)(Um)),Gm=n(164),Bm=n.n(Gm),Hm=Object(N.a)({},L("GET_NANODEGREE","NANODEGREES")),Vm={getNanodegree:function(e){return P(Hm.GET_NANODEGREE_START,{ndKey:e})}},zm=(Object(yt.a)(function(e,t){return e.nanodegrees[t]},function(e){return ne()(e,"title","")}),Object(yt.a)(function(e){return e.nanodegrees},Ss,function(e,t){return t?ne()(e,[t,"title"]):""})),Wm={fetchNanodegree:Vm.getNanodegree},Ym=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleProfileClick=function(e){var t=n.props,a=t.history,r=t.rootUrl;a.push("".concat(r,"?contextType=profile&profileId=").concat(e))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.enterConversation()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.conversationId,a=t.conversation;e.conversationId!==n&&this.enterConversation(),!e.conversation&&a&&this.showOtherParticipantProfile()}},{key:"enterConversation",value:function(){var e=this.props,t=e.conversation,n=e.fetchNanodegree,a=e.title;t&&!a&&"personal-mentorship"===function(e){return ne()(e,"meta.type")}(t)&&n(bs(t));this.showOtherParticipantProfile()}},{key:"showOtherParticipantProfile",value:function(){var e=this.props.me,t=ne()(this.props,"conversation.profiles",[]),n=e&&e.id||"",a=It(t,n);a.length&&this.handleProfileClick(a[0].id)}},{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.rootUrl,a=e.conversationId,o=e.me,s=e.messages,i=e.roomUnreads,c=e.getMessagesStatus,u=e.title,l=void 0===u?"":u;if(!t)return r.a.createElement("div",{className:Bm.a.loading},r.a.createElement(oe.h,null));var d=s&&s.messages.length>0,m=ne()(t,"meta.scope_payload.mentor"),p=ne()(t,"meta.scope_payload.student"),f=m&&o&&m===o.id,h=p&&o&&p===o.id;return r.a.createElement("div",{className:Bm.a.conversation},r.a.createElement(Xd,{participantProfiles:t.profiles||[],me:o,conversation:t,title:l}),r.a.createElement(zd,null),r.a.createElement("div",{className:Bm.a.messageList},d&&r.a.createElement(Fm,{rootUrl:n,conversation:t,unreads:i}),!d&&xt(c)&&r.a.createElement(tm,{isMentee:f,isMentor:h})),r.a.createElement("div",{className:Bm.a.chatInputWrapper},r.a.createElement(Ml,{roomId:a,allowMentions:!1})))}}]),t}(r.a.Component),Km=Object(A.g)(Object(m.b)(function(e,t){var n=t.conversationId;return{conversation:Is(e,n),messages:Cl(e,n),roomUnreads:Rr(e,n),me:Ft(e),getMessagesStatus:Ll(e,"getMessages"),title:zm(e,n)}},Wm)(Ym)),qm=n(210),Jm=n.n(qm),Xm={getPassedUsers:Hr.fetchPassedUsers},$m=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPassedParticipants()}},{key:"componentDidUpdate",value:function(e){var t=this.props.participants,n=e.participants;t.length===n.length||this.getPassedParticipants()}},{key:"getPassedParticipants",value:function(){var e=this.props,t=e.roomId,n=e.participants,a=e.parentRoom,r=e.getPassedUsers,o=ne()(a,"room_id",t);o&&!ue()(n)&&r(o,cn(n))}},{key:"render",value:function(){var e=this.props,t=e.thread,n=e.rootUrl,a=e.roomId,o=e.parentRoomId,s=e.parentRoom,i=e.unreads;if(!t)return null;var c=function(e,t,n,a){var r="";return function(e){return e.includes("/threads/")}(e)?"".concat(e.split("/threads")[0],"/threads"):(n&&(r=e.replace("/".concat(n,"/").concat(t),"/".concat(n)).split("?")[0]+"?contextType=room",a&&(r=r.concat("&messageId=".concat(a)))),r)}(n,a,o,t.topic.message_id),u=s?s.room_title:"";return r.a.createElement("div",{className:Jm.a.room},r.a.createElement(zl,{parentRoomTitle:u,backUrl:c}),r.a.createElement(zd,null),r.a.createElement("div",{className:Jm.a.messageList},r.a.createElement(Fm,{rootUrl:n,thread:t,parentRoomId:o,unreads:i})),r.a.createElement("div",{className:Jm.a.chatInputWrapper},r.a.createElement(Ml,{roomId:t.thread_id,parentRoomId:o})))}}]),t}(r.a.Component),Qm=Object(A.g)(Object(m.b)(function(e,t){var n=t.parentRoomId,a=t.match.params.threadId;return{participants:Tn(e,a),thread:Es(e,a),parentRoom:Wr(e,n),unreads:Rr(e,a)}},Xm)($m)),Zm=n(211),ep=n.n(Zm),tp=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.backUrl,a=e.ndTitle,o=e.isMobile;return r.a.createElement("header",{className:ep.a.header},r.a.createElement("div",{className:ep.a.headerLeft},r.a.createElement(ol,null),n&&r.a.createElement(p.b,{to:n},"Cancel"),r.a.createElement("span",null,o&&!!a&&r.a.createElement(oe.l,{size:"sm",spacing:"none",color:"silver"},lt(a)),r.a.createElement(oe.e,{size:"h5",as:"h2",align:"left"},lt(t)))),r.a.createElement("div",{className:ep.a.headerRight},r.a.createElement(Bl,null)))}}]),t}(r.a.PureComponent);var np,ap=function(e){return r.a.createElement(f.LayoutConsumer,null,function(t){var n=t.isMobile;return r.a.createElement(tp,Object(N.a)({},e,{isMobile:n}))})},rp=n(424),op=n.n(rp),sp=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.completedProject,t=e.project_title,n=e.mentors,a=function(e){var t=e.map(function(e){return st(e.first,e.last,!0)}),n=e.length-1;switch(e.length){case 0:return"";case 1:return t[0];default:return"".concat(t.slice(0,n).join(", ")," and ").concat(t[n])}}(n);return r.a.createElement("div",{className:op.a.banner},r.a.createElement(oe.e,{size:"h5",spacing:"half"},"".concat(fe("Congratulations on passing")," ").concat(t,"!")),r.a.createElement(oe.k,{type:"stack",size:"1x"},r.a.createElement(oe.l,{size:"sm"},"".concat(fe("You\u2019re one step closer to graduating. Before you move on, we\u2019d love to hear what you think of your project mentor".concat(1===n.length?"":"s"))," ").concat(a,"."))),r.a.createElement(p.b,{to:"/mentor-ratings/".concat(e.room_id)},r.a.createElement(oe.a,{variant:"default",label:fe("rate mentors"),small:!0})))}}]),t}(r.a.PureComponent),ip=n(137),cp=n.n(ip),up=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.enterRoom()}},{key:"componentDidUpdate",value:function(e){e.roomId!==this.props.roomId&&this.enterRoom()}},{key:"enterRoom",value:function(){this.trackCelebrationBannerView()}},{key:"trackCelebrationBannerView",value:function(){var e=this.props,t=e.pendingCompletedProject,n=e.roomId;t&&La.track(Ta.DisplayCelebrationBanner,{projectRoomId:t.room_id,currentRoomId:n})}},{key:"render",value:function(){var e=this.props,t=e.room,n=e.rootUrl,a=e.roomId,o=e.roomUnreads,s=e.pendingCompletedProject,i=e.ndTitle;if(!t)return r.a.createElement("div",{className:cp.a.loading},r.a.createElement(oe.h,null));var c=t.room_title,u=s&&a;return r.a.createElement("div",{className:cp.a.room},r.a.createElement(ap,{title:c,ndTitle:i}),r.a.createElement(zd,null),r.a.createElement("div",{className:cp.a.messageList},r.a.createElement(Fm,{rootUrl:n,room:t,unreads:o})),r.a.createElement("div",{className:cp.a.chatInputWrapper},r.a.createElement(Ml,{roomId:t.room_id})),u&&r.a.createElement("div",{className:cp.a.banner},r.a.createElement(sp,{completedProject:s})))}}]),t}(r.a.Component),lp=Object(m.b)(function(e,t){var n=t.roomId;return{room:Wr(e,n),roomUnreads:Rr(e,n),pendingCompletedProject:Yt(e),ndTitle:Or(e,n)}})(up);!function(e){e.SUCCESS="SUCCESS-ALERT",e.ERROR="ERROR-ALERT"}(np||(np={}));var dp={addAlert:Ha.addAlert,getConversation:Lr.fetchConversationRoom,getRoom:Zr.getRoom,getThread:sc.getThread,resetGetRoom:Zr.resetGetRoom,resetGetThread:sc.resetGetThread,resetGetConversation:Lr.resetFetchConversationRoom},mp=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.enterRoom(this.props.roomId)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.roomId,a=t.resetGetRoom;e.roomId!==n&&(a(),this.leaveRoom(e.roomId),this.enterRoom(n)),this.checkForErrorsAndRedirect(e)}},{key:"componentWillUnmount",value:function(){this.resetGetRoom(),this.leaveRoom(this.props.roomId)}},{key:"checkForErrorsAndRedirect",value:function(e){var t=this.props,n=t.addAlert,a=t.getConversationStatus,r=t.getRoomStatus,o=t.getThreadStatus,s=Mt(a)&&!Mt(e.getConversationStatus),i=Mt(r)&&!Mt(e.getRoomStatus),c=Mt(o)&&!Mt(e.getThreadStatus);(s||i||c)&&(n(np.ERROR,"Room not found. Redirecting to a different room."),this.redirectToFirstRoom())}},{key:"redirectToFirstRoom",value:function(){var e,t=this.props,n=t.firstRoomId,a=t.history;n&&a.push(Ee(e=n)?be(e):ge(e))}},{key:"enterRoom",value:function(e){this.getRoomWithOptionalMessageId(),La.track(Ta.EnterRoom,{roomId:e})}},{key:"leaveRoom",value:function(e){La.track(Ta.LeaveRoom,{roomId:e})}},{key:"getRoomWithOptionalMessageId",value:function(){var e=ee.a.parse(this.props.location.search).messageId;e?(this.getRoom(parseInt(e,10)),this.replaceMessageIdParam()):this.getRoom()}},{key:"getRoom",value:function(e){var t=this.props,n=t.roomType,a=t.roomId,r=t.getConversation,o=t.getRoom,s=t.getThread;switch(n){case"conversation":r(a,void 0,e);break;case"thread":s(a,e);break;default:o(a,e)}}},{key:"resetGetRoom",value:function(){var e=this.props,t=e.roomType,n=e.resetGetRoom,a=e.resetGetConversation,r=e.resetGetThread;switch(t){case"conversation":a();break;case"thread":r();break;default:n()}}},{key:"replaceMessageIdParam",value:function(){var e=this.props,t=e.location,n=e.history,a=ee.a.parse(t.search),r=ee.a.stringify(Object(N.a)({},cs()(a,"messageId"),{selectedMessageId:a.messageId}));n.replace({pathname:n.location.pathname,search:r?"?".concat(r):void 0})}},{key:"render",value:function(){var e=this.props,t=e.roomType,n=e.roomId,a=e.rootUrl,o=e.parentRoomId;switch(t){case"room":return r.a.createElement(r.a.Fragment,null,r.a.createElement(rc,{roomId:n}),r.a.createElement(lp,{roomId:n,rootUrl:a}));case"thread":return r.a.createElement(r.a.Fragment,null,r.a.createElement(rc,{roomId:n}),r.a.createElement(Qm,{roomId:n,parentRoomId:o,rootUrl:a}));case"conversation":return r.a.createElement(r.a.Fragment,null,r.a.createElement(rc,{roomId:n}),r.a.createElement(Km,{conversationId:n,rootUrl:a}))}return null}}]),t}(r.a.Component),pp=Object(A.g)(Object(m.b)(function(e){return{firstRoomId:yr(e),getConversationStatus:js(e,"fetchConversationRoom"),getThreadStatus:gs(e,"getThread"),getRoomStatus:qr(e,"getRoom")}},dp)(mp)),fp={initSocket:Gr.initSocket,closeSocket:Gr.closeSocket,fetchPendingRatings:Hr.fetchPendingRatings},hp=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).handleFavicon=function(){var e=n.props.hasAnyUnreads?"notification":"default";Em.updateFavicon(e)},n.renderConversation=function(e){var t=e.match,n=t.params,a=t.url;return r.a.createElement(pp,{roomId:n.conversationId,rootUrl:a,roomType:"conversation"})},n.renderEmptyLobbyScene=function(){return r.a.createElement(mm,null)},n.isMobile=function(){return n.props.isContextSidebarOpen&&T.isWindowTabletSize()},n.toggleSidebar=function(e){n.isMobile()&&n.props.toggleContextSidebar(e)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initLobby(),this.handleFavicon()}},{key:"componentDidUpdate",value:function(e){e.hasAnyUnreads!==this.props.hasAnyUnreads&&this.handleFavicon()}},{key:"componentWillUnmount",value:function(){this.handleFavicon()}},{key:"initLobby",value:function(){var e=this.props,t=e.me,n=e.closeSocket,a=e.initSocket,r=e.fetchPendingRatings,o=e.lobby;n(),de()(o)||(a(t.id),r(),this.handleFavicon())}},{key:"renderNewConversation",value:function(e){var t=e.match;t.params,t.url;return r.a.createElement(sm,{rootUrl:"/conversations",renderFileDropOverlay:function(e){return r.a.createElement(rc,{handleDrop:e})}})}},{key:"renderRoom",value:function(e){var t=e.match,n=t.params.roomId,a=t.url;return r.a.createElement(pp,{roomId:n,rootUrl:a,roomType:"room"})}},{key:"renderThread",value:function(e){var t=e.match,n=t.params,a=t.url,o=n.threadId,s=n.threadId?n.roomId:void 0;return r.a.createElement(pp,{roomId:o,rootUrl:a,roomType:"thread",parentRoomId:s})}},{key:"renderNewThread",value:function(e){var t=e.match,n=t.params,a=t.url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(rc,{messageId:parseInt(n.messageId,10),roomId:n.roomId}),r.a.createElement(Kd,{messageId:parseInt(n.messageId,10),roomId:n.roomId,rootUrl:a}))}},{key:"renderThreadsList",value:function(e){var t=e.location,n=t&&t.pathname||"";return r.a.createElement(_l,{rootUrl:n})}},{key:"renderConversationsIndex",value:function(e){var t=e.location,n=t&&t.pathname||"";return r.a.createElement(wm,{rootUrl:n})}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.isContextSidebarOpen,a=e.toggleContextSidebar,o=ee.a.parse(t.search).contextType,s=this.isMobile(),i=Re()(bm.a.main,Object(Q.a)({},bm.a.contextSidebarHidden,!n||!o));return r.a.createElement("div",{className:bm.a.lobby},r.a.createElement("div",{className:i},r.a.createElement("section",{className:Re()(bm.a.section,Object(Q.a)({},bm.a.overlay,s)),onClick:this.toggleSidebar},de()(this.props.lobby)?r.a.createElement(vm,null):r.a.createElement(A.d,null,r.a.createElement(A.b,{exact:!0,path:"/rooms/:roomId/new/:messageId",render:this.renderNewThread}),r.a.createElement(A.b,{exact:!0,path:"/:roomType(rooms|threads)/:roomId/:threadId",render:this.renderThread}),r.a.createElement(A.b,{exact:!0,path:"/:roomType(rooms|threads)/:roomId",render:this.renderRoom}),r.a.createElement(A.b,{exact:!0,path:"/conversations/new/:userIds",render:this.renderNewConversation}),r.a.createElement(A.b,{exact:!0,path:"/conversations/:conversationId",render:this.renderConversation}),r.a.createElement(A.b,{exact:!0,path:"/threads",render:this.renderThreadsList}),r.a.createElement(A.b,{exact:!0,path:"/conversations",render:this.renderConversationsIndex}),r.a.createElement(A.b,{exact:!0,path:"/",render:this.renderEmptyLobbyScene}),r.a.createElement(A.a,{to:"/not-found"}))),n&&r.a.createElement(Gi,{className:bm.a.contextSidebar,toggleContextSidebar:a})))}}]),t}(r.a.PureComponent);var _p=Object(m.b)(function(e){return{me:Ft(e),lobby:gr(e),hasAnyUnreads:Cr(e)}},fp)(function(e){return r.a.createElement(b,null,function(t){var n=t.isContextSidebarOpen,a=t.toggleContextSidebar;return r.a.createElement(hp,Object(N.a)({},e,{isContextSidebarOpen:n,toggleContextSidebar:a}))})}),vp=n(425),Ep=n.n(vp),gp=function(){return["production"].includes(k.REACT_APP_ENV||"")?null:r.a.createElement("div",{className:Ep.a.banner},k.REACT_APP_ENV)},bp=n(443),Op=(n(724),n(429)),Ip=n.n(Op),Sp=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.overlay,n=e.associatedId,a=e.children,o=e.alignConfig,s=e.overlayClassName,i=e.inverted,c=Object(fi.a)(e,["overlay","associatedId","children","alignConfig","overlayClassName","inverted"]),u=Re()(s,Object(Q.a)({},Ip.a.inverted,i));return r.a.createElement(bp.a,Object.assign({id:n,align:o,role:"tooltip",overlay:t,overlayClassName:u},c),a)}}]),t}(r.a.PureComponent);Sp.displayName="ureact-tooltip",Sp.defaultProps={overlay:r.a.createElement("div",null),alignConfig:{},trigger:["hover"]};var yp=Sp,Tp=n(212),jp=n.n(Tp),Ap=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isWelcomeFlowVisible,n=e.handleWelcomeClose,a=r.a.createElement(f.NavItem,{title:"Home",href:"".concat(k.REACT_APP_CLASSROOM_URL,"/me")},r.a.createElement(Ce.x,{size:"lg"}));return r.a.createElement(f.Nav,{variant:"small"},r.a.createElement("div",{className:jp.a.navGroup},r.a.createElement(f.NavGroup,null,r.a.createElement(gp,null),t&&r.a.createElement(yp,{"data-testid":"welcome-tooltip",placement:"right",overlay:r.a.createElement("div",null,r.a.createElement(oe.l,{size:"sm",spacing:"1x"},"Head to the Classroom and start learning."),r.a.createElement(oe.a,{onClick:n,variant:"minimal",small:!0,label:fe("Got It!")})),overlayClassName:jp.a.tooltip,trigger:["click"],alignConfig:{offset:[-2,3]},defaultVisible:!0},a),!t&&a,r.a.createElement(f.NavItem,{title:"Catalog",href:"https://www.udacity.com/courses/all"},r.a.createElement(Ce.k,{size:"lg"})))),r.a.createElement("div",{className:jp.a.navGroup},r.a.createElement(f.NavGroup,null,r.a.createElement(f.NavItem,{href:"https://classroom.udacity.com/settings",title:"Settings"},r.a.createElement(Ce.K,{size:"lg"})),r.a.createElement(f.NavItem,{href:"#",title:"Logout",onClick:W},r.a.createElement(Ce.B,{size:"lg"})))))}}]),t}(r.a.PureComponent),Rp=n(284),Cp=n.n(Rp),Np=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).renderNav=function(){return r.a.createElement(A.d,null,r.a.createElement(A.b,{component:Ap}))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.headingText,n=e.subheadingText,a=e.buttonLabel,o=e.href;return r.a.createElement(f.Layout,{backgroundColor:"",documentTitle:fe("Student Hub"),nav:this.renderNav(),sidebar:null,header:null},r.a.createElement("div",{className:Cp.a.error},r.a.createElement("img",{className:Cp.a.image,src:fm.a,alt:"udacity floating ghost"}),r.a.createElement(oe.e,{size:"h1",as:"h2"},t),r.a.createElement(oe.l,null,n),r.a.createElement(oe.a,{href:o,label:a,variant:"primary"})))}}]),t}(r.a.PureComponent),kp=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=k.REACT_APP_CLASSROOM_URL||"#";return r.a.createElement(Np,{headingText:fe("Hang Tight"),subheadingText:fe("It looks like your Nanodegree program hasn\u2019t started yet. You\u2019ll get access to Student Hub once your program begins."),buttonLabel:fe("Return to Classroom"),href:e})}}]),t}(r.a.PureComponent),Pp=n(285),Lp=n.n(Pp),wp=n(150),xp=n(430),Mp=n.n(xp),Dp=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={groupValue:[]},n.onChange=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var a,r,o;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,r=a.value,!a.checked){e.next=7;break}return e.next=4,n.addValue(r);case 4:o=e.sent,e.next=10;break;case 7:return e.next=9,n.removeValue(r);case 9:o=e.sent;case 10:n.props.onChange(o,n.props.name);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onChangeTextInput=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var a,r,o,s,i,c;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,r=n.props.name,o=a.value,s=a.id,i=s.split("_text")[0].split("".concat(r,"-"))[1],!o){e.next=10;break}return e.next=7,n.addValue(i);case 7:c=n.updateValue(i,o),e.next=13;break;case 10:return e.next=12,n.removeValue(i);case 12:c=e.sent;case 13:n.props.onChange(c,n.props.name);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addValue=function(e,t){return new Promise(function(a){var r=n.state.groupValue;if(r&&Oo()(r,{key:e}))return a(r);var o=[].concat(Object(St.a)(r),[{key:e,value:t||!0}]);n.setState({groupValue:o},function(){a(o)})})},n.removeValue=function(e){return new Promise(function(t){var a=n.state.groupValue;if(!a||!Oo()(a,{key:e}))return t(a);var r=_a()(a,function(t){return t.key!==e});n.setState({groupValue:r},function(){t(r)})})},n.updateValue=function(e,t){var a=n.state.groupValue,r=Oo()(a,{key:e}),o=C()(a,r),s=[].concat(Object(St.a)(a.slice(0,o)),[Object(N.a)({},r,{value:t})],Object(St.a)(a.slice(o+1)));return n.setState({groupValue:s}),s},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.validation,o=t.values,s=t.name,i=this.state.groupValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.c,{title:n,name:s},o.map(function(t,n){var a=t.text,o=t.value,c=t.textInput,u=Oo()(i,{key:o}),l=!!u,d=u&&"string"===typeof u.value?u.value:"";return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(oe.b,{checked:l,label:a,name:s,id:"".concat(s,"-").concat(o),value:o,onChange:e.onChange}),c&&r.a.createElement("div",{className:Mp.a.textInput},r.a.createElement(oe.m,{label:a,id:"".concat(s,"-").concat(o,"_text"),value:d,onChange:e.onChangeTextInput,hiddenLabel:!0})))})),!!a&&r.a.createElement(oe.d,{message:a.message}))}}]),t}(r.a.PureComponent);Dp.defaultProps={inline:!1,value:void 0};var Up=Dp,Fp=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=e.target.value;n.props.onChange(t,n.props.name)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.values,a=e.value,o=e.inline,s=e.name,i=e.validation;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.j,{title:t,name:s,inline:o,onChange:this.onChange},n.map(function(e){var t=e.text,n=e.value,o=a===n;return r.a.createElement(oe.i,{id:"".concat(s,"-").concat(n),key:"".concat(s,"-").concat(n),label:t,name:s,checked:o,value:n})})),!!i&&r.a.createElement(oe.d,{message:i.message}))}}]),t}(r.a.PureComponent);Fp.defaultProps={inline:!1,value:void 0};var Gp=Fp,Bp=n(110),Hp=n.n(Bp),Vp=n(431),zp=n.n(Vp),Wp=n(432),Yp=n.n(Wp),Kp=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={tempRating:void 0,rating:void 0},n.setRating=function(e){n.setState({rating:e}),n.props.onChange(e)},n.setTempRating=function(e){return n.setState({tempRating:e})},n.resetTempRating=function(){return n.setState({tempRating:void 0})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value!==t&&this.setState({rating:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.max,a=void 0===n?5:n,o=t.name,s=t.title,i=t.validation,c=this.state,u=c.rating,l=c.tempRating,d=l||u?"black":"silver";return r.a.createElement("div",null,r.a.createElement(oe.e,{size:"h5",spacing:"half"},s),r.a.createElement("div",{className:Yp.a.rating},zp()(a,function(t){var n=String(a-t),s=fe("".concat(n," stars")),i=function(){return e.setTempRating(n)};return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("input",{type:"radio",id:"".concat(o,"-").concat(s),value:String(n),checked:u===n,onClick:function(){return e.setRating(n)}}),r.a.createElement("label",{htmlFor:"".concat(o,"-").concat(s),onMouseOver:i,onMouseOut:e.resetTempRating,onFocus:i,onBlur:e.resetTempRating}))})),r.a.createElement(oe.l,{size:"sm",color:d},function(e){switch(e){case"5":return"Excellent";case"4":return"OK, could be better";case"3":return"Below average";case"2":return"Disappointing";case"1":return"Unacceptable";default:return"No rating yet"}}(l||u)),!!i&&r.a.createElement(oe.d,{message:i.message}))}}]),t}(r.a.PureComponent);Kp.defaultProps={max:5,name:"starRatings",value:"1"};var qp=Kp,Jp=function(e){return Object.keys(e).reduce(function(t,n){return!!t&&function(e){return ue()(e)||de()(e)}(e[n])},!0)},Xp=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=$p(e[n]),t},{})},$p=function(e){var t={};return e.interacted||(t.interacted={valid:!1,message:"This is a required question."}),"true"!==e.interacted||!ue()(e.rating)&&"0"!==e.rating||(t.rating={valid:!1,message:"This is a required question."}),"true"===e.interacted&&ue()(e.improvement)&&(t.improvement={valid:!1,message:"This is a required question."}),"false"===e.interacted&&ue()(e.notInteracted)&&(t.notInteracted={valid:!1,message:"This is a required question."}),e.improvement&&Oo()(e.improvement,{key:"other_improvement",value:!0})&&(t.improvement={valid:!1,message:'Selecting "other" requires more details.'}),e.notInteracted&&Oo()(e.notInteracted,{key:"other_reason",value:!0})&&(t.notInteracted={valid:!1,message:'Selecting "other" requires more details.'}),ue()(t)?void 0:t},Qp=function(e){return[{key:"interacted",label:"".concat(fe("Did you talk to or read any messages from")," ").concat(e,"?")},{key:"improvement",label:fe("What can be improved? Select all that apply.")},{key:"notInteracted",label:fe("Why not? Select all that apply.")},{key:"rating",label:"".concat(fe("How would you rate")," ").concat(e,"?")}]},Zp=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).mentorName=st(n.props.mentor.first,n.props.mentor.last,!0),n.questions=Qp(n.mentorName),n.onChange=function(e,t){var a=n.props;(0,a.onChange)(a.mentor.id,e,t)},n.bindOnChange=function(e){return n.onChange.bind(Object(wp.a)(n),e)},n.onChangeInteracted=function(e){n.onChange("interacted",e),"true"===e?n.onChange("notInteracted",void 0):n.onChange("improvement",void 0)},n.onChangeImprovement=n.bindOnChange("improvement"),n.onChangeNotInteracted=n.bindOnChange("notInteracted"),n.onChangeRating=n.bindOnChange("rating"),n.questions.forEach(function(e){n["onChange".concat(e.key)]=n.onChange.bind(Object(wp.a)(n),e.key)}),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mentor,n=e.values,a=e.validation,o=e.showValidation,s={question:this.questions[0],value:n[this.questions[0].key],validation:a&&a.interacted},i={question:this.questions[1],value:n[this.questions[1].key],isDisplayed:"true"===s.value,validation:a&&a.improvement},c={question:this.questions[2],value:n[this.questions[2].key],isDisplayed:"false"===s.value,validation:a&&a.notInteracted},u={question:this.questions[3],value:n[this.questions[3].key],isDisplayed:"true"===s.value,validation:a&&a.rating};return r.a.createElement("div",{className:Hp.a.rating},r.a.createElement(Vn,{firstName:t.first,lastName:t.last,photoUrl:t.photo_url,userId:t.id,role:"mentor",sizeSelection:"md"}),r.a.createElement("div",{className:Hp.a.questions},r.a.createElement("section",{className:Hp.a.section},r.a.createElement(Gp,{title:s.question.label,name:"".concat(t.id,"-").concat(s.question.key),inline:!0,onChange:this.onChangeInteracted,validation:o?s.validation:void 0,value:s.value,values:[{text:fe("Yes"),value:"true"},{text:fe("No"),value:"false"}]})),u.isDisplayed&&r.a.createElement("section",{className:Hp.a.section},r.a.createElement(qp,{title:u.question.label,name:"".concat(t.id,"-").concat(u.question.key),onChange:this.onChangeRating,value:u.value,validation:o?u.validation:void 0})),i.isDisplayed&&r.a.createElement("section",{className:Hp.a.section},r.a.createElement(Up,{title:i.question.label,name:"".concat(t.id,"-").concat(i.question.key),onChange:this.onChangeImprovement,validation:o?i.validation:void 0,value:i.value,values:[{text:fe("Lesson and project support"),value:"support"},{text:fe("Responsiveness"),value:"responsiveness"},{text:fe("Friendly and clear communication"),value:"communication"},{text:fe("Other:"),value:"other_improvement",textInput:!0}]})),c.isDisplayed&&r.a.createElement("section",{className:Hp.a.section},r.a.createElement(Up,{title:c.question.label,name:"".concat(t.id,"-").concat(c.question.key),onChange:this.onChangeNotInteracted,validation:o?c.validation:void 0,value:c.value,values:[{text:fe("I never see messages from this mentor"),value:"no_messages"},{text:fe("I'm not comfortable posting"),value:"uncomfortable"},{text:fe("I'm able to progress in my Nanodegree without help"),value:"unnecessary"},{text:fe("Other:"),value:"other_reason",textInput:!0}]}))))}}]),t}(r.a.PureComponent);Zp.defaultProps={values:{},validation:{},showValidation:!1};var ef=Zp,tf=n(286),nf=n.n(tf),af=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={ratings:{},validation:{},showValidation:!1},n.setDefaultRatingsState=function(){var e=n.props.mentors.reduce(function(e,t){return e[t.id]={},e},{});n.setState({ratings:e})},n.onSubmit=function(e){var t=n.state.ratings;e.preventDefault();var a=Xp(t);return Jp(a)?n.props.onSubmit(t):n.setState({showValidation:!0,validation:a})},n.changeMentorRating=function(e,t,a){n.setState(function(n){var r=n.ratings;return{ratings:Object(N.a)({},r,Object(Q.a)({},e,Object(N.a)({},r[e],Object(Q.a)({},t,a)))),showValidation:!1}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setDefaultRatingsState()}},{key:"render",value:function(){var e=this,t=this.props.mentors,n=this.state,a=n.ratings,o=n.showValidation,s=n.validation;return r.a.createElement("div",{className:nf.a.form},r.a.createElement(oe.k,{type:"stack",size:"1x"},r.a.createElement(oe.e,{size:"h3"},fe("Rate Your Mentors (1 min)"))),r.a.createElement(oe.k,{type:"stack",size:"6x"},r.a.createElement(oe.l,{spacing:"none"},fe("Ratings are shared anonymously with mentors to help them improve."))),r.a.createElement("form",{onSubmit:this.onSubmit},t.map(function(t){return r.a.createElement("div",{className:nf.a.mentorRatingInputs,key:t.id},r.a.createElement(ef,{mentor:t,onChange:e.changeMentorRating,values:a[t.id]||{},validation:s[t.id],showValidation:o}))}),r.a.createElement(oe.k,{type:"stack",size:"2x"},r.a.createElement(oe.a,{label:"Complete Ratings",variant:"primary",type:"submit"})),r.a.createElement(oe.l,{size:"sm",spacing:"none"},fe("If you have any feedback or questions on your general Udacity experience, contact "),r.a.createElement(oe.g,{href:"mailto:support@udacity.com"},"support@udacity.com"),".")))}}]),t}(r.a.PureComponent),rf=n(287),of=n.n(rf),sf={mutateMentorRating:Hr.mutateMentorRating,resetMutateMentorRating:Hr.resetMutateMentorRating},cf=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e){var t=n.props,a=t.roomId,r=t.mutateMentorRating,o=t.me.id,s=Object.keys(e);s.forEach(function(t){r(t,o,a,e[t])}),n.trackSubmitRatings(s)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fetchRoomRatingsStatus,a=t.pendingCompletedProject;wt(e.fetchRoomRatingsStatus)&&xt(n)&&a&&this.trackViewRatings()}},{key:"componentWillUnmount",value:function(){this.props.resetMutateMentorRating()}},{key:"trackViewRatings",value:function(){var e=this.props,t=e.roomId,n=e.pendingCompletedProject;if(n&&n.mentors){var a=n.mentors.map(function(e){return e.id});La.track(Ta.ViewMentorRatingsForm,{roomId:t,mentorIds:a})}}},{key:"trackSubmitRatings",value:function(e){var t=this.props.roomId;La.track(Ta.SubmitMentorRatingsForm,{roomId:t,mentorIds:e})}},{key:"render",value:function(){var e=this.props,t=e.pendingCompletedProject,n=e.fetchRoomRatingsStatus,a=e.mutateMentorRatingStatus,o=t&&t.mentors,s=xt(a),i=xt(n)&&o&&!s,c=xt(n)&&!o&&!s;return r.a.createElement("div",null,wt(n)&&r.a.createElement("div",{className:of.a.loading},r.a.createElement(oe.h,null)),i&&o&&r.a.createElement(af,{mentors:o,onSubmit:this.submit}),c&&r.a.createElement(oe.l,null,fe("There are no pending ratings for this project. You may have already submitted ratings for these mentors.")),s&&r.a.createElement("div",{className:of.a.complete},r.a.createElement(Ce.g,{size:"lg",color:"green"}),r.a.createElement(oe.l,null,fe("Thank you for submitting your ratings. Your feedback is important!"))))}}]),t}(r.a.Component),uf=Object(m.b)(function(e,t){return{fetchRoomRatingsStatus:qt(e,"getRoomRatings"),mutateMentorRatingStatus:qt(e,"mutateMentorRating"),pendingCompletedProject:Kt(e,t.roomId),me:Ft(e)}},sf)(cf),lf=n(213),df=n.n(lf),mf={fetchRoomRatings:Hr.fetchRoomRatings},pf=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initMentorRatings()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.roomId;t&&t!==e.match.params.roomId&&this.initMentorRatings()}},{key:"initMentorRatings",value:function(){var e=this.props;(0,e.fetchRoomRatings)(e.match.params.roomId)}},{key:"render",value:function(){var e=this.props.match.params.roomId,t="/rooms/".concat(e);return r.a.createElement("div",{className:df.a.ratings},r.a.createElement("div",{className:df.a.ratingsWrapper},r.a.createElement("div",{className:df.a.backLink},r.a.createElement(p.b,{to:t},r.a.createElement(oe.k,{type:"inline",size:"1x"},r.a.createElement(Ce.b,{size:"sm"})),r.a.createElement(oe.e,{size:"h6"},fe("Back to Student Hub")))),r.a.createElement(uf,{roomId:e})))}}]),t}(r.a.PureComponent),ff=Object(m.b)(void 0,mf)(pf),hf=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=k.REACT_APP_KNOWLEDGE_HOME||"#";return r.a.createElement(Np,{headingText:fe("Cannot connect to server at this time. Please try again later."),subheadingText:fe("If you have any questions with your projects, quizzes, labs, or concepts, check Knowledge for answers."),buttonLabel:fe("Go to Knowledge"),href:e})}}]),t}(r.a.PureComponent),_f=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkLocationAndRedirect()}},{key:"checkLocationAndRedirect",value:function(){var e=this.props,t=e.history,n=e.match.params.workspaceKey,a=e.location;if(n){var r=a.pathname.replace("/".concat(n),"");t.replace("".concat(r).concat(a.search))}}},{key:"render",value:function(){return null}}]),t}(r.a.PureComponent),vf={hideWelcomeFlow:M.hideWelcomeFlow};var Ef=Object(m.b)(function(e){return{hasCareerPortalAccess:Vt(e),hasKnowledgeAccess:vr(e),isWelcomeFlowVisible:zt(e)}},vf)(function(e){var t=e.hasCareerPortalAccess,n=e.hasKnowledgeAccess,a=e.isWelcomeFlowVisible,o=e.hideWelcomeFlow;return r.a.createElement(Ap,{hasCareerPortalAccess:t,hasKnowledgeAccess:n,isWelcomeFlowVisible:a,handleWelcomeClose:function(){o()}})}),gf={bootstrap:M.bootstrap,showWelcomeFlow:M.showWelcomeFlow,hideWelcomeFlow:M.hideWelcomeFlow},bf=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={hadFTUX:!1},n.onRouteChange=function(e){var t=n.props.me;t&&!Ie(e.pathname)&&De.set("last-visited",e,t.id)},n.displayNotFound=function(){return r.a.createElement(vm,null)},n.renderSidebar=function(){var e=n.props.history,t=Object(A.f)(e.location.pathname,{path:"/mentor-ratings/:roomId",exact:!0}),a=Object(A.f)(e.location.pathname,{path:"/not-found",exact:!0});return t&&t.isExact||a&&a.isExact?null:r.a.createElement(A.d,null,r.a.createElement(A.b,{path:"/",component:Ur}))},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location.search,n=e.showWelcomeFlow,a=e.bootstrap,r=ee.a.parse(t);re()(r,"ftux")&&(this.setState({hadFTUX:!0}),n()),a()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.onRouteChange(this.props.location),xt(this.props.bootstrapStatus)&&!xt(e.bootstrapStatus)&&this.state.hadFTUX&&this.redirectToPersonalMentorConversation()}},{key:"componentWillUnmount",value:function(){this.props.hideWelcomeFlow()}},{key:"redirectToPersonalMentorConversation",value:function(){var e=this.props,t=e.lobby,n=e.history,a=ne()(t,"personal_mentor_conversations[0].id");a&&n.push(be(a))}},{key:"render",value:function(){var e=this.props,t=e.bootstrapStatus,n=e.outageStatus,a=e.lobby,o=e.location,s=RegExp("mentor-ratings").test(o.pathname);if("major_outage"===n)return r.a.createElement(hf,null);if(!xt(t))return null;var i=ne()(a,"has_student_hub_access",!1);return xt(t)&&!i?r.a.createElement(kp,null):r.a.createElement("div",{className:Re()(Lp.a.app,Object(Q.a)({},Lp.a.contextSidebarHidden,s))},r.a.createElement(f.Layout,{backgroundColor:"",documentTitle:fe("Student Hub"),nav:r.a.createElement(A.d,null,r.a.createElement(A.b,{component:Ef})),sidebar:this.renderSidebar(),header:null},r.a.createElement(A.d,null,r.a.createElement(A.b,{path:"/robots.txt",onEnter:function(){return window.location.reload()}}),r.a.createElement(A.b,{exact:!0,path:"/not-found",component:this.displayNotFound}),r.a.createElement(A.b,{exact:!0,path:"/mentor-ratings/:roomId",component:ff}),r.a.createElement(A.b,{path:"/:workspaceKey/(rooms|threads)",component:_f}),r.a.createElement(A.b,{path:"/",component:_p}))))}}]),t}(r.a.Component),Of=Object(A.g)(Object(m.b)(function(e){return{bootstrapStatus:Bt(e,"bootstrap"),lobby:gr(e),me:Ft(e),outageStatus:Gt(e)}},gf)(bf)),If=n(433),Sf=n.n(If),yf=n(434),Tf=n.n(yf),jf=k.REACT_APP_BUGSNAG_KEY?k.REACT_APP_BUGSNAG_KEY:"",Af={},Rf=function(){var e=Y();return e.key||e.uid}();Rf&&(Af.user={id:Rf});var Cf=Tf()(Object(N.a)({beforeSend:function(e){"Extension context invalidated."===e.errorMessage&&e.ignore()},apiKey:jf,releaseStage:k.REACT_APP_ENV,notifyReleaseStages:["staging","production"]},Af)).use(Sf()(r.a));var Nf=function(e){return r.a.createElement(Cf,null,e.children)},kf=n(125),Pf=n.n(kf),Lf=n(130),wf=n.n(Lf);var xf=function(e){var t=e.alert,n=e.dismissAlert,o=function(e){var t=Object(a.useState)(void 0),n=Object(ba.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(!1),i=Object(ba.a)(s,2),c=i[0],u=i[1];return Object(a.useLayoutEffect)(function(){ue()(r)||Pf()(r,e)||u(!0);var t=setTimeout(function(){u(!1),o(e)},parseInt(wf.a.transitionDuration,10));return function(){return clearTimeout(t)}},[e,r]),{isTransitioning:c,renderedAlert:c?r:e}}(t),s=o.isTransitioning,i=o.renderedAlert;if(ue()(i))return null;var c=ne()(i,"type"),u=ne()(i,"message"),l=Re()(wf.a.alertWrapper,Object(Q.a)({},wf.a.slideOut,s));return r.a.createElement("div",{className:l},c===np.SUCCESS?r.a.createElement(Ce.l,{size:"md",color:"green"}):r.a.createElement(Ce.s,{size:"md",color:"red"}),r.a.createElement("div",null,u),r.a.createElement("button",{"data-testid":"dismiss-button",onClick:n,className:wf.a.dismissButton},r.a.createElement(Ce.r,{size:"sm",color:"white"})))},Mf=function(e){return re()(e,"getIn")?e.getIn(["alerts"]):[]},Df=Object(yt.a)(Mf,function(e){return e[0]}),Uf={dismissAlert:Ha.clearFirstAlert},Ff=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).dismissAlert=function(e){e.preventDefault(),n.props.dismissAlert()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement(xf,{alert:e,dismissAlert:this.dismissAlert})}}]),t}(r.a.Component),Gf=Object(m.b)(function(e){return{alert:Df(e)}},Uf)(Ff),Bf={fileDragStart:Fd.fileDragStart,fileDragEnd:Fd.fileDragEnd};var Hf=Object(m.b)(function(e){return{isDraggingFile:Zi(e)}},Bf)(function(e){var t,n=e.children,a=e.fileDragStart,o=e.fileDragEnd,s=e.isDraggingFile;return r.a.createElement("div",{"data-testid":"drag-drop-container",onDragOver:function(e){e.preventDefault(),clearTimeout(t),s||a()},onDragLeave:function(){t=setTimeout(o,50)},onDrop:function(){o()}},n)}),Vf=(n(725),n(128)),zf=n(47),Wf=n(42),Yf=n(13),Kf=n.n(Yf),qf=n(435),Jf=n.n(qf),Xf=Kf.a.from([]);var $f=Object(N.a)({},L("GET_LOBBY","LOBBY"),{CHECK_ACTIVE_USERS_SEND:"".concat("LOBBY","/CHECK_ACTIVE_USERS_SEND"),CHECK_ACTIVE_USERS_RECEIVED:"".concat("LOBBY","/CHECK_ACTIVE_USERS_RECEIVED"),POLL_LOBBY_UPDATES_START:"".concat("LOBBY","/POLL_LOBBY_UPDATES_START"),POLL_LOBBY_UPDATES_CANCEL:"".concat("LOBBY","/POLL_LOBBY_UPDATES_CANCEL"),POLL_LOBBY_UPDATES_REJECTED:"".concat("LOBBY","/POLL_LOBBY_UPDATES_REJECTED")}),Qf={getLobby:function(){return P($f.GET_LOBBY_START,void 0)},startPollLobbyUpdates:function(){return P($f.POLL_LOBBY_UPDATES_START,void 0)},cancelPollLobbyUpdates:function(){return P($f.POLL_LOBBY_UPDATES_CANCEL,void 0)},checkActiveUsers:function(){return P($f.CHECK_ACTIVE_USERS_SEND,void 0)},checkActiveUsersReceived:function(e){return P($f.CHECK_ACTIVE_USERS_RECEIVED,{userIds:e})}};function Zf(e,t){return t?Kf.a.merge(e,{byId:t},{deep:!0}):e}var eh=function(e,t){return Zf(e,t.conversations)},th=Kf.a.from({byId:{},currentConverations:void 0,stagedConversation:void 0});function nh(e){var t=Kf.a.from({error:null,status:"ready"});return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0,r=a.type,o=a.payload,s=a.meta;switch(r){case e.READY:return Kf.a.from(n).merge({error:null,status:"ready"});case e.PENDING:return Kf.a.from(n).merge({error:null,payload:o,meta:s,status:"pending"});case e.FULFILLED:return Kf.a.from(n).merge({error:null,payload:o,meta:s,status:"fulfilled"});case e.REJECTED:return Kf.a.from(n).merge({error:o,status:"rejected",meta:s})}return n}}function ah(e,t){if(e&&!t)throw new TypeError('"actionClass" is a required arg on normalizeAsyncStatusActions()');return{READY:e?"".concat(t,"/").concat(e,"_READY"):"DEFAULT_API_READY",PENDING:e?"".concat(t,"/").concat(e,"_PENDING"):"DEFAULT_API_PENDING",FULFILLED:e?"".concat(t,"/").concat(e,"_FULFILLED"):"DEFAULT_API_FULFILLED",REJECTED:e?"".concat(t,"/").concat(e,"_REJECTED"):"DEFAULT_API_REJECTED"}}var rh=ah("GET_CONVERSATION","CONVERSATIONS"),oh=ah("GET_CONVERSATIONS","CONVERSATIONS"),sh=ah("CREATE_CONVERSATION_ROOM","CONVERSATIONS"),ih=Object(Wf.combineReducers)({fetchConversationRoom:nh(rh),fetchConversations:nh(oh),createConversationRoom:nh(sh)}),ch=Object(N.a)({},L("FETCH_EXPERIMENT_VARIATION","EXPERIMENTS"),L("POST_EXPERIMENT_ACTIVATION","EXPERIMENTS")),uh=Kf.a.from({});var lh=Kf.a.from({ui:{isDraggingFile:!1},pendingFiles:{}});var dh=n(102),mh=n.n(dh),ph=function(e,t){var n=ne()(e,"currentLobby.conversations.rooms",[]);return Kf.a.setIn(e,["currentLobby","conversations","rooms"],[t].concat(Object(St.a)(n)))},fh=function(e,t){var n=mh()(ne()(e,"currentLobby.conversations.rooms")||[],t);return Kf.a.setIn(e,["currentLobby","conversations","rooms"],n)},hh=function(e){return Kf.a.updateIn(e,["currentLobby","total_conversations"],function(e){return e+1})},_h=function(e){return Kf.a.updateIn(e,["currentLobby","total_threads"],function(e){return e+1})},vh=Kf.a.from({currentLobby:void 0});var Eh=ah("GET_LOBBY","LOBBY"),gh=Object(Wf.combineReducers)({getLobby:nh(Eh)}),bh=n(91),Oh=n.n(bh),Ih=function(e,t,n){return[].concat(Object(St.a)(e.slice(0,n)),[t],Object(St.a)(e.slice(n+1)))},Sh=function(e,t,n){return Kf.a.updateIn(e,["byRoomId",t,"messages"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(n)?e:[].concat(Object(St.a)(e),[n])})},yh=function(e,t){var n=ve(t.room_id),a=Kf.a.setIn(e,["pendingById",t.message_id],t),r=t.room_id;return!n&&t.parent_message_id&&(r=String(t.parent_message_id)),a=Kf.a.updateIn(a,["byRoomId",r,"messages"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(t.message_id)?e:[].concat(Object(St.a)(e),[t.message_id])})},Th=function(e,t,n){return Kf.a.updateIn(e,["pendingById",t.message_id],function(e){return Object(N.a)({},e,n)})},jh=function(e,t,n,a){var r=Kf.a.updateIn(e,["pendingById"],function(e){return Kf.a.without(e,n)});return r=Kf.a.updateIn(r,["byRoomId",t,"messages"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.includes(a),r=e.indexOf(n);if(r>-1&&t){var o=mh()(e,a);return r=o.indexOf(n),Ih(o,a,r)}return r>-1?Ih(e,a,r):t?e:[].concat(Object(St.a)(e),[a])})},Ah=function(e,t,n){var a=Kf.a.updateIn(e,["pendingById"],function(e){return Kf.a.without(e,n)});return a=Kf.a.updateIn(a,["byRoomId",t,"messages"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return mh()(e,n)})},Rh=function(e,t,n){return Kf.a.updateIn(e,["byId",t],function(e){var t=e.thread||{},a=t.message_count||0,r=t.participants||[];return Object(N.a)({},e,{has_replies:!0,thread:{thread_id:n.thread_room_id,message_count:a+1,participants:Oh()([n.user_id].concat(Object(St.a)(r))),last_message_at:n.created_at}})})},Ch=function(e,t){return Kf.a.updateIn(e,["byId",t,"thread"],function(e){var t=e.message_count||0;return Object(N.a)({},e,{message_count:t>0?t-1:0})})},Nh={messages:[],cursor:{total:0,has_next:!1,next:"",has_prev:!1,prev:""}},kh=Kf.a.from({byId:{},byRoomId:{},pendingByRoomId:{}});var Ph=ah("GET_MESSAGES","MESSAGES"),Lh=ah("RECEIVE_MESSAGE","MESSAGES"),wh=ah("POST_MESSAGE","MESSAGES"),xh=ah("REPLY_TO_MESSAGE","MESSAGES"),Mh=ah("GET_PREV_MESSAGES","MESSAGES"),Dh=ah("GET_NEXT_MESSAGES","MESSAGES"),Uh=ah("GET_PIVOT_MESSAGES","MESSAGES"),Fh=Object(Wf.combineReducers)({getMessages:nh(Ph),receiveMessage:nh(Lh),postMessage:nh(wh),replyToMessage:nh(xh),getPrevMessages:nh(Mh),getNextMessages:nh(Dh),getPivotMessages:nh(Uh)}),Gh=Kf.a.from({});var Bh=n(436),Hh=n.n(Bh);function Vh(e,t,n,a){var r=e.inactive?Object(St.a)(e.inactive):[],o=e.active?Object(St.a)(e.active):[],s=e.admins&&e.admins.includes(t);return n&&!s?(r=_a()(r,function(e){return e!==t}),o.includes(t)||(o=a?[t].concat(Object(St.a)(o)):[].concat(Object(St.a)(o),[t]))):s||(r.includes(t)||(r=[].concat(Object(St.a)(r),[t])),o=_a()(o,function(e){return e!==t})),Object(N.a)({},e,{active:o,inactive:r})}var zh=function(e,t){var n=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e[t]=!0,e},{})}(t);return Kf.a.setIn(e,["onlineById"],n)},Wh=Kf.a.from({byId:{},onlineById:{},byRoomId:{},searchByRoomId:{},mentionableByRoomId:{}});var Yh=ah("GET_PARTICIPANTS","PARTICIPANTS"),Kh=ah("SEARCH_PARTICIPANTS","PARTICIPANTS"),qh=ah("SEARCH_PARTICIPANTS_TO_MENTION","PARTICIPANTS"),Jh=Object(Wf.combineReducers)({getParticipant:nh(Yh),searchParticipants:nh(Kh),searchParticipantsToMention:nh(qh)}),Xh=n(288),$h=n.n(Xh),Qh=Kf.a.from({byId:{},additionalInfoById:{}});var Zh=ah("GET_PROFILES","PROFILES"),e_=ah("GET_ADDITIONAL_INFO","PROFILES"),t_=Object(Wf.combineReducers)({getProfiles:nh(Zh),getAdditionalProfileInfo:nh(e_)}),n_=Kf.a.from({pendingRating:void 0,byRoomId:{},passedByRoomId:{}});var a_=ah("GET_PENDING_RATINGS","PROJECTS"),r_=ah("GET_ROOM_RATINGS","PROJECTS"),o_=ah("MUTATE_MENTOR_RATING","PROJECTS"),s_=Object(Wf.combineReducers)({getPendingRatings:nh(a_),getRoomRatings:nh(r_),mutateMentorRating:nh(o_)}),i_=Kf.a.from({byId:{},currentRoomId:void 0,metaByRoomId:{}});var c_=ah("GET_ROOM","ROOMS"),u_=ah("UPDATE_LAST_VISITED","ROOMS"),l_=ah("GET_ROOM_META","ROOMS"),d_=Object(Wf.combineReducers)({getRoom:nh(c_),updateLastVisited:nh(u_),getRoomMeta:nh(l_)}),m_={threads:[],cursor:{total:0,has_next:!1,next:"",has_prev:!1,prev:""}},p_=Kf.a.from({byId:{},currentThreads:{},stagedThread:void 0});var f_=ah("GET_NEW_THREAD","THREADS"),h_=ah("GET_THREAD","THREADS"),__=ah("GET_THREADS","THREADS"),v_=ah("GET_NEXT_THREADS","THREADS"),E_=Object(Wf.combineReducers)({getNewThread:nh(f_),getThread:nh(h_),getThreads:nh(__),getNextThreads:nh(v_)}),g_=Kf.a.from({me:{},status:"operational",classroomMetadata:{},showWelcomeFlow:!1});var b_=ah("BOOTSTRAP","SESSION"),O_=ah("FETCH_CLASSROOM_METADATA","SESSION"),I_=Object(Wf.combineReducers)({bootstrap:nh(b_),classroomMetadata:nh(O_)}),S_=Kf.a.from({connected:!1});var y_=Object(N.a)({},L("GET_UNREADS","UNREADS"),L("GET_ROOMS_UNREADS","UNREADS"),{INCREMENT_ROOM_UNREADS:"".concat("UNREADS","/INCREMENT_ROOM_UNREADS")}),T_={getUnreads:function(){return P(y_.GET_UNREADS_START,void 0)},getRoomsUnreads:function(e){return P(y_.GET_ROOMS_UNREADS_START,{roomIds:e})},incrementRoomUnreads:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return P(y_.INCREMENT_ROOM_UNREADS,{roomId:e,timestamp:t,messageId:n,isMention:a})}},j_=n(165),A_=n.n(j_),R_=function(e,t){var n=t.rooms,a=Object(fi.a)(t,["rooms"]);return Kf.a.setIn(e,["summary"],a).updateIn(["rooms"],function(e){return Kf.a.merge(e,n)})},C_=function(e,t){return Kf.a.updateIn(e,["rooms"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kf.a.merge(e,t)})},N_=function(e,t,n){return Kf.a.setIn(e,["rooms",t],n)},k_=function(e,t){return Kf.a.setIn(e,["rooms"],Kf.a.without(e.rooms,t))},P_=function(e,t){return Kf.a.updateIn(e,["summary","unread_conversations_count"],function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)-t})},L_=function(e,t,n){return Kf.a.updateIn(e,["summary","unread_messages_count"],function(e){return A_()([e-t,0])}).updateIn(["summary","unread_mentions_count"],function(e){return A_()([e-n,0])})},w_=function(e,t,n){var a=Kf.a.updateIn(e,["summary","unread_thread_messages_count"],function(e){return A_()([e-t,0])}).updateIn(["summary","unread_thread_mentions_count"],function(e){return A_()([e-n,0])});return a.summary.unread_thread_messages_count?a:Kf.a.setIn(a,["summary","has_unread_threads"],!1)},x_=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(N.a)({room_id:e,unread_count:1,mentions_count:0,last_visited:n,oldest_message_id:t,mentions:[]},a?Object(N.a)({},a,{unread_count:a.unread_count+1,mentions_count:r?a.mentions_count+1:a.mentions_count}):{})},M_=function(e){return Kf.a.updateIn(e,["summary","unread_conversations_count"],function(e){return e+1})},D_=function(e){return Kf.a.updateIn(e,["summary","unread_messages_count"],function(e){return e+1})},U_=Kf.a.from({rooms:{},summary:{}});var F_=Object(Wf.combineReducers)({alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xf,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Ba.ADD_ALERT:return Kf.a.from([].concat(Object(St.a)(e),[{type:a.type,message:a.message}]));case Ba.CLEAR_FIRST_ALERT:return Kf.a.from(Jf()(e))}return e},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:th,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta,o=e;switch(n){case $f.GET_LOBBY_FULFILLED:case Pr.GET_CONVERSATIONS_FULFILLED:case Pr.UNARCHIVE_CONVERSATION_FULFILLED:case Pr.CREATE_CONVERSATION_ROOM_FULFILLED:o=eh(e,a.entities);break;case Pr.GET_CONVERSATION_FULFILLED:if(jt()(a.result))break;o=eh(e,a.entities)}switch(n){case Pr.GET_CONVERSATION_READY:o=Kf.a.set(o,"currentConversationId",void 0);break;case Pr.CREATE_STAGED_CONVERSATION_FULFILLED:o=Kf.a.set(o,"stagedConversation",a);break;case Pr.GET_CONVERSATIONS_FULFILLED:o=Kf.a.set(o,"currentConversations",a.result);break;case Pr.CREATE_STAGED_CONVERSATION_READY:o=Kf.a.set(o,"stagedConversation",void 0);break;case Pr.ARCHIVE_CONVERSATION_FULFILLED:var s=r.roomId;o=Kf.a.setIn(o,["byId",s,"status"],"archived")}return o},conversationsAsync:ih,experiments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta;switch(n){case ch.FETCH_EXPERIMENT_VARIATION_FULFILLED:case ch.POST_EXPERIMENT_ACTIVATION_FULFILLED:var o=r.experimentKey;return Kf.a.set(e,o,a)}return e},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=ne()(a,"fileIdentifierString","pendingFile:placeholder");switch(n){case Ud.UPLOAD_IMAGE_CANCELLED:return Kf.a.set(e,"pendingFiles",Kf.a.without(e.pendingFiles,r));case Ud.FILE_DRAG_START:return Kf.a.setIn(e,["ui","isDraggingFile"],!0);case Ud.FILE_DRAG_END:return Kf.a.setIn(e,["ui","isDraggingFile"],!1);case Ud.UPLOAD_IMAGE_PENDING:return Kf.a.setIn(e,["pendingFiles",r,"status"],"pending");case Ud.UPLOAD_IMAGE_PROGRESS:var o=a.progress;return Kf.a.setIn(e,["pendingFiles",r,"progress"],o);case Ud.UPLOAD_IMAGE_REJECTED:var s=a.error;return Kf.a.setIn(e,["pendingFiles",r,"status"],"rejected").setIn(["pendingFiles",r,"error"],s);case Ud.UPLOAD_IMAGE_FULFILLED:var i=a.attachments,c=void 0===i?[]:i;return Kf.a.setIn(e,["pendingFiles",r,"status"],"fulfilled").setIn(["pendingFiles",r,"attachments"],c)}return e},lobby:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta;switch(n){case $f.GET_LOBBY_FULFILLED:var o=a.result;return Kf.a.set(e,"currentLobby",o);case Pr.CREATE_CONVERSATION_ROOM_FULFILLED:var s=a.result,i=hh(e);return ph(i,s);case Pr.ARCHIVE_CONVERSATION_FULFILLED:var c=r.roomId;return fh(e,c);case Pr.UNARCHIVE_CONVERSATION_FULFILLED:var u=r.roomId;return ph(e,u);case Pr.SET_CONVERSATION_RECENCY:var l=a.conversationId,d=ne()(e,"currentLobby.conversations.rooms")||[];if(d.includes(l)){var m=[l].concat(Object(St.a)(mh()(d,l)));return Kf.a.setIn(e,["currentLobby","conversations","rooms"],m)}return e;case oc.ADD_NEW_THREAD_ID:return _h(e)}return e},lobbyAsync:gh,messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta,o=e;switch(n){case Pr.GET_CONVERSATIONS_FULFILLED:case ec.RECEIVE_MESSAGE_FULFILLED:case ec.MERGE_NEW_MESSAGE_BY_ID:case ec.GET_PREV_MESSAGES_FULFILLED:case ec.GET_NEXT_MESSAGES_FULFILLED:case ec.GET_PIVOT_MESSAGES_FULFILLED:case ec.GET_MESSAGES_FULFILLED:o=Zf(e,a.entities.messages);break;case oc.GET_NEW_THREAD_FULFILLED:o=Kf.a.setIn(o,["byId",r.message.message_id],r.message)}switch(n){case ec.GET_PREV_MESSAGES_FULFILLED:var s=a.result,i=s.room_id;o=Kf.a.updateIn(o,["byRoomId",i],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(N.a)({},Nh,{room_id:i}),t=arguments.length>1?arguments[1]:void 0;return Object(N.a)({},e,{messages:[].concat(Object(St.a)(t.messages),Object(St.a)(e.messages)),cursor:Object(N.a)({},e.cursor,{has_prev:ne()(t,"cursor.has_prev",!1),prev:ne()(t,"cursor.prev",void 0)})})},s);break;case ec.GET_NEXT_MESSAGES_FULFILLED:var c=a.result,u=c.room_id;o=Kf.a.updateIn(o,["byRoomId",u],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(N.a)({},Nh,{room_id:u}),t=arguments.length>1?arguments[1]:void 0;return Object(N.a)({},e,{messages:[].concat(Object(St.a)(e.messages),Object(St.a)(t.messages)),cursor:Object(N.a)({},e.cursor,{has_next:ne()(t,"cursor.has_next",!1),next:ne()(t,"cursor.next",void 0)})})},c);break;case ec.GET_PIVOT_MESSAGES_FULFILLED:case ec.GET_MESSAGES_FULFILLED:var l=a.result;o=Kf.a.setIn(o,["byRoomId",l.room_id],l);break;case ec.GET_MESSAGES_READY:var d=a.roomId;o=Kf.a.setIn(o,["byRoomId",d],void 0);break;case ec.POST_MESSAGE_PENDING:var m=a.message;o=yh(o,m);break;case ec.POST_MESSAGE_REJECTED:var p=a.message;o=Th(o,p,{failed:!0});break;case ec.REPLACE_PENDING_MESSAGE:var f=a.roomId,h=a.pendingMessageId,_=a.messageId;o=jh(o,f,h,_);break;case ec.CANCEL_PENDING_MESSAGE_PENDING:var v=a.message,E=v.room_id,g=v.message_id;o=Ah(o,E,g);break;case ec.RECEIVE_MESSAGE_FULFILLED:var b=a.result;if(!r.isNewMessage)break;var O=ne()(r,"payload.roomId",void 0),I=!1===ne()(o,"byRoomId[".concat(O,"].cursor.has_next"));O&&I&&(o=Sh(o,O,b));var S=ne()(r,"payload.message.thread_message_id");S&&o.byId[S]&&(o=Rh(o,S,r.payload.message));break;case ec.DELETE_MESSAGE_FULFILLED:var y,T=a.message,j=T.room_id,A=T.message_id,R=T.parent_message_id;A&&(o=Kf.a.update(o,"byId",function(e,t){return e.without(t)},A)),j&&(o.byRoomId[j]&&(y=o.byRoomId[j].messages.filter(function(e){return e!==A})),o=Kf.a.setIn(o,["byRoomId",j,"messages"],y)),R&&o.byId[R]&&(o=Ch(o,R));break;case ec.EDIT_MESSAGE_FULFILLED:var C=a.message_id,k=o.byId[C];if(C&&k){var P=Object(N.a)({},k,a);o=Kf.a.setIn(o,["byId",C],P)}break;case ec.GET_LINKS_INFO_FULFILLED:var L=a.message_id,w=a.links;L&&o.byId[L]&&(o=Kf.a.updateIn(o,["byId",L],function(e,t){return Object(N.a)({},e,{links:w})}))}return o},messagesAsync:Fh,nanodegrees:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Hm.GET_NANODEGREE_FULFILLED:var r=a.nanodegree;return Kf.a.set(e,r.key,r)}return e},participants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta,o=e;switch(n){case _o.GET_PARTICIPANTS_FULFILLED:o=Zf(e,a.entities.participants)}switch(n){case _o.GET_PARTICIPANTS_FULFILLED:var s=a.result;o=Kf.a.setIn(o,["byRoomId",s.room_id],s);break;case _o.SEARCH_PARTICIPANTS_READY:var i=a.roomId;o=Kf.a.updateIn(o,["searchByRoomId"],function(e){return Kf.a.without(e,i)});break;case _o.SEARCH_PARTICIPANTS_FULFILLED:var c=r.roomId;o=Kf.a.setIn(o,["searchByRoomId",c],a);break;case _o.SEARCH_PARTICIPANTS_TO_MENTION_READY:var u=a.roomId;o=Kf.a.updateIn(o,["mentionableByRoomId"],function(e){return Kf.a.without(e,u)});break;case _o.SEARCH_PARTICIPANTS_TO_MENTION_FULFILLED:var l=r.roomId;o=Kf.a.setIn(o,["mentionableByRoomId",l],a);break;case _o.SET_PARTICIPANT_STATUS_FULFILLED:var d=a.userId,m=a.roomId,p=a.isActive,f=a.isMe,h=e.byId[d],_=e.byRoomId[m],v=_&&Hh()(_.admins,d);h&&(o=Kf.a.setIn(o,["byId",d,"is_active"],p),_&&!v&&(o=Kf.a.updateIn(o,["byRoomId",m],function(e){return Vh(e,d,p,f)})));break;case ec.RECEIVE_MESSAGE_FULFILLED:var E=r.payload.message,g=r.isMe,b=E&&E.thread_room_id;if(b){var O=ne()(o,["byRoomId",b],void 0);O&&E&&(o=Kf.a.updateIn(o,["byRoomId",b],function(e){return Vh(O,E.user_id,!0,g)}))}break;case $f.CHECK_ACTIVE_USERS_RECEIVED:var I=a.userIds;o=zh(o,I)}return o},participantsAsync:Jh,profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qh,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta,o=e;switch(n){case Pr.GET_CONVERSATION_FULFILLED:case Pr.GET_CONVERSATIONS_FULFILLED:case $f.GET_LOBBY_FULFILLED:case Jr.GET_ROOMS_PROFILES_FULFILLED:case Jr.GET_PROFILES_FULFILLED:if(de()(a))break;var s=a.entities.profiles;o=Zf(e,$h.a.mapValues(s,function(e){return $h.a.omit(e,["nanodegrees"])}));break;case x.UPDATE_ME_FULFILLED:var i=a.id;o=Kf.a.setIn(e,["byId",i],a);break;case Jr.GET_ADDITIONAL_INFO_FULFILLED:var c=r.userId;c&&(o=Kf.a.setIn(e,["additionalInfoById",c],a))}return o},profilesAsync:t_,projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta;switch(n){case Br.GET_PENDING_RATINGS_FULFILLED:return Kf.a.setIn(e,["pendingRating"],a);case Br.GET_ROOM_RATINGS_FULFILLED:var o=r.roomId;return Kf.a.setIn(e,["byRoomId",o],a);case Br.MUTATE_MENTOR_RATING_FULFILLED:return Kf.a.setIn(e,["byNdId"],{});case Br.GET_PASSED_USERS_FULFILLED:var s=r.roomId;return Kf.a.setIn(e,["passedByRoomId",s],a)}return e},projectsAsync:s_,rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=e;switch(n){case $f.GET_LOBBY_FULFILLED:case $r.GET_ROOM_FULFILLED:r=Zf(e,a.entities.rooms)}switch(n){case $r.GET_ROOM_READY:r=Kf.a.set(r,"currentRoomId",void 0);break;case $r.GET_ROOM_META_FULFILLED:var o=a.roomId,s=a.project;r=Kf.a.setIn(r,["metaByRoomId",o,"project"],s)}return r},roomsAsync:d_,threads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.meta,o=e;switch(n){case oc.GET_THREADS_FULFILLED:case oc.GET_NEXT_THREADS_FULFILLED:case oc.GET_THREAD_FULFILLED:o=Zf(e,a.entities.threads);break;case ec.RECEIVE_MESSAGE_FULFILLED:var s=r.payload.message,i=s.thread_room_id;i&&ne()(o,["byId",i],void 0)&&(o=Kf.a.updateIn(o,["byId",i,"topic","thread"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.message_count||0,a=e.participants||[];return{thread_id:t.thread_room_id,message_count:n+1,participants:Oh()([t.user_id].concat(Object(St.a)(a))),last_message_at:t.created_at}},s))}switch(n){case oc.GET_NEW_THREAD_FULFILLED:var c=a;o=Kf.a.set(o,"stagedThread",c);break;case oc.GET_NEW_THREAD_READY:o=Kf.a.set(o,"stagedThread",void 0);break;case oc.GET_THREAD_FULFILLED:var u=a.result;o=Kf.a.updateIn(o,["currentThreads","threads"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Oh()([].concat(Object(St.a)(e),[u]))});break;case oc.ADD_NEW_THREAD_ID:var l=a.threadId;ue()(o.currentThreads)||(o=Kf.a.updateIn(o,["currentThreads","threads"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Oh()([l].concat(Object(St.a)(e)))}));break;case oc.GET_THREADS_FULFILLED:var d=a.result;o=Kf.a.setIn(o,["currentThreads"],d);break;case oc.GET_NEXT_THREADS_FULFILLED:var m=a.result;o=Kf.a.updateIn(o,["currentThreads"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(N.a)({},m_);return Object(N.a)({},e,{threads:[].concat(Object(St.a)(e.threads),Object(St.a)(m.threads)),cursor:Object(N.a)({},e.cursor,{has_next:m.cursor.has_next,next:m.cursor.next})})})}return o},threadsAsync:E_,session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case x.BOOTSTRAP_FULFILLED:case x.FETCH_ME_FULFILLED:return Kf.a.merge(e,a);case x.UPDATE_ME_FULFILLED:return Kf.a.set(e,"me",a);case x.FETCH_STATUS_FULFILLED:return Kf.a.set(e,"status",a);case x.FETCH_CLASSROOM_METADATA_FULFILLED:return Kf.a.set(e,"classroomMetadata",a.user);case x.SHOW_WELCOME_FLOW:return Kf.a.set(e,"showWelcomeFlow",!0);case x.HIDE_WELCOME_FLOW:return Kf.a.set(e,"showWelcomeFlow",!1)}return e},sessionAsync:I_,sockets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=e;switch(n){case Fr.UPDATE_CONNECTION_STATUS:var o=a.connected;r=Kf.a.set(r,"connected",o)}return r},unreads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y_.GET_UNREADS_FULFILLED:return R_(e,a);case y_.GET_ROOMS_UNREADS_FULFILLED:return C_(e,a);case $r.UPDATE_LAST_VISITED_FULFILLED:var r=a.roomId,o=a.unreads,s=e,i=ne()(s,["rooms",r]);if(de()(i))return s;s=o.unread_count?N_(s,r,o):k_(s,r);var c=(i.unread_count||0)-o.unread_count,u=(i.mentions_count||0)-o.mentions_count;return s=Ee(r)?P_(s,c):ve(r)?w_(s,c,u):L_(s,c,u);case y_.INCREMENT_ROOM_UNREADS:var l=a.roomId,d=a.messageId,m=a.timestamp,p=a.isMention,f=e,h=ne()(f,"rooms[".concat(l,"]")),_=x_(l,d,m,h,p);return f=N_(f,l,_),f=Ee(l)?M_(f):ve(l)?Kf.a.setIn(f,["summary","has_unread_threads"],!0):D_(f)}return e}}),G_=n(437),B_=n.n(G_),H_=n(3),V_=Ra.a.mark(K_),z_=Ra.a.mark(q_),W_=Ra.a.mark(J_),Y_=Ra.a.mark(X_);function K_(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.b)(zf.d,4e3);case 2:return e.next=4,Object(H_.f)(Ha.clearFirstAlert());case 4:case"end":return e.stop()}},V_)}function q_(){var e;return Ra.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(H_.h)(Mf);case 3:if(t.sent.length){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Object(H_.e)(K_);case 8:return e=t.sent,t.next=11,Object(H_.i)(Ba.CLEAR_FIRST_ALERT);case 11:return t.next=13,Object(H_.c)(e);case 13:t.next=0;break;case 15:case"end":return t.stop()}},z_)}function J_(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Ba.ADD_ALERT,q_);case 2:case"end":return e.stop()}},W_)}function X_(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([J_()]);case 2:case"end":return e.stop()}},Y_)}var $_=function(e,t,n){var a="".concat(t,"_PENDING"),r="".concat(t,"_REJECTED");return Ra.a.mark(function t(o){return Ra.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(H_.f)(Object(N.a)({},o,{type:n[a]}));case 3:return t.next=5,e(o);case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(H_.f)(w(n[r],t.t0));case 11:case"end":return t.stop()}},t,null,[[0,7]])})},Q_=function(e,t){return{id:e.join("-"),members_count:{students:e.length},status:"joined",type:"conversation",profiles:t}},Z_="{\n  has_unread_threads\n  unread_mentions_count\n  unread_messages_count\n  unread_conversations_count\n  unread_thread_messages_count\n  unread_thread_mentions_count\n  rooms\n}",ev=("{\n  unreads_lobby ".concat(Z_,"\n}"),"\n  id\n  type\n  members_count\n  status\n  profiles {\n    id\n    first_name\n    last_name\n    show_location\n    photo_url\n    location {\n      description\n    }\n    roles {\n      type\n      payload {\n        bio\n        rooms\n      }\n    }\n  }\n  meta {\n    ... on PersonalMentorConversationMeta {\n      type\n      scope_id\n      originator\n      scope_type\n      participants\n      scope_payload {\n        mentor\n        nd_key\n        student\n        nd_locale\n      }\n    }\n  }\n"),tv="\n  has_next\n  has_prev\n  next\n  prev\n  total\n",nv="{".concat(tv,"}"),av="\n  rooms {\n    ".concat(ev,"\n    summary {").concat("\n  message_count\n  last_message {\n    attachments\n    content\n    content_preview\n    created_at\n    mentions\n    message_id\n    message_id_str\n    room_id\n    parent_room_id\n    updated_at\n    user_id\n    has_replies\n  }\n","}\n  },\n  cursor {").concat(tv,"}\n"),rv="\n  meta {\n    ... on GuidedStudyMeta {\n      id\n      nanodegree {\n        id\n      }\n      start_date\n    }\n    ... on GuidedStudyCohortMeta {\n      id\n      nanodegree {\n        id\n        title\n      }\n      start_date\n    }\n    ... on GuidedStudySessionMeta {\n      id\n      nanodegree {\n        id\n        title\n      }\n      session_id\n      start_date\n    }\n  }\n  title\n  type\n  rooms {\n    status\n    room_id\n    room_type\n    room_title\n    room_summary\n    members_count\n  }\n",ov="{\n  lobby {\n    has_student_hub_access\n    total_threads\n    total_conversations\n    personal_mentor_conversations {\n      ".concat(ev,"\n    }\n    conversations {\n      rooms { ").concat(ev," }\n    }\n    community_groups: groups(input: {types: [community]}) {\n      ").concat(rv,"\n    }\n    mentored_groups: groups(input: {types: [guided_study_cohort, guided_study_nanodegree]}) {\n      ").concat(rv,"\n    }\n    knowledge_profile {\n      has_access\n    }\n  }\n}"),sv=n(438),iv=n.n(sv),cv=k.REACT_APP_NAME,uv=function(e){return Ii(k.REACT_APP_HUB_BFF_API_URL,e)},lv=function(e){var t={roomId:e},n="\n    query ".concat(cv,"_GetProjectMentorRatingsDue($roomId: String) {\n      user { project_mentor_ratings_due(input: {room_id: $roomId}) {\n        ...mentorsToRate\n      }}\n    }\n    fragment mentorsToRate on MentorsToRate ").concat("{\n   project_title,\n   mentors {\n     id,\n     first,\n     last,\n     photo_url\n   },\n   room_id\n}","\n  ");return uv({query:n,variables:t})},dv={searchRoomParticipants:function(e){var t="\n      query ".concat(cv,"_GetParticipants($input: ParticipantsInput!) {\n        participants(input: $input) {\n          participants {\n            ...participant\n          },\n          cursor {\n            ...cursor\n          }\n        }\n      }\n\n      fragment participant on Participant ").concat("{\n  id\n  first\n  last\n  is_active\n  photo_url\n  type\n}","\n      fragment cursor on Cursor ").concat(nv,"\n    ");return uv({query:t,variables:{input:iv()(e,{count:20,after:0})}})},fetchPendingRatings:function(){return lv()},fetchRatingsByRoomId:function(e){return lv(e)},mutateMentorRating:function(e,t,n,a){var r={mentorId:e,userId:t,roomId:n,rating:{payload:a,version:"1.0.0"}},o="\n      mutation ".concat(cv,"_RateProjectMentor(\n        $mentorId: String!,\n        $userId: String!,\n        $roomId: String!,\n        $rating: JSON!\n      ) {\n        create_project_mentor_rating (\n          input: {\n            mentor_id: $mentorId,\n            student_id: $userId,\n            room_id: $roomId,\n            response: $rating\n          }\n        ) {\n          ...projectMentorRating\n        }\n      }\n\n      fragment projectMentorRating on ProjectMentorRating ").concat("{\n  id\n  mentor_id\n  response\n  rating\n  room_id\n  rubric_id\n  created_at\n}","\n    ");return uv({query:o,variables:r})},fetchPassedUsersByRoomId:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n){var a,r,o;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={roomId:t,participantIds:n},r="query ".concat(cv,"_GetPassedUsers($roomId: String!, $participantIds: [String]!){\n       user { participants_passed(room_id: $roomId, user_ids: $participantIds) }\n    }"),e.next=4,uv({query:r,variables:a});case 4:return o=e.sent,e.abrupt("return",ne()(o,"data.user.participants_passed"));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),syncLobby:function(){var e=Object(Ca.a)(Ra.a.mark(function e(){var t,n;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="mutation ".concat(cv,"_SyncLobbyMutation {sync_lobby}"),e.next=3,uv({query:t});case 3:return n=e.sent,e.abrupt("return",ne()(n,"data.sync_lobby"));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),syncPairings:function(){var e=Object(Ca.a)(Ra.a.mark(function e(){var t,n;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="mutation ".concat(cv,"_SyncPairingsMutation {sync_pairings}"),e.next=3,uv({query:t});case 3:return n=e.sent,e.abrupt("return",ne()(n,"data.sync_pairings"));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),fetchLobby:function(){var e=Object(Ca.a)(Ra.a.mark(function e(){var t,n;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="query ".concat(cv,"_FetchLobby ").concat(ov),e.next=3,uv({query:t});case 3:return n=e.sent,e.abrupt("return",ne()(n,"data.lobby"));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),fetchUnreads:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="query ".concat(cv,"_FetchUnreadsLobby($userId: String!) {\n      unreads_lobby(user_id: $userId ) ").concat(Z_,"\n    }"),a={userId:t},e.next=4,uv({query:n,variables:a});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.unreads_lobby"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchRoomsUnreads:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="query ".concat(cv,"_FetchRoomsUnreads($roomIds: [String!]!) {\n      unreads(input:{room_ids: $roomIds})\n    }"),a={roomIds:t},e.next=4,uv({query:n,variables:a});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.unreads"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchConversation:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)({},t),a="query ".concat(cv,"_GetConversation($conversationId: String, $userIds: [String!]){\n      conversation(input:{conversation_id: $conversationId, user_ids: $userIds}) {\n        ").concat(ev,"\n      }\n    }"),e.next=4,uv({query:a,variables:n});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.conversation"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchConversations:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r,o,s,i;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.count,a=void 0===n?8:n,r=t.page,o={count:a,offset:((void 0===r?1:r)-1)*a},s="query ".concat(cv,"_GetConversations($count: Int, $offset: Int){\n      conversations(input:{count: $count, offset: $offset, archived: true}) {\n        ").concat(av,"\n      }\n    }"),e.next=6,uv({query:s,variables:o});case 6:return i=e.sent,e.abrupt("return",ne()(i,"data.conversations"));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createConversation:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)({},t),a="mutation ".concat(cv,"_CreateConversation($roomId: String, $userIds: [String!]!){\n      create_conversation(input:{room_id: $roomId, user_ids: $userIds}) { ").concat(ev," }\n    }"),e.next=4,uv({query:a,variables:n});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.create_conversation"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),archiveConversation:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)({},t),a="mutation ".concat(cv,"_ArchiveConversation($roomId: String!){\n      archive_conversation(input:{room_id: $roomId}) { ").concat(ev," }\n    }"),e.next=4,uv({query:a,variables:n});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.archive_conversation"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),unarchiveConversation:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)({},t),a="mutation ".concat(cv,"_UnarchiveConversation($roomId: String!){\n      unarchive_conversation(input:{room_id: $roomId}) { ").concat(ev," }\n    }"),e.next=4,uv({query:a,variables:n});case 4:return r=e.sent,e.abrupt("return",ne()(r,"data.unarchive_conversation"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchAdditionalProfileInfo:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a,r;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:t},a="\n      query ".concat(cv,"_GetAdditionalProfileInfo($userId: String!) {\n        knowledge(input: {userId: $userId}) {\n          activity {\n            answers_count\n            answers_accepted\n            up_votes_received\n          }\n        }\n        user {\n          nanodegrees(user_id: $userId) {\n            id\n            title\n            key\n            is_graduated\n            projects {\n              completed_count\n              projects {\n                status\n                title\n                id\n              }\n            }\n          }\n        }\n      }"),e.next=4,uv({query:a,variables:n});case 4:return r=e.sent,e.abrupt("return",{nanodegrees:ne()(r,"data.user.nanodegrees"),knowledge:ne()(r,"data.knowledge")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateUnread:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t,n){var a,r,o;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={roomId:t,lastVisited:n},r="\n      mutation ".concat(cv,"_UpdateUnread($roomId: String!, $lastVisited: String!) {\n        update_unread(input: {room_id: $roomId, last_visited: $lastVisited}) { ").concat("\n  unread_count\n  mentions_count\n  last_visited\n  oldest_message_id\n  mentions\n"," }\n      }\n    "),e.next=4,uv({query:r,variables:a});case 4:return o=e.sent,e.abrupt("return",ne()(o,"data.update_unread"));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),fetchRoomMetaByRoomId:function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={roomId:t},a="\n      query ".concat(cv,"_GetProjectInfoByRoomId($roomId: String!) {\n        project(input: {room_id: $roomId}) {\n          due_at\n          description\n          id\n          key\n          lesson_summary\n          title\n          rubric_id\n          reviews_project_id\n          summary\n          project_state {\n            state\n            submissions {\n              id\n              created_at\n              status\n              result\n              url\n              is_legacy\n            }\n          }\n          knowledge {\n            nanodegree_tag_id\n            project_tag_id\n            total_questions\n          }\n        }\n      }"),e.abrupt("return",uv({query:a,variables:n}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},mv=Ra.a.mark(vv),pv=Ra.a.mark(Ev),fv=Ra.a.mark(gv),hv=Ra.a.mark(bv),_v=Ra.a.mark(Ov);function vv(e){var t,n;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.h)(Ft);case 2:return t=e.sent,e.next=5,Object(H_.b)(dv.fetchUnreads,t.id);case 5:return n=e.sent,e.next=8,Object(H_.f)({type:y_.GET_UNREADS_FULFILLED,payload:n});case 8:case"end":return e.stop()}},mv)}function Ev(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.roomIds,a.next=3,Object(H_.b)(dv.fetchRoomsUnreads,t);case 3:return n=a.sent,a.next=6,Object(H_.f)({type:y_.GET_ROOMS_UNREADS_FULFILLED,payload:n});case 6:return a.abrupt("return",n);case 7:case"end":return a.stop()}},pv)}function gv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(y_.GET_UNREADS_START,$_(vv,"GET_UNREADS",y_));case 2:case"end":return e.stop()}},fv)}function bv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(y_.GET_ROOMS_UNREADS_START,$_(Ev,"GET_ROOMS_UNREADS",y_));case 2:case"end":return e.stop()}},hv)}function Ov(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([gv(),bv()]);case 2:case"end":return e.stop()}},_v)}var Iv=Ra.a.mark(Dv),Sv=Ra.a.mark(Uv),yv=Ra.a.mark(Fv),Tv=Ra.a.mark(Gv),jv=Ra.a.mark(Bv),Av=Ra.a.mark(Hv),Rv=Ra.a.mark(Vv),Cv=Ra.a.mark(zv),Nv=Ra.a.mark(Wv),kv=Ra.a.mark(Yv),Pv=Ra.a.mark(Kv),Lv=Ra.a.mark(qv),wv=Ra.a.mark(Jv),xv=Ra.a.mark(Xv),Mv=Ra.a.mark($v);function Dv(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,n=e.payload,a=n.messageId,r=n.userIds,c.next=4,Object(H_.b)(dv.fetchConversation,{conversationId:t,userIds:r});case 4:if(o=c.sent,s=cr(o),!o.id){c.next=25;break}if(t=o.id,!a){c.next=13;break}return c.next=11,Object(H_.f)(tc.getPivotMessages(t,a));case 11:c.next=23;break;case 13:return c.next=15,Object(H_.h)(Rr,t);case 15:if(!(i=c.sent)||!i.unread_count){c.next=21;break}return c.next=19,Object(H_.f)(tc.getPivotMessages(t,Number(i.oldest_message_id)));case 19:c.next=23;break;case 21:return c.next=23,Object(H_.f)(tc.getMessages(t));case 23:return c.next=25,Object(H_.f)(vo.getParticipants(t));case 25:return c.next=27,Object(H_.f)({type:Pr.GET_CONVERSATION_FULFILLED,payload:s});case 27:case"end":return c.stop()}},Iv)}function Uv(e){var t,n,a,r,o,s;return Ra.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.page,a=t.count,i.next=3,Object(H_.b)(dv.fetchConversations,{page:n,count:a});case 3:return r=i.sent,o=ur(r),s=ne()(o,"result.rooms",[]),i.next=8,Object(H_.b)(Ev,{payload:{roomIds:s}});case 8:return i.next=10,Object(H_.f)({type:Pr.GET_CONVERSATIONS_FULFILLED,payload:o});case 10:case"end":return i.stop()}},Sv)}function Fv(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.userIds,r.next=3,Object(H_.h)(Zn,t);case 3:return n=r.sent,a=Q_(t,n),r.next=7,Object(H_.f)({type:Pr.CREATE_STAGED_CONVERSATION_FULFILLED,payload:a});case 7:case"end":return r.stop()}},yv)}function Gv(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.userIds,a=t.roomId,s.next=3,Object(H_.b)(dv.createConversation,{roomId:a,userIds:n});case 3:return r=s.sent,o=cr(r),s.next=7,Object(H_.f)({type:Pr.CREATE_CONVERSATION_ROOM_FULFILLED,payload:o});case 7:return s.abrupt("return",r);case 8:case"end":return s.stop()}},Tv)}function Bv(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.roomId,r.next=3,Object(H_.b)(dv.archiveConversation,{roomId:t});case 3:return n=r.sent,a=cr(n),r.next=7,Object(H_.f)({type:Pr.ARCHIVE_CONVERSATION_FULFILLED,payload:a,meta:{roomId:t}});case 7:return r.abrupt("return",n);case 8:case"end":return r.stop()}},jv)}function Hv(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.roomId,r.next=3,Object(H_.b)(dv.unarchiveConversation,{roomId:t});case 3:return n=r.sent,a=cr(n),r.next=7,Object(H_.f)({type:Pr.UNARCHIVE_CONVERSATION_FULFILLED,payload:a,meta:{roomId:t}});case 7:return r.abrupt("return",n);case 8:case"end":return r.stop()}},Av)}function Vv(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.userIds,a=t.message,r=t.roomId,s.next=3,Object(H_.b)(Gv,{payload:{userIds:n,roomId:r}});case 3:if(o=s.sent,!(re()(a,"file")&&a.file instanceof File)){s.next=9;break}return s.next=7,Object(H_.f)(tc.postImageMessage(a.file,o.id));case 7:s.next=11;break;case 9:return s.next=11,Object(H_.f)(tc.postMessage(a,o.id));case 11:case"end":return s.stop()}},Rv)}function zv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.GET_CONVERSATION_START,$_(Dv,"GET_CONVERSATION",Pr));case 2:case"end":return e.stop()}},Cv)}function Wv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.GET_CONVERSATIONS_START,$_(Uv,"GET_CONVERSATIONS",Pr));case 2:case"end":return e.stop()}},Nv)}function Yv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.CREATE_STAGED_CONVERSATION_START,$_(Fv,"CREATE_STAGED_CONVERSATION",Pr));case 2:case"end":return e.stop()}},kv)}function Kv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.CREATE_CONVERSATION_ROOM_START,$_(Gv,"CREATE_CONVERSATION_ROOM",Pr));case 2:case"end":return e.stop()}},Pv)}function qv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.ARCHIVE_CONVERSATION_START,$_(Bv,"ARCHIVE_CONVERSATION",Pr));case 2:case"end":return e.stop()}},Lv)}function Jv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.UNARCHIVE_CONVERSATION_START,$_(Hv,"UNARCHIVE_CONVERSATION",Pr));case 2:case"end":return e.stop()}},wv)}function Xv(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Pr.CREATE_CONVERSATION_AND_SUBMIT_START,$_(Vv,"CREATE_CONVERSATION_AND_SUBMIT",Pr));case 2:case"end":return e.stop()}},xv)}function $v(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([zv(),Wv(),Yv(),Kv(),qv(),Jv(),Xv()]);case 2:case"end":return e.stop()}},Mv)}var Qv=k.REACT_APP_SERVICES_OPTIMIZELY_PROJECT_ID,Zv={attributes:void 0,projectId:void 0},eE={fetchExperimentVariation:function(e,t,n){var a=n||Zv,r=a.attributes,o=a.projectId;return function(e,t){return gi(k.REACT_APP_EXPERIMENTS_API_URL,e,t)}("/users/".concat(e,"/experiments/").concat(t,"/variation"),{params:{attributes:r},headers:{"X-Optimizely-Project-ID":o||Qv}})},postExperimentActivation:function(e,t,n){var a=n||Zv,r=a.attributes,o=a.projectId;return function(e,t,n){return bi(k.REACT_APP_EXPERIMENTS_API_URL,e,t,n)}("/users/".concat(e,"/experiments/").concat(t,"/activation"),{attributes:r},{headers:{"X-Optimizely-Project-ID":o||Qv}})}},tE=Ra.a.mark(cE),nE=Ra.a.mark(uE),aE=Ra.a.mark(lE),rE=Ra.a.mark(dE),oE=Ra.a.mark(mE),sE=Ra.a.mark(pE),iE=Ra.a.mark(fE);function cE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([]);case 2:case"end":return e.stop()}},tE)}function uE(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.userId,a=t.experimentKey,r=t.opts,s.next=3,Object(H_.b)(eE.fetchExperimentVariation,n,a,r);case 3:return o=s.sent,s.next=6,Object(H_.f)({type:ch.FETCH_EXPERIMENT_VARIATION_FULFILLED,payload:o,meta:{experimentKey:a}});case 6:case"end":return s.stop()}},nE)}function lE(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.userId,a=t.experimentKey,r=t.opts,s.next=3,Object(H_.b)(eE.postExperimentActivation,n,a,r);case 3:return o=s.sent,s.next=6,Object(H_.f)({type:ch.POST_EXPERIMENT_ACTIVATION_FULFILLED,payload:o,meta:{experimentKey:a}});case 6:case"end":return s.stop()}},aE)}function dE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(x.BOOTSTRAP_FULFILLED,cE);case 2:case"end":return e.stop()}},rE)}function mE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ch.FETCH_EXPERIMENT_VARIATION_START,$_(uE,"FETCH_EXPERIMENT_VARIATION",ch));case 2:case"end":return e.stop()}},oE)}function pE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ch.POST_EXPERIMENT_ACTIVATION_START,$_(lE,"POST_EXPERIMENT_ACTIVATION",ch));case 2:case"end":return e.stop()}},sE)}function fE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([dE(),mE(),pE()]);case 2:case"end":return e.stop()}},iE)}var hE=n(439),_E=n.n(hE);function vE(e){var t=new FormData;return t.append("uploadFile",e),Object(zf.e)(function(e){var n=new XMLHttpRequest,a=function(t){if(t.lengthComputable){var n=t.loaded/t.total*100;e({progress:n})}},r=function(t){e({err:new Error("Upload failed")}),e(zf.a)};return n.upload.addEventListener("progress",a),n.upload.addEventListener("error",r),n.upload.addEventListener("abort",r),n.onreadystatechange=function(){var t=n.readyState,a=n.status,o=n.response;4===t&&(200===a?(e({success:!0,response:JSON.parse(o)}),e(zf.a)):r())},n.open("POST","".concat(k.REACT_APP_UPLOADER_API_URL,"/file/upload"),!0),n.setRequestHeader("Authorization","Bearer ".concat(function(e){var t=new RegExp(e+"=([^;]+)").exec(document.cookie);return null!=t?unescape(t[1]):null}("_jwt"))),n.send(t),function(){n.upload.removeEventListener("progress",a),n.upload.removeEventListener("error",r),n.upload.removeEventListener("abort",r),n.onreadystatechange=null,n.abort()}},zf.b.sliding(2))}var EE=Ra.a.mark(yE),gE=Ra.a.mark(TE),bE=Ra.a.mark(jE),OE=Ra.a.mark(AE),IE=Ra.a.mark(RE),SE=Ra.a.mark(CE);function yE(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t="ERROR: Image must be smaller than ".concat(zi(Bi),"."),n.next=3,Object(H_.f)(Fd.imageUploadRejected(e,Error(t)));case 3:return n.next=5,Object(H_.f)(Ha.addAlert(np.ERROR,t));case 5:case"end":return n.stop()}},EE)}function TE(e,t){var n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n="ERROR: ".concat(t," files are not supported."),a.next=3,Object(H_.f)(Fd.imageUploadRejected(e,Error(n)));case 3:return a.next=5,Object(H_.f)(Ha.addAlert(np.ERROR,n));case 5:case"end":return a.stop()}},gE)}function jE(e){var t,n,a,r,o,s,i,c,u,l,d,m;return Ra.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.payload,n=t.file,a=t.fileIdentifierString,p.prev=1,r=n.size,o=n.type,!(r>Bi)){p.next=7;break}return p.next=6,Object(H_.b)(yE,a);case 6:return p.abrupt("return");case 7:if(o in _E()(Eu)){p.next=11;break}return p.next=10,Object(H_.b)(TE,a,o);case 10:return p.abrupt("return");case 11:return p.next=13,Object(H_.b)(vE,n);case 13:s=p.sent;case 14:return p.next=17,Object(H_.i)(s);case 17:if(i=p.sent,c=i.progress,u=void 0===c?0:c,l=i.err,d=i.success,m=i.response,!l){p.next=27;break}return p.next=26,Object(H_.f)(Fd.imageUploadRejected(a,l));case 26:return p.abrupt("return");case 27:if(!d){p.next=31;break}return p.next=30,Object(H_.f)(Fd.imageUploadSuccess(a,m.attachments));case 30:return p.abrupt("return",m);case 31:return p.next=33,Object(H_.f)(Fd.imageUploadProgress(a,u));case 33:p.next=14;break;case 35:p.next=41;break;case 37:return p.prev=37,p.t0=p.catch(1),p.next=41,Object(H_.f)(w(Ud.UPLOAD_IMAGE_REJECTED,p.t0));case 41:return p.prev=41,p.next=44,Object(H_.d)();case 44:if(!p.sent){p.next=47;break}return p.next=47,Object(H_.f)(Fd.imageUploadCancelled(a));case 47:return p.finish(41);case 48:case"end":return p.stop()}},bE,null,[[1,37,41,48]])}function AE(e){var t,n,a,r,o,s;return Ra.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.fileIdentifierString,a=t.file,i.next=3,Object(H_.f)(Fd.imageUploadPending(n));case 3:return i.next=5,Object(H_.g)({response:Object(H_.b)(jE,{payload:{file:a,fileIdentifierString:n}}),cancel:Object(H_.i)(Ud.CANCEL_UPLOAD_SAGA)});case 5:if(r=i.sent,o=r.response,s=r.cancel,de()(o)){i.next=12;break}return i.abrupt("return",ne()(o,"attachments",[]));case 12:if(de()(s)){i.next=14;break}return i.abrupt("return",!1);case 14:case"end":return i.stop()}},OE)}function RE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Ud.UPLOAD_IMAGE_START,AE);case 2:case"end":return e.stop()}},IE)}function CE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([RE()]);case 2:case"end":return e.stop()}},SE)}var NE=Ra.a.mark(ME),kE=Ra.a.mark(DE),PE=Ra.a.mark(UE),LE=Ra.a.mark(FE),wE=Ra.a.mark(GE),xE=6e4;function ME(){var e,t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(dv.fetchLobby);case 2:return e=n.sent,t=pr(e),n.next=6,Object(H_.f)({type:$f.GET_LOBBY_FULFILLED,payload:t});case 6:case"end":return n.stop()}},NE)}function DE(){var e,t=arguments;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length>0&&void 0!==t[0]?t[0]:xE;case 1:return n.prev=2,n.next=5,Object(H_.f)(T_.getUnreads());case 5:return n.next=7,Object(zf.d)(e);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n.catch(2),n.abrupt("return");case 12:n.next=1;break;case 14:case"end":return n.stop()}},kE,null,[[2,9]])}function UE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(H_.i)($f.POLL_LOBBY_UPDATES_START);case 3:return e.next=5,Object(H_.g)({poll:Object(H_.b)(DE),cancel:Object(H_.i)($f.POLL_LOBBY_UPDATES_CANCEL)});case 5:e.next=0;break;case 7:case"end":return e.stop()}},PE)}function FE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)($f.GET_LOBBY_START,$_(ME,"GET_LOBBY",$f));case 2:case"end":return e.stop()}},LE)}function GE(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([FE(),UE()]);case 2:case"end":return e.stop()}},wE)}var BE=n(440),HE=n.n(BE),VE=function(e,t){return gi(k.REACT_APP_COMMUNITY_API_URL,e,t)},zE=function(e,t,n){return bi(k.REACT_APP_COMMUNITY_API_URL,e,t,n)},WE={fetchRoom:function(e){return VE("/rooms/".concat(encodeURIComponent(e)))},fetchNewThread:function(e,t){return VE("/threads/".concat(encodeURIComponent(e),"/").concat(t))},fetchNotifications:function(e){return VE("/unread?rooms=".concat(HE()(e.map(encodeURIComponent))))},fetchMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={count:arguments.length>3&&void 0!==arguments[3]?arguments[3]:ot};return t&&(a.before=t),n&&(a.after=n),VE("/messages/".concat(encodeURIComponent(e)),{params:a})},postMessage:function(e,t){return zE("/messages/".concat(encodeURIComponent(t)),{message:e.content,mentions:e.mentions,attachments:e.attachments})},deleteMessage:function(e,t){return n="/messages/".concat(t,"/").concat(e),Oi(k.REACT_APP_COMMUNITY_API_URL,n,a);var n,a},editMessage:function(e,t,n){var a=n.content,r=n.version,o={mentions:n.mentions,version:r,message:a};return zE("/messages/".concat(e,"/").concat(t),o)},replyToMessage:function(e,t,n){return zE("/messages/".concat(encodeURIComponent(t)),{attachments:e.attachments,message:e.content,mentions:e.mentions,reply_to:n})},fetchConnectToken:function(e){return zE("/tokens",{topics:e})},fetchProfile:function(){return VE("/profiles/me")},createProfile:function(e){return zE("/profiles/me",e)},updateProfile:function(e){return zE("/profiles/me/update",e)},fetchProfiles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)return Promise.resolve([]);var n={user_ids:Oh()(t).join(",")};return VE("/profiles/room/".concat(encodeURIComponent(e)),{params:n})},fetchRoomsProfiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return zE("/profiles/rooms",{rooms:e})},fetchParticipants:function(e){return VE("/participants/".concat(encodeURIComponent(e)))},getLinksInfo:function(e,t){var n={content:t};return VE("/messages/links/".concat(encodeURIComponent(e)),{params:n})},fetchNextThreads:function(e,t){return zE("/threads/all",{rooms:e,count:10,cursor:t})}},YE=Ra.a.mark(ZE),KE=Ra.a.mark(eg),qE=Ra.a.mark(tg),JE=Ra.a.mark(ng),XE=Ra.a.mark(ag),$E=Ra.a.mark(rg),QE=Ra.a.mark(og);function ZE(e){var t,n,a,r,o,s;return Ra.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.roomId,a=t.messageId,i.next=3,Object(H_.b)(WE.fetchRoom,n);case 3:return r=i.sent,o=Ka(r),i.next=7,Object(H_.h)(Rr,n);case 7:if(s=i.sent,!a){i.next=13;break}return i.next=11,Object(H_.f)(tc.getPivotMessages(n,a));case 11:i.next=20;break;case 13:if(!(s&&s.unread_count&&s.oldest_message_id)){i.next=18;break}return i.next=16,Object(H_.f)(tc.getPivotMessages(n,s.oldest_message_id));case 16:i.next=20;break;case 18:return i.next=20,Object(H_.f)(tc.getMessages(n));case 20:return i.next=22,Object(H_.f)(vo.getParticipants(n));case 22:return i.next=24,Object(H_.f)({type:$r.GET_ROOM_FULFILLED,payload:o});case 24:case"end":return i.stop()}},YE)}function eg(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.roomId,a=t.lastVisited,o.next=3,Object(H_.b)(dv.updateUnread,n,a);case 3:return r=o.sent,o.next=6,Object(H_.f)({type:$r.UPDATE_LAST_VISITED_FULFILLED,payload:{roomId:n,lastVisited:a,unreads:Object(N.a)({room_id:n},r)}});case 6:case"end":return o.stop()}},KE)}function tg(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.roomId,r.next=3,Object(H_.b)(dv.fetchRoomMetaByRoomId,t);case 3:return n=r.sent,a=ne()(n,"data.project")||void 0,r.next=7,Object(H_.f)({type:$r.GET_ROOM_META_FULFILLED,payload:{roomId:t,project:a}});case 7:case"end":return r.stop()}},qE)}function ng(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)($r.GET_ROOM_META_START,$_(tg,"GET_ROOM_META",$r));case 2:case"end":return e.stop()}},JE)}function ag(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)($r.GET_ROOM_START,$_(ZE,"GET_ROOM",$r));case 2:case"end":return e.stop()}},XE)}function rg(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)($r.UPDATE_LAST_VISITED_START,$_(eg,"UPDATE_LAST_VISITED",$r));case 2:case"end":return e.stop()}},$E)}function og(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([ag(),rg(),ng()]);case 2:case"end":return e.stop()}},QE)}var sg=function(e){return{thread_id:e.room_id,topic:Object(N.a)({},e.room_payload)}},ig=Ra.a.mark(vg),cg=Ra.a.mark(Eg),ug=Ra.a.mark(gg),lg=Ra.a.mark(bg),dg=Ra.a.mark(Og),mg=Ra.a.mark(Ig),pg=Ra.a.mark(Sg),fg=Ra.a.mark(yg),hg=Ra.a.mark(Tg),_g=Ra.a.mark(jg);function vg(e){var t,n,a,r,o,s,i,c,u;return Ra.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload.roomId,l.next=3,Object(H_.a)([Object(H_.b)(WE.fetchRoom,t),Object(H_.b)(Ev,{payload:{roomIds:[t]}})]);case 3:if(n=l.sent,a=Object(ba.a)(n,2),r=a[0],o=a[1],s=o[t],i=sg(r),c=ds(i),!(s&&s.unread_count&&s.oldest_message_id)){l.next=15;break}return l.next=13,Object(H_.f)(tc.getPivotMessages(t,s.oldest_message_id));case 13:l.next=17;break;case 15:return l.next=17,Object(H_.f)(tc.getMessages(t));case 17:return u=r.room_payload.room_id,l.next=20,Object(H_.f)(vo.getParticipants(t,u));case 20:return l.next=22,Object(H_.f)({type:oc.GET_THREAD_FULFILLED,payload:c});case 22:case"end":return l.stop()}},ig)}function Eg(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.messageId,c.next=3,Object(H_.e)(ZE,{payload:{roomId:n}});case 3:return c.next=5,Object(H_.b)(WE.fetchNewThread,n,a);case 5:return r=c.sent,o=sg(r),c.next=9,Object(H_.f)(Xr.getProfiles(n,[o.topic.user_id]));case 9:return s=nr(o.topic),i=s.entities.messages[a],c.next=13,Object(H_.f)({type:oc.GET_NEW_THREAD_FULFILLED,payload:o,meta:{message:i}});case 13:case"end":return c.stop()}},cg)}function gg(e){var t,n,a,r,o,s;return Ra.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.cursor,i.next=3,Object(H_.h)(br,{includeConversations:!0});case 3:return n=i.sent,i.next=6,Object(H_.b)(WE.fetchNextThreads,n,t);case 6:if(a=i.sent,r=ms(a),!(o=ie()(r.entities.threads)).length){i.next=15;break}return i.next=12,Object(H_.f)(Xr.getRoomsProfiles(o));case 12:return s=o.map(function(e){return e.thread_id}),i.next=15,Object(H_.b)(Ev,{payload:{roomIds:s}});case 15:return i.abrupt("return",{payload:r});case 16:case"end":return i.stop()}},ug)}function bg(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(gg,e);case 2:return t=n.sent,n.next=5,Object(H_.f)(Object(N.a)({type:oc.GET_NEXT_THREADS_FULFILLED},t));case 5:case"end":return n.stop()}},lg)}function Og(){var e,t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e={payload:{cursor:"0"}},n.next=3,Object(H_.b)(gg,e);case 3:return t=n.sent,n.next=6,Object(H_.f)(Object(N.a)({type:oc.GET_THREADS_FULFILLED},t));case 6:case"end":return n.stop()}},dg)}function Ig(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(oc.GET_THREAD_START,$_(vg,"GET_THREAD",oc));case 2:case"end":return e.stop()}},mg)}function Sg(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(oc.GET_NEW_THREAD_START,$_(Eg,"GET_NEW_THREAD",oc));case 2:case"end":return e.stop()}},pg)}function yg(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(oc.GET_NEXT_THREADS_START,$_(bg,"GET_NEXT_THREADS",oc));case 2:case"end":return e.stop()}},fg)}function Tg(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(oc.GET_THREADS_START,$_(Og,"GET_THREADS",oc));case 2:case"end":return e.stop()}},hg)}function jg(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([Ig(),Sg(),Tg(),yg()]);case 2:case"end":return e.stop()}},_g)}var Ag=Ra.a.mark(Pg),Rg=Ra.a.mark(Lg),Cg=Ra.a.mark(wg),Ng=Ra.a.mark(xg),kg=Ra.a.mark(Mg);function Pg(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.h)(Pl,e);case 2:return t=n.sent,n.abrupt("return",!de()(t));case 4:case"end":return n.stop()}},Ag)}function Lg(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=ve(e.room_id),n=t?e.room_id:e.parent_message_id||e.room_id,s.next=4,Object(H_.h)(kl);case 4:if(a=s.sent,r=ie()(a),!(o=Oo()(r,function(t){return Il(t,e)}))){s.next=10;break}return s.next=10,Object(H_.f)(tc.replacePendingMessage(n,String(o.message_id),e.message_id));case 10:return s.abrupt("return",o||void 0);case 11:case"end":return s.stop()}},Rg)}function wg(e,t,n){var a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(H_.h)(Ft);case 2:return a=s.sent,r=new Date(Date.now()).toISOString(),s.next=6,Object(H_.b)(Ol,r,e.content);case 6:return o=s.sent,s.abrupt("return",{content:e.content,created_at:r,message_id:o,message_id_str:o,room_id:t,parent_message_id:n,user_id:a.id,_participant:a.id,_profile:a.id});case 8:case"end":return s.stop()}},Cg)}function xg(e,t,n){var a,r,o,s,i,c,u,l;return Ra.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(H_.h)(Yr,n);case 2:if(a=d.sent,r=a?"New message in ".concat(a):"New message",!Ee(n)){d.next=10;break}return d.next=7,Object(H_.h)(Jn,e.user_id);case 7:o=d.sent,r="New private message",o&&(s=rn(void 0,o,n),i=s.name,r=i);case 10:c=De.get("shouldNotify",t.id),u=!!de()(c)||c,(yl(e,t.id)||Ee(n))&&u&&(l=dt(e.content||""),wa.pushIfHidden(r,l));case 14:case"end":return d.stop()}},Ng)}function Mg(e,t,n){var a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=e.created_at,r=e.message_id,o=ne()(e,"thread_message_id"),!ve(n)||!o){c.next=9;break}return c.next=5,Object(H_.h)(Pl,o);case 5:if(s=c.sent,ne()(s,"thread.participants",[]).includes(t.id)){c.next=9;break}return c.abrupt("return");case 9:return i=e.mentions&&e.mentions.includes(t.id),c.next=12,Object(H_.f)(T_.incrementRoomUnreads(n,a,r,i));case 12:case"end":return c.stop()}},kg)}var Dg=Ra.a.mark(pb),Ug=Ra.a.mark(fb),Fg=Ra.a.mark(hb),Gg=Ra.a.mark(_b),Bg=Ra.a.mark(vb),Hg=Ra.a.mark(Eb),Vg=Ra.a.mark(gb),zg=Ra.a.mark(bb),Wg=Ra.a.mark(Ob),Yg=Ra.a.mark(Ib),Kg=Ra.a.mark(Sb),qg=Ra.a.mark(yb),Jg=Ra.a.mark(Tb),Xg=Ra.a.mark(jb),$g=Ra.a.mark(Ab),Qg=Ra.a.mark(Rb),Zg=Ra.a.mark(Cb),eb=Ra.a.mark(Nb),tb=Ra.a.mark(kb),nb=Ra.a.mark(Pb),ab=Ra.a.mark(Lb),rb=Ra.a.mark(wb),ob=Ra.a.mark(xb),sb=Ra.a.mark(Mb),ib=Ra.a.mark(Db),cb=Ra.a.mark(Ub),ub=Ra.a.mark(Fb),lb=Ra.a.mark(Gb),db=Ra.a.mark(Bb),mb=Ra.a.mark(Hb);function pb(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(vb,e);case 2:return t=n.sent,n.next=5,Object(H_.f)({type:ec.GET_PREV_MESSAGES_FULFILLED,payload:t,meta:e.payload});case 5:case"end":return n.stop()}},Dg)}function fb(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H_.b)(vb,Object(N.a)({},e,{payload:Object(N.a)({},e.payload,{count:ot+1})}));case 2:return t=a.sent,n=Object(N.a)({},t,{result:Object(N.a)({},t.result,{messages:t.result.messages.slice(1)})}),a.next=6,Object(H_.f)({type:ec.GET_NEXT_MESSAGES_FULFILLED,payload:n,meta:e.payload});case 6:case"end":return a.stop()}},Ug)}function hb(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(H_.b)(vb,e);case 2:return t=r.sent,r.next=5,Object(H_.b)(vb,Object(N.a)({},e,{payload:Object(N.a)({},e.payload,{prevMessageId:e.payload.nextMessageId,nextMessageId:void 0})}));case 5:return n=r.sent,a=or([n,t]),r.next=9,Object(H_.f)({type:ec.GET_PIVOT_MESSAGES_FULFILLED,payload:a,meta:e.payload});case 9:case"end":return r.stop()}},Fg)}function _b(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(vb,e);case 2:return t=n.sent,n.next=5,Object(H_.f)({type:ec.GET_MESSAGES_FULFILLED,payload:t,meta:e.payload});case 5:case"end":return n.stop()}},Gg)}function vb(e){var t,n,a,r,o,s,i,c,u,l,d;return Ra.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.roomId,a=t.prevMessageId,r=t.nextMessageId,o=t.count,s=a?String(a):void 0,i=r?String(r):void 0,m.next=5,Object(H_.b)(WE.fetchMessages,n,s,i,o);case 5:return c=m.sent,u=tr(c),l=c.messages.map(function(e){return e.user_id}),m.next=10,Object(H_.f)(Xr.getProfiles(n,l));case 10:if(!(d=Tl(c.messages)).length){m.next=14;break}return m.next=14,Object(H_.f)(T_.getRoomsUnreads(d));case 14:return m.abrupt("return",u);case 15:case"end":return m.stop()}},Bg)}function Eb(e){var t,n,a,r,o,s,i,c,u,l,d;return Ra.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(t=e.payload,n=t.roomId,a=t.message,r=t.parentRoomId,o=e.normalizedMessage,s=e.me,!r||!a.mentions){m.next=9;break}if(i=a.mentions,c=n,!i.includes(s.id)){m.next=9;break}return m.next=7,Object(H_.b)(vg,sc.getThread(c));case 7:return m.next=9,Object(H_.f)(sc.addNewThreadId(c));case 9:if(u=a.message_id,l=a.content,d=a.user_id,!ut(l||"")){m.next=13;break}return m.next=13,Object(H_.f)(tc.getLinksInfo(u,l||""));case 13:if(!Ee(n)){m.next=22;break}return m.next=16,Object(H_.h)(Ir,n);case 16:if(m.sent){m.next=20;break}return m.next=20,Object(H_.f)(Qf.getLobby());case 20:return m.next=22,Object(H_.f)(Lr.setConversationRecency(n));case 22:return m.next=24,Object(H_.f)(Xr.getProfiles(n,[d]));case 24:if(s.id===d){m.next=29;break}return m.next=27,Mg(a,s,n);case 27:return m.next=29,xg(a,s,n);case 29:return m.next=31,Object(H_.f)(tc.mergeNewMessageById(o));case 31:case"end":return m.stop()}},Hg)}function gb(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.message,r=nr(Object(N.a)({},a,{room_id:n})),c.next=4,Pg(a.message_id);case 4:return o=c.sent,c.next=7,Object(H_.h)(Ft);case 7:if(s=c.sent,i=s.id===a.user_id,o){c.next=12;break}return c.next=12,Object(H_.b)(Eb,Object(N.a)({},e,{me:s,normalizedMessage:r}));case 12:return c.next=14,Object(H_.b)(Lg,Object(N.a)({},a,{room_id:n}));case 14:return c.next=16,Object(H_.f)({type:ec.RECEIVE_MESSAGE_FULFILLED,payload:r,meta:{payload:Object(N.a)({},e.payload),isNewMessage:!o,isMe:i}});case 16:case"end":return c.stop()}},Vg)}function bb(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.messageId,r=t.message,c.next=3,Object(H_.b)(WE.replyToMessage,r,n,a);case 3:return o=c.sent,s=o.room_id,c.next=7,Object(H_.h)(Es,s);case 7:if(i=c.sent,!de()(i)){c.next=13;break}return c.next=11,Object(H_.b)(vg,sc.getThread(s));case 11:return c.next=13,Object(H_.f)(sc.addNewThreadId(s));case 13:return c.next=15,Object(H_.f)(tc.receiveMessage(s,o,n));case 15:return c.next=17,Object(H_.f)({type:ec.REPLY_TO_MESSAGE_FULFILLED,meta:Object(N.a)({},e.payload,{response:o})});case 17:case"end":return c.stop()}},zg)}function Ob(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.roomId,a=t.message,o.next=3,Object(H_.b)(WE.postMessage,a,n);case 3:return r=o.sent,o.next=6,Object(H_.f)(tc.receiveMessage(n,r));case 6:return o.next=8,Object(H_.f)({type:ec.POST_MESSAGE_FULFILLED,meta:e.payload});case 8:case"end":return o.stop()}},Wg)}function Ib(e){var t,n,a,r,o,s,i,c,u;return Ra.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.roomId,a=t.message,r=t.messageId,!(o=t.pendingMessageId)){l.next=5;break}return l.next=4,Object(H_.h)(Nl,o);case 4:s=l.sent;case 5:if(!(!o||o&&de()(s))){l.next=9;break}return l.next=8,Object(H_.b)(wg,a,n,r);case 8:s=l.sent;case 9:return l.prev=9,l.next=12,Object(H_.f)({type:ec.POST_MESSAGE_PENDING,payload:{message:s}});case 12:return l.next=14,Object(zf.d)(10);case 14:if(La.track(Ta.SendMessage,{roomId:n,messageId:r}),i=ve(n),!r){l.next=22;break}return La.track(Ta.CreateThread,{roomId:n}),l.next=20,Object(H_.b)(bb,{payload:{message:a,messageId:r,roomId:n}});case 20:l.next=33;break;case 22:if(r||!i){l.next=31;break}return l.next=25,Object(H_.h)(Es,n);case 25:return c=l.sent,u=c.topic||{},l.next=29,Object(H_.b)(bb,{payload:{message:a,messageId:u.message_id,roomId:u.room_id}});case 29:l.next=33;break;case 31:return l.next=33,Object(H_.b)(Ob,{payload:{message:a,roomId:n}});case 33:l.next=39;break;case 35:return l.prev=35,l.t0=l.catch(9),l.next=39,Object(H_.f)({type:ec.POST_MESSAGE_REJECTED,payload:Object(N.a)({},e.payload,{message:s,error:l.t0})});case 39:case"end":return l.stop()}},Yg,null,[[9,35]])}function Sb(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.file,r=t.messageId,o=Vi(a),c.next=4,Object(H_.b)(AE,{payload:{file:a,fileIdentifierString:o}});case 4:if(s=c.sent,ue()(s)){c.next=9;break}return i={attachments:s},c.next=9,Object(H_.b)(Ib,{payload:{roomId:n,message:i,messageId:r}});case 9:case"end":return c.stop()}},Kg)}function yb(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,a=t.content,o.next=3,Object(H_.b)(WE.getLinksInfo,String(n),a);case 3:return r=o.sent,o.next=6,Object(H_.f)({type:ec.GET_LINKS_INFO_FULFILLED,payload:r});case 6:case"end":return o.stop()}},qg)}function Tb(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,a=t.roomId,La.track(Ta.DeleteMessage,{roomId:a,messageId:n}),o.next=4,Object(H_.b)(WE.deleteMessage,n,a);case 4:return r=o.sent,o.next=7,Object(H_.f)({type:ec.DELETE_MESSAGE_FULFILLED,payload:r});case 7:case"end":return o.stop()}},Jg)}function jb(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.messageId,a=t.roomId,r=t.message,La.track(Ta.EditMessage,{roomId:a,messageId:n}),s.next=4,Object(H_.b)(WE.editMessage,a,n,r);case 4:return o=s.sent,s.next=7,Object(H_.f)({type:ec.EDIT_MESSAGE_FULFILLED,payload:o});case 7:case"end":return s.stop()}},Xg)}function Ab(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.message,La.track(Ta.ResendPendingMessage,{roomId:t.room_id}),n.next=4,Object(H_.b)(Ib,{payload:Object(N.a)({message:t,roomId:t.room_id,pendingMessageId:t.message_id},t.parent_message_id&&{messageId:t.parent_message_id})});case 4:return n.next=6,Object(H_.f)({type:ec.RESEND_PENDING_MESSAGE_FULFILLED,payload:e.payload});case 6:case"end":return n.stop()}},$g)}function Rb(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.message,La.track(Ta.CancelPendingMessage,{roomId:t.room_id}),n.next=4,Object(H_.f)({type:ec.CANCEL_PENDING_MESSAGE_FULFILLED,payload:e.payload});case 4:case"end":return n.stop()}},Qg)}function Cb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.GET_MESSAGES_START,$_(_b,"GET_MESSAGES",ec));case 2:case"end":return e.stop()}},Zg)}function Nb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.GET_PREV_MESSAGES_START,$_(pb,"GET_PREV_MESSAGES",ec));case 2:case"end":return e.stop()}},eb)}function kb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.GET_NEXT_MESSAGES_START,$_(fb,"GET_NEXT_MESSAGES",ec));case 2:case"end":return e.stop()}},tb)}function Pb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.GET_PIVOT_MESSAGES_START,$_(hb,"GET_PIVOT_MESSAGES",ec));case 2:case"end":return e.stop()}},nb)}function Lb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.RECEIVE_MESSAGE_START,$_(gb,"RECEIVE_MESSAGE",ec));case 2:case"end":return e.stop()}},ab)}function wb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ec.POST_MESSAGE_START,Ib);case 2:case"end":return e.stop()}},rb)}function xb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ec.POST_IMAGE_MESSAGE_START,Sb);case 2:case"end":return e.stop()}},ob)}function Mb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ec.REPLY_TO_MESSAGE_START,$_(bb,"REPLY_TO_MESSAGE",ec));case 2:case"end":return e.stop()}},sb)}function Db(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ec.GET_LINKS_INFO_START,$_(yb,"GET_LINKS_INFO",ec));case 2:case"end":return e.stop()}},ib)}function Ub(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(ec.DELETE_MESSAGE_START,$_(Tb,"DELETE_MESSAGE",ec));case 2:case"end":return e.stop()}},cb)}function Fb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.EDIT_MESSAGE_START,$_(jb,"EDIT_MESSAGE",ec));case 2:case"end":return e.stop()}},ub)}function Gb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.RESEND_PENDING_MESSAGE_START,$_(Ab,"RESEND_PENDING_MESSAGE",ec));case 2:case"end":return e.stop()}},lb)}function Bb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(ec.CANCEL_PENDING_MESSAGE_START,$_(Rb,"CANCEL_PENDING_MESSAGE",ec));case 2:case"end":return e.stop()}},db)}function Hb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([Cb(),Nb(),kb(),Pb(),Lb(),wb(),xb(),Mb(),Db(),Ub(),Fb(),Gb(),Bb()]);case 2:case"end":return e.stop()}},mb)}var Vb="{\n  can_see_career_portal,\n  has_enterprise_enrollments,\n  graduated_nanodegrees_count,\n  subscribed_nanodegrees_count,\n  image_url\n}",zb=k.REACT_APP_NAME,Wb=function(e){return Ii(k.REACT_APP_CLASSROOM_API_URL,e)};function Yb(e){var t="query fetchClassroomUserMetadata($userId: String!) {\n    user(id: $userId) ".concat(Vb,"\n  }\n  ");return Wb({query:t,variables:{userId:e}})}var Kb=function(){var e=Object(Ca.a)(Ra.a.mark(function e(t){var n,a;return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="\n    query ".concat(zb,"_FetchNanodegree($key: String!) {\n      nanodegree(key: $key) {\n        locale\n        title\n        version\n        key\n        id\n      }\n    }\n  "),a={key:t},e.next=4,Wb({query:n,variables:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),qb=Ra.a.mark($b),Jb=Ra.a.mark(Qb),Xb=Ra.a.mark(Zb);function $b(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.ndKey,r.next=3,Object(H_.b)(Kb,t);case 3:return n=r.sent,a=n.data,r.next=7,Object(H_.f)({type:Hm.GET_NANODEGREE_FULFILLED,payload:a});case 7:case"end":return r.stop()}},qb)}function Qb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Hm.GET_NANODEGREE_START,$_($b,"GET_NANODEGREE",Hm));case 2:case"end":return e.stop()}},Jb)}function Zb(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([Qb()]);case 2:case"end":return e.stop()}},Xb)}var eO=n(441),tO=n.n(eO),nO=Ra.a.mark(dO),aO=Ra.a.mark(mO),rO=Ra.a.mark(pO),oO=Ra.a.mark(fO),sO=Ra.a.mark(hO),iO=Ra.a.mark(_O),cO=Ra.a.mark(vO),uO=Ra.a.mark(EO),lO=Ra.a.mark(gO);function dO(e){var t,n,a,r,o,s,i,c,u,l,d,m,p,f,h,_;return Ra.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,n=t.roomId,a=t.parentRoomId,v.next=3,Object(H_.b)(WE.fetchParticipants,n);case 3:return r=v.sent,o=tn(r),s=o.result,i=s.admins,c=void 0===i?[]:i,u=s.active,l=void 0===u?[]:u,d=s.inactive,m=void 0===d?[]:d,p=[].concat(Object(St.a)(c),Object(St.a)(l),Object(St.a)(m)),f=vt(Object(St.a)(p)),v.next=10,Object(H_.f)(Xr.getProfiles(n,f));case 10:return v.next=12,Object(H_.f)({type:_o.GET_PARTICIPANTS_FULFILLED,payload:o});case 12:if(!a){v.next=19;break}return v.next=15,Object(H_.b)(WE.fetchParticipants,a);case 15:return h=v.sent,_=tn(h),v.next=19,Object(H_.f)({type:_o.GET_PARTICIPANTS_FULFILLED,payload:_});case 19:case"end":return v.stop()}},nO)}function mO(e){var t,n,a,r,o;return Ra.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.roomId,a=t.search,s.next=3,Object(H_.b)(dv.searchRoomParticipants,{room_id:n,count:50,search:a});case 3:return r=s.sent,o=tO()(r.data.participants.participants,function(e){return e.id}),s.next=7,Object(H_.f)(Xr.getProfiles(n,o));case 7:return s.next=9,Object(H_.f)({type:_o.SEARCH_PARTICIPANTS_FULFILLED,payload:r.data.participants,meta:{roomId:n}});case 9:case"end":return s.stop()}},aO)}function pO(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.roomId,a=t.search,o.next=3,Object(H_.b)(dv.searchRoomParticipants,{room_id:n,search:a});case 3:return r=o.sent,o.next=6,Object(H_.f)({type:_o.SEARCH_PARTICIPANTS_TO_MENTION_FULFILLED,payload:r.data.participants,meta:{roomId:n}});case 6:case"end":return o.stop()}},rO)}function fO(e){var t,n,a,r,o,s;return Ra.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.userId,a=t.roomId,r=t.isActive,i.next=3,Object(H_.h)(Ft);case 3:return o=i.sent,s=n===o.id,i.next=7,Object(H_.f)({type:_o.SET_PARTICIPANT_STATUS_FULFILLED,payload:{userId:n,roomId:a,isActive:r,isMe:s}});case 7:case"end":return i.stop()}},oO)}function hO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(_o.SET_PARTICIPANT_STATUS_START,$_(fO,"SET_PARTICIPANT_STATUS",_o));case 2:case"end":return e.stop()}},sO)}function _O(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.l)(100,_o.SEARCH_PARTICIPANTS_START,$_(mO,"SEARCH_PARTICIPANTS",_o));case 2:case"end":return e.stop()}},iO)}function vO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.l)(100,_o.SEARCH_PARTICIPANTS_TO_MENTION_START,$_(pO,"SEARCH_PARTICIPANTS_TO_MENTION",_o));case 2:case"end":return e.stop()}},cO)}function EO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(_o.GET_PARTICIPANTS_START,$_(dO,"GET_PARTICIPANTS",_o));case 2:case"end":return e.stop()}},uO)}function gO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([EO(),_O(),vO(),hO()]);case 2:case"end":return e.stop()}},lO)}var bO=Ra.a.mark(OO);function OO(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.h)(qn);case 2:return t=n.sent,n.abrupt("return",e.reduce(function(e,n){var a=[].concat(Object(St.a)(n._threadParticipants),[n._threadAuthorParticipant]),r=IO(t,a);return r.length&&e.push({room_id:n.thread_id,users:r}),e},[]));case 4:case"end":return n.stop()}},bO)}function IO(e,t){return t.filter(function(t){return!e.includes(t)})}var SO=Ra.a.mark(PO),yO=Ra.a.mark(LO),TO=Ra.a.mark(wO),jO=Ra.a.mark(xO),AO=Ra.a.mark(MO),RO=Ra.a.mark(DO),CO=Ra.a.mark(UO),NO=Ra.a.mark(FO),kO=Ra.a.mark(GO);function PO(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.userIds,c.next=3,Object(H_.h)(qn);case 3:if(r=c.sent,o=IO(r,a),s=[],!o.length){c.next=10;break}return c.next=9,Object(H_.b)(WE.fetchProfiles,n,o);case 9:s=c.sent;case 10:return i=Qt(s),c.next=13,Object(H_.f)({type:Jr.GET_PROFILES_FULFILLED,payload:i});case 13:case"end":return c.stop()}},SO)}function LO(e){var t,n,a,r,o,s,i,c,u,l,d;return Ra.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.roomId,a=t.index,m.next=3,Object(H_.h)(hn,n);case 3:return r=m.sent,o=r.admins,s=r.active,i=r.inactive,c=[].concat(Object(St.a)(o),Object(St.a)(s),Object(St.a)(i)),m.next=10,Object(H_.b)(vt,c,a);case 10:return u=m.sent,m.next=13,Object(H_.h)(qn);case 13:return l=m.sent,m.next=16,Object(H_.b)(IO,l,u);case 16:return d=m.sent,m.next=19,Object(H_.f)(Xr.getProfiles(n,d));case 19:case"end":return m.stop()}},yO)}function wO(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.threads,o.next=3,Object(H_.b)(OO,t);case 3:if(!(n=o.sent).length){o.next=12;break}return a=[],o.next=8,Object(H_.b)(WE.fetchRoomsProfiles,n);case 8:return a=o.sent,r=Qt(a),o.next=12,Object(H_.f)({type:Jr.GET_ROOMS_PROFILES_FULFILLED,payload:r});case 12:case"end":return o.stop()}},TO)}function xO(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.userId,a.next=3,Object(H_.b)(dv.fetchAdditionalProfileInfo,t);case 3:return n=a.sent,a.next=6,Object(H_.f)({type:Jr.GET_ADDITIONAL_INFO_FULFILLED,payload:n,meta:Object(N.a)({},e.payload)});case 6:case"end":return a.stop()}},jO)}function MO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Jr.GET_PROFILES_START,$_(PO,"GET_PROFILES",Jr));case 2:case"end":return e.stop()}},AO)}function DO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Jr.GET_ROOMS_PROFILES_START,$_(wO,"GET_ROOMS_PROFILES",Jr));case 2:case"end":return e.stop()}},RO)}function UO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Jr.RESOLVE_ADDITIONAL_PROFILES,LO);case 2:case"end":return e.stop()}},CO)}function FO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Jr.GET_ADDITIONAL_INFO_START,$_(xO,"GET_ADDITIONAL_INFO",Jr));case 2:case"end":return e.stop()}},NO)}function GO(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([MO(),DO(),UO(),FO()]);case 2:case"end":return e.stop()}},kO)}var BO=Ra.a.mark(XO),HO=Ra.a.mark($O),VO=Ra.a.mark(QO),zO=Ra.a.mark(ZO),WO=Ra.a.mark(eI),YO=Ra.a.mark(tI),KO=Ra.a.mark(nI),qO=Ra.a.mark(aI),JO=Ra.a.mark(rI);function XO(){var e,t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(dv.fetchPendingRatings);case 2:return e=n.sent,t=ne()(e,"data.user.project_mentor_ratings_due")||void 0,n.next=6,Object(H_.f)({type:Br.GET_PENDING_RATINGS_FULFILLED,payload:t});case 6:case"end":return n.stop()}},BO)}function $O(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H_.b)(dv.fetchRatingsByRoomId,e.payload.roomId);case 2:return t=a.sent,n=ne()(t,"data.user.project_mentor_ratings_due")||void 0,a.next=6,Object(H_.f)({type:Br.GET_ROOM_RATINGS_FULFILLED,payload:n,meta:Object(N.a)({},e.payload)});case 6:case"end":return a.stop()}},HO)}function QO(e){var t,n,a,r,o,s,i;return Ra.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.roomId,a=t.mentorId,r=t.userId,o=t.rating,c.next=3,Object(H_.b)(dv.mutateMentorRating,a,r,n,o);case 3:return s=c.sent,i=ne()(s,"data.create_project_mentor_rating")||void 0,c.next=7,Object(H_.f)({type:Br.MUTATE_MENTOR_RATING_FULFILLED,payload:i,meta:Object(N.a)({},e.payload)});case 7:case"end":return c.stop()}},VO)}function ZO(e){var t,n,a,r;return Ra.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.roomId,a=t.participantIds,o.next=3,Object(H_.b)(dv.fetchPassedUsersByRoomId,n,a);case 3:return r=o.sent,o.next=6,Object(H_.f)({type:Br.GET_PASSED_USERS_FULFILLED,payload:r||void 0,meta:Object(N.a)({},e.payload)});case 6:case"end":return o.stop()}},zO)}function eI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Br.GET_PENDING_RATINGS_START,$_(XO,"GET_PENDING_RATINGS",Br));case 2:case"end":return e.stop()}},WO)}function tI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Br.GET_ROOM_RATINGS_START,$_($O,"GET_ROOM_RATINGS",Br));case 2:case"end":return e.stop()}},YO)}function nI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(Br.MUTATE_MENTOR_RATING_START,$_(QO,"MUTATE_MENTOR_RATING",Br));case 2:case"end":return e.stop()}},KO)}function aI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.k)(Br.GET_PASSED_USERS_START,$_(ZO,"GET_PASSED_USERS",Br));case 2:case"end":return e.stop()}},qO)}function rI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([eI(),tI(),nI(),aI()]);case 2:case"end":return e.stop()}},JO)}var oI={getStatuspageComponents:function(){return e="/components.json",gi(k.REACT_APP_STATUSPAGE_API_URL,e);var e}},sI=function(e){if(ue()(e))return"operational";var t=Oo()(e,function(e){return e.id===k.REACT_APP_STATUSPAGE_STUDENTHUB_ID});return t?t.status:"operational"},iI=Ra.a.mark(vI),cI=Ra.a.mark(EI),uI=Ra.a.mark(gI),lI=Ra.a.mark(bI),dI=Ra.a.mark(OI),mI=Ra.a.mark(II),pI=Ra.a.mark(SI),fI=Ra.a.mark(yI),hI=Ra.a.mark(TI),_I=Ra.a.mark(jI);function vI(){var e,t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(H_.a)([Object(H_.b)(dv.syncLobby),Object(H_.b)(dv.syncPairings)]);case 3:return a.next=5,Object(H_.a)([Object(H_.b)(WE.fetchProfile),Object(H_.b)(ME,Qf.getLobby())]);case 5:return e=a.sent,t=Object(ba.a)(e,1),n=t[0],La.identify({id:n.id}),a.next=11,Object(H_.f)(Qf.cancelPollLobbyUpdates());case 11:return a.next=13,Object(H_.f)(Qf.startPollLobbyUpdates());case 13:return a.next=15,Object(H_.e)(gI);case 15:return a.next=17,Object(H_.f)({payload:{me:n},type:x.BOOTSTRAP_FULFILLED});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(0),a.next=23,Object(H_.f)(w(x.BOOTSTRAP_REJECTED,a.t0));case 23:case"end":return a.stop()}},iI,null,[[0,19]])}function EI(e){var t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.userId,r.next=3,Object(H_.b)(Yb,t);case 3:return n=r.sent,a=n.data,r.next=7,Object(H_.f)({type:x.FETCH_CLASSROOM_METADATA_FULFILLED,payload:a});case 7:case"end":return r.stop()}},cI)}function gI(){var e,t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H_.b)(oI.getStatuspageComponents);case 2:return e=n.sent,t="operational",e&&e.components&&(t=sI(e.components)),n.next=7,Object(H_.f)({type:x.FETCH_STATUS_FULFILLED,payload:t});case 7:case"end":return n.stop()}},uI)}function bI(){var e;return Ra.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H_.b)(WE.fetchProfile);case 2:return e=t.sent,t.next=5,Object(H_.f)({type:x.FETCH_ME_FULFILLED,payload:{me:e}});case 5:case"end":return t.stop()}},lI)}function OI(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.profile,a.next=3,Object(H_.b)(WE.updateProfile,t);case 3:return n=a.sent,a.next=6,Object(H_.f)({type:x.UPDATE_ME_FULFILLED,payload:n});case 6:case"end":return a.stop()}},dI)}function II(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(x.BOOTSTRAP_PENDING,vI);case 2:case"end":return e.stop()}},mI)}function SI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(x.FETCH_ME_START,bI);case 2:case"end":return e.stop()}},pI)}function yI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(x.UPDATE_ME_START,$_(OI,"UPDATE_ME",x));case 2:case"end":return e.stop()}},fI)}function TI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)(x.FETCH_CLASSROOM_METADATA_START,$_(EI,"FETCH_CLASSROOM_METADATA",x));case 2:case"end":return e.stop()}},hI)}function jI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([II(),SI(),yI(),TI()]);case 2:case"end":return e.stop()}},_I)}var AI=n(442),RI={minReconnectionDelay:50,reconnectionDelayGrowFactor:2,debug:"production"!==k.REACT_APP_ENV},CI=function(){function e(t,n,a,r){Object(i.a)(this,e),this.websocketUrl=void 0,this.userId=void 0,this.rooms=void 0,this.authenticated=void 0,this.authenticationError=void 0,this.authenticationTokenErrors=void 0,this.socket=void 0,this.heartbeat=void 0,this.events=void 0,this.navigator=void 0,this.websocketUrl=t,this.userId=n,this.rooms=a,this.authenticated=!1,this.authenticationError=!1,this.authenticationTokenErrors=0,this.events={},this.navigator=r}return Object(c.a)(e,[{key:"initialize",value:function(){var e=this;if(!this.socket){this.socket=new AI.a(this.websocketUrl,[],RI),this.socket.onopen=function(){e.authenticateConnection()},this.socket.onclose=function(t){1008===t.code&&(e.authenticationError=!0,e.socket.close(1e3,"client disconnected",{keepClosed:!0,fastClose:!0})),e.authenticated=!1},this.socket.onmessage=function(t){var n;try{n=JSON.parse(t.data)}catch(t){throw new Error("Error parsing : ".concat(t.data))}var a=n.version,r="v1.3.0".split(".").slice(0,-1).join("."),o=a.includes(r);switch(n.type){case"accepted":return e.authenticated=!0,e.authenticationError=!1,void e.emit("authenticated");case"joined":case"quit":case"message":case"delete":case"edit":case"active_users":case"reply":if(!o)return;break;default:return}e.emit("message",n)};this.heartbeat=setInterval(function(){var t=e.connected();e.emit("ping",t)},100)}}},{key:"close",value:function(){this.heartbeat&&clearInterval(this.heartbeat),this.socket&&this.socket.close(1e3,"client disconnected",{keepClosed:!0})}},{key:"connected",value:function(){return!!this.socket&&(this.authenticated&&this.socket.readyState===WebSocket.OPEN&&this.navigator.onLine)}},{key:"on",value:function(e,t){return this.events[e]?this.events[e].push(t):this.events[e]=[t],this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.events[e]?(this.events[e].forEach(function(e){e.apply(void 0,n)}),this):this}},{key:"authenticateConnection",value:function(){var e=this;return WE.fetchConnectToken(this.rooms).then(function(t){e.authenticationTokenErrors=0;var n={type:"handshake",version:"v1.3.0",payload:{user_id:e.userId,rooms:e.rooms,challenge_token:t}};e.socket.send(JSON.stringify(n))}).catch(function(){e.authenticationTokenErrors++,e.authenticationError=!0,e.authenticationTokenErrors>=3?e.socket.close(1e3,"client disconnecting",{keepClosed:!0}):e.socket.close(1e3,"client disconnecting",{keepClosed:!1,delay:5e3})})}}]),e}(),NI=Ra.a.mark(wI),kI=Ra.a.mark(UI),PI=Ra.a.mark(FI),LI=Ra.a.mark(GI);function wI(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H_.h)(br,{includeConversations:!0});case 2:return t=a.sent,(n=new CI(k.REACT_APP_UCHAT_REAL_TIME_API_URL,e,t,navigator)).initialize(),a.abrupt("return",n);case 6:case"end":return a.stop()}},NI)}function xI(e){e.close()}function MI(e){return La.track(Ta.EnterLobby),Object(zf.e)(function(t){var n=null;return e.on("message",function(e){!function(e,t){switch(e.type){case"message":return t(tc.receiveMessage(e.room_id,e.payload));case"reply":return t(tc.receiveMessage(e.payload.thread_room_id,e.payload,e.room_id));case"delete":return t(tc.receiveDeleteMessage(e.room_id,e.payload.message_id));case"edit":return t(tc.receiveMessage(e.room_id,e.payload));case"joined":var n=e.payload.user_id;return t(vo.setParticipantStatus(n,e.room_id,!0));case"quit":var a=e.payload.user_id;return t(vo.setParticipantStatus(a,e.room_id,!1));case"active_users":var r=e.payload.active||[];t(Qf.checkActiveUsersReceived(r))}}(e,t)}).on("close",function(){return La.track(Ta.LeaveLobby),t(zf.a)}).on("ping",function(e){e!==n&&(t(Gr.connectionStatusChange(e)),n=e)}),function(){}})}function DI(e){La.track(Ta.LeaveLobby),e.close()}function UI(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(H_.i)(e);case 3:return t=n.sent,n.next=6,Object(H_.f)(t);case 6:n.next=0;break;case 8:case"end":return n.stop()}},kI)}function FI(){var e,t,n,a;return Ra.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(H_.i)(Fr.INIT_SOCKET);case 3:return e=r.sent,t=e.payload.userId,r.next=7,Object(H_.b)(wI,t);case 7:return n=r.sent,r.next=10,Object(H_.b)(MI,n);case 10:return a=r.sent,r.next=13,Object(H_.g)({watchers:Object(H_.a)([UI(a)]),cancel:Object(H_.i)(Fr.CLOSE_SOCKET)});case 13:return r.next=15,Object(H_.b)(xI,n);case 15:return r.next=17,Object(H_.b)(DI,a);case 17:r.next=0;break;case 19:case"end":return r.stop()}},PI)}function GI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([FI()]);case 2:case"end":return e.stop()}},LI)}var BI={BLUR:"".concat("WINDOW","/BLUR"),FOCUS:"".concat("WINDOW","/FOCUS")},HI={onBlur:function(){return P(BI.BLUR,{event:"blur"})},onFocus:function(){return P(BI.FOCUS,{event:"focus"})}},VI=Ra.a.mark(qI),zI=Ra.a.mark(JI),WI=Ra.a.mark(XI),YI=Ra.a.mark($I),KI=Ra.a.mark(QI);function qI(e){var t,n;return Ra.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.type,a.next=a.t0===ec.RECEIVE_MESSAGE_FULFILLED?3:a.t0===BI.BLUR?3:a.t0===BI.FOCUS?8:10;break;case 3:return a.next=5,Object(H_.h)(Nr);case 5:return(t=a.sent)>0&&(n=t>9?"9+":t,Em.blinkTitle("(".concat(n,") unread messages"))),a.abrupt("return");case 8:return Em.clearBlink(),a.abrupt("return");case 10:case"end":return a.stop()}},VI)}function JI(e){var t;return Ra.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.event,n.next=3,"blur"===t?Object(H_.f)(HI.onBlur()):Object(H_.f)(HI.onFocus());case 3:case"end":return n.stop()}},zI)}function XI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.j)([BI.BLUR,BI.FOCUS,ec.RECEIVE_MESSAGE_FULFILLED],qI);case 2:case"end":return e.stop()}},WI)}function $I(){var e;return Ra.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(zf.e)(function(e){var t=function(){e({event:"blur"})};window.addEventListener("blur",t);var n=function(){e({event:"focus"})};return window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}}),t.next=3,Object(H_.j)(e,JI);case 3:case"end":return t.stop()}},YI)}function QI(){return Ra.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H_.a)([XI(),$I()]);case 2:case"end":return e.stop()}},KI)}var ZI={alertsSagas:X_,conversationsSagas:$v,experimentsSagas:fE,filesSagas:CE,lobbySagas:GE,messagesSagas:Hb,nanodegreesSagas:Zb,participantsSagas:gO,profilesSagas:GO,projectsSagas:rI,roomsSagas:og,sessionSagas:jI,socketsSagas:GI,threadsSagas:jg,unreadsSagas:Ov,windowSagas:QI};var eS=Object(zf.c)(),tS=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Vf.c,nS=Object(Vf.d)(F_,tS(Object(Vf.a)(eS)));B_()(ZI,function(e){eS.run(e)});var aS=nS,rS=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Nf,null,r.a.createElement(f.Provider,null,r.a.createElement(j,null,r.a.createElement("div",null,r.a.createElement(m.a,{store:aS},r.a.createElement(Hf,null,r.a.createElement(p.a,null,r.a.createElement($,null,r.a.createElement(Of,null))),r.a.createElement(Gf,null)))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(738);window.NREUM&&(window.NREUM.info=q),s.a.render(r.a.createElement(rS,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,n){e.exports={highlights:"metric-highlights_highlights__1y4bM",iconWrapper:"metric-highlights_iconWrapper__11iET",statsWrapper:"metric-highlights_statsWrapper__tiVJK",stat:"metric-highlights_stat__20qXu",label:"metric-highlights_label__2gQe9",gridCenter:"metric-highlights_gridCenter__2md1U"}},76:function(e,t,n){e.exports={conversation:"conversations-list-item_conversation__3HMnQ",inner:"conversations-list-item_inner__1F1IC",avatar:"conversations-list-item_avatar__3uoC8",content:"conversations-list-item_content__36SzJ",messageTop:"conversations-list-item_messageTop__2EQW_",notification:"conversations-list-item_notification__oG-5R",imageContentPreview:"conversations-list-item_imageContentPreview__2M5gY",unarchive:"conversations-list-item_unarchive__2IMo0"}},84:function(e,t,n){e.exports={nav:"lobby-list-item_nav__1YdI9",roomList:"lobby-list-item_roomList__UIueH",navHeader:"lobby-list-item_navHeader__21pWq",ndTitle:"lobby-list-item_ndTitle__3dYVZ",programTitle:"lobby-list-item_programTitle__3WTft",rooms:"lobby-list-item_rooms__3TOGj",groupingHeader:"lobby-list-item_groupingHeader__37r06",default:"lobby-list-item_default__1w5bc",conversationsList:"lobby-list-item_conversationsList__30HSD",conversationsListInner:"lobby-list-item_conversationsListInner__3yzIY",conversationsLink:"lobby-list-item_conversationsLink__2CRcp",unreadsOverlayBottom:"lobby-list-item_unreadsOverlayBottom__-ClGT",unreadsOverlayTop:"lobby-list-item_unreadsOverlayTop__3VRuD",notificationContainer:"lobby-list-item_notificationContainer__1Wkax",roomListItem:"lobby-list-item_roomListItem__1Abha",archiveButton:"lobby-list-item_archiveButton__asJ_J",locked:"lobby-list-item_locked__2I8Kn",selected:"lobby-list-item_selected__yAvGt",unlocked:"lobby-list-item_unlocked__3Qs7p",layout:"lobby-list-item_layout__2Gy72",content:"lobby-list-item_content__Dt2kd",roomStatus:"lobby-list-item_roomStatus__39UVV",right:"lobby-list-item_right__3cZEt",icon:"lobby-list-item_icon__3k-Ee",activityContainer:"lobby-list-item_activityContainer__1-FB1",lockedTooltip:"lobby-list-item_lockedTooltip__1m3Oy"}},85:function(e,t,n){e.exports={maxImageHeight:"384px",wrapper:"display-user-message_wrapper__Nl-Kn",emojiMessage:"display-user-message_emojiMessage__226zh",messageContent:"display-user-message_messageContent__7yiEE",menuContainer:"display-user-message_menuContainer__3QJRB",bottom:"display-user-message_bottom__1K4H5",failedPendingMessage:"display-user-message_failedPendingMessage__2_I_5",failedPendingActions:"display-user-message_failedPendingActions__3UEVs"}},92:function(e,t,n){e.exports={accordion:"accordion_accordion__eiJ6U",link:"accordion_link__208jk",open:"accordion_open__1YyE-",closed:"accordion_closed__s92lo",caret:"accordion_caret__39WJz",rotated:"accordion_rotated__H1yCP",unrotated:"accordion_unrotated__2psKQ"}},94:function(e,t,n){e.exports={messageMenu:"message-menu_messageMenu__3Qmr9",menuItem:"message-menu_menuItem__1Dvc9",moreOptions:"message-menu_moreOptions__3SS8p",above:"message-menu_above__3YCnx",moreOptionsList:"message-menu_moreOptionsList__mMFQf"}},95:function(e,t,n){e.exports={message:"topic_message__3610s",messageInner:"topic_messageInner__3LmkW",avatar:"topic_avatar__1D0n1",name:"topic_name__3FCIX",imageWrapper:"topic_imageWrapper__HeKbe",downloadButtonWrapper:"topic_downloadButtonWrapper__2rtOy"}}},[[447,1,2]]]);
//# sourceMappingURL=main.11a3917e.chunk.js.map